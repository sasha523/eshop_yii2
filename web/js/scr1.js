(function(e){"function"==typeof define&&define.noamd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function s(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(v.inline?v.dpDiv.parent()[0]:v.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function r(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}function h(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}};var l=0,u=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,n=u.call(arguments,1),a=0,o=n.length;o>a;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(n){var a="string"==typeof n,o=u.call(arguments,1),r=this;return n=!a&&o.length?e.widget.extend.apply(null,[n].concat(o)):n,a?this.each(function(){var i,a=e.data(this,s);return"instance"===n?(r=a,!1):a?e.isFunction(a[n])&&"_"!==n.charAt(0)?(i=a[n].apply(a,o),i!==a&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+n+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+n+"'")}):this.each(function(){var t=e.data(this,s);t?(t.option(n||{}),t._init&&t._init()):e.data(this,s,new i(n,this))}),r}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=l++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget;var d=!1;e(document).mouseup(function(){d=!1}),e.widget("ui.mouse",{version:"1.11.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!d){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),d=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):t.which?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),d=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function t(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function i(t,i){return parseInt(e.css(t,i),10)||0}function s(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,a,o=Math.max,r=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==n)return n;var t,i,s=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=s.children()[0];return e("body").append(s),t=a.offsetWidth,s.css("overflow","scroll"),i=a.offsetWidth,t===i&&(i=s[0].clientWidth),s.remove(),n=t-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,a="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]),n=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:s,isDocument:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s||n?i.width():i.outerWidth(),height:s||n?i.height():i.outerHeight()}}},e.fn.position=function(n){if(!n||!n.of)return f.apply(this,arguments);n=e.extend({},n);var p,m,g,v,y,b,_=e(n.of),x=e.position.getWithinInfo(n.within),w=e.position.getScrollInfo(x),k=(n.collision||"flip").split(" "),T={};return b=s(_),_[0].preventDefault&&(n.at="left top"),m=b.width,g=b.height,v=b.offset,y=e.extend({},v),e.each(["my","at"],function(){var e,t,i=(n[this]||"").split(" ");1===i.length&&(i=l.test(i[0])?i.concat(["center"]):u.test(i[0])?["center"].concat(i):["center","center"]),i[0]=l.test(i[0])?i[0]:"center",i[1]=u.test(i[1])?i[1]:"center",e=d.exec(i[0]),t=d.exec(i[1]),T[this]=[e?e[0]:0,t?t[0]:0],n[this]=[c.exec(i[0])[0],c.exec(i[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===n.at[0]?y.left+=m:"center"===n.at[0]&&(y.left+=m/2),"bottom"===n.at[1]?y.top+=g:"center"===n.at[1]&&(y.top+=g/2),p=t(T.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var s,l,u=e(this),d=u.outerWidth(),c=u.outerHeight(),f=i(this,"marginLeft"),b=i(this,"marginTop"),D=d+f+i(this,"marginRight")+w.width,S=c+b+i(this,"marginBottom")+w.height,N=e.extend({},y),M=t(T.my,u.outerWidth(),u.outerHeight());"right"===n.my[0]?N.left-=d:"center"===n.my[0]&&(N.left-=d/2),"bottom"===n.my[1]?N.top-=c:"center"===n.my[1]&&(N.top-=c/2),N.left+=M[0],N.top+=M[1],a||(N.left=h(N.left),N.top=h(N.top)),s={marginLeft:f,marginTop:b},e.each(["left","top"],function(t,i){e.ui.position[k[t]]&&e.ui.position[k[t]][i](N,{targetWidth:m,targetHeight:g,elemWidth:d,elemHeight:c,collisionPosition:s,collisionWidth:D,collisionHeight:S,offset:[p[0]+M[0],p[1]+M[1]],my:n.my,at:n.at,within:x,elem:u})}),n.using&&(l=function(e){var t=v.left-N.left,i=t+m-d,s=v.top-N.top,a=s+g-c,h={target:{element:_,left:v.left,top:v.top,width:m,height:g},element:{element:u,left:N.left,top:N.top,width:d,height:c},horizontal:0>i?"left":t>0?"right":"center",vertical:0>a?"top":s>0?"bottom":"middle"};d>m&&m>r(t+i)&&(h.horizontal="center"),c>g&&g>r(s+a)&&(h.vertical="middle"),h.important=o(r(t),r(i))>o(r(s),r(a))?"horizontal":"vertical",n.using.call(this,e,h)}),u.offset(e.extend(N,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=e.left-t.collisionPosition.marginLeft,h=n-r,l=r+t.collisionWidth-a-n;t.collisionWidth>a?h>0&&0>=l?(i=e.left+h+t.collisionWidth-a-n,e.left+=h-i):e.left=l>0&&0>=h?n:h>l?n+a-t.collisionWidth:n:h>0?e.left+=h:l>0?e.left-=l:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollTop:s.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,h=n-r,l=r+t.collisionHeight-a-n;t.collisionHeight>a?h>0&&0>=l?(i=e.top+h+t.collisionHeight-a-n,e.top+=h-i):e.top=l>0&&0>=h?n:h>l?n+a-t.collisionHeight:n:h>0?e.top+=h:l>0?e.top-=l:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,d=l+t.collisionWidth-o-h,c="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+c+p+f+t.collisionWidth-o-a,(0>i||r(u)>i)&&(e.left+=c+p+f)):d>0&&(s=e.left-t.collisionPosition.marginLeft+c+p+f-h,(s>0||d>r(s))&&(e.left+=c+p+f))},top:function(e,t){var i,s,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,d=l+t.collisionHeight-o-h,c="top"===t.my[1],p=c?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-o-a,e.top+p+f+m>u&&(0>s||r(u)>s)&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,e.top+p+f+m>d&&(i>0||d>r(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,n,o,r=document.getElementsByTagName("body")[0],h=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in s)t.style[o]=s[o];t.appendChild(h),i=r||document.documentElement,i.insertBefore(t,i.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",n=e(h).offset().left,a=n>10&&11>n,t.innerHTML="",i.removeChild(t)}()}(),e.ui.position,e.widget("ui.draggable",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var i=this.document[0],s=this.options;try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&e(i.activeElement).blur()}catch(n){}return this.helper||s.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(s.iframeFix===!0?"iframe":s.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",t,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.element.focus(),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options,a=this.document[0];return this.relativeContainer=null,n.containment?"window"===n.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===n.containment?(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):n.containment.constructor===Array?(this.containment=n.containment,void 0):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),s=i[0],s&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i),void 0):(this.containment=null,void 0)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,s,n,a,o=this.options,r=this._isRootNode(this.scrollParent[0]),h=e.pageX,l=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(h=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(l=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(h=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(l=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((h-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,h=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a),"y"===o.axis&&(h=this.originalPageX),"x"===o.axis&&(l=this.originalPageY)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s,this],!0),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,s){var n=s.options,a=e.extend({},i,{item:s.element});s.sortables=[],e(n.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i,s){var n=e.extend({},i,{item:s.element});e.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,n))})},drag:function(t,i,s){var n=this;e.each(s.sortables,function(){var a=!1,o=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",t),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",t),s.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,s){var n=e("body"),a=s.options;n.css("cursor")&&(a._cursor=n.css("cursor")),n.css("cursor",a.cursor)},stop:function(t,i,s){var n=s.options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("opacity")&&(a._opacity=n.css("opacity")),n.css("opacity",a.opacity)},stop:function(t,i,s){var n=s.options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,s){var n=s.options,a=!1,o=s.scrollParentNotHidden[0],r=s.document[0];o!==r&&"HTML"!==o.tagName?(n.axis&&"x"===n.axis||(s.overflowOffset.top+o.offsetHeight-t.pageY<n.scrollSensitivity?o.scrollTop=a=o.scrollTop+n.scrollSpeed:t.pageY-s.overflowOffset.top<n.scrollSensitivity&&(o.scrollTop=a=o.scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(s.overflowOffset.left+o.offsetWidth-t.pageX<n.scrollSensitivity?o.scrollLeft=a=o.scrollLeft+n.scrollSpeed:t.pageX-s.overflowOffset.left<n.scrollSensitivity&&(o.scrollLeft=a=o.scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(r).scrollTop()<n.scrollSensitivity?a=e(r).scrollTop(e(r).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<n.scrollSensitivity&&(a=e(r).scrollTop(e(r).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(r).scrollLeft()<n.scrollSensitivity?a=e(r).scrollLeft(e(r).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<n.scrollSensitivity&&(a=e(r).scrollLeft(e(r).scrollLeft()+n.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,s){var n=s.options;s.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var t=e(this),i=t.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,s){var n,a,o,r,h,l,u,d,c,p,f=s.options,m=f.snapTolerance,g=i.offset.left,v=g+s.helperProportions.width,y=i.offset.top,b=y+s.helperProportions.height;for(c=s.snapElements.length-1;c>=0;c--)h=s.snapElements[c].left,l=h+s.snapElements[c].width,u=s.snapElements[c].top,d=u+s.snapElements[c].height,h-m>v||g>l+m||u-m>b||y>d+m||!e.contains(s.snapElements[c].item.ownerDocument,s.snapElements[c].item)?(s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1):("inner"!==f.snapMode&&(n=m>=Math.abs(u-b),a=m>=Math.abs(d-y),o=m>=Math.abs(h-v),r=m>=Math.abs(l-g),n&&(i.position.top=s._convertPositionTo("relative",{top:u-s.helperProportions.height,left:0}).top-s.margins.top),a&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top-s.margins.top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left-s.margins.left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left-s.margins.left)),p=n||a||o||r,"outer"!==f.snapMode&&(n=m>=Math.abs(u-y),a=m>=Math.abs(d-b),o=m>=Math.abs(h-g),r=m>=Math.abs(l-v),n&&(i.position.top=s._convertPositionTo("relative",{top:u,left:0}).top-s.margins.top),a&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top-s.margins.top),o&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left-s.margins.left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left-s.margins.left)),!s.snapElements[c].snapping&&(n||a||o||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,t,e.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=n||a||o||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,s){var n,a=s.options,o=e.makeArray(e(a.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});o.length&&(n=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",n+t)}),this.css("zIndex",n+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,s){var n=e(i.helper),a=s.options;n.css("zIndex")&&(a._zIndex=n.css("zIndex")),n.css("zIndex",a.zIndex)},stop:function(t,i,s){var n=s.options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}}),e.ui.draggable,e.widget("ui.droppable",{version:"1.11.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;e.length>t;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var s=e.ui.ddmanager.droppables[this.options.scope];this._splice(s),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return s&&(s.currentItem||s.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=e(this).droppable("instance");return i.options.greedy&&!i.options.disabled&&i.options.scope===s.options.scope&&i.accept.call(i.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(i,{offset:i.element.offset()}),i.options.tolerance,t)?(n=!0,!1):void 0}),n?!1:this.accept.call(this.element[0],s.currentItem||s.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(){function e(e,t,i){return e>=t&&t+i>e}return function(t,i,s,n){if(!i.offset)return!1;var a=(t.positionAbs||t.position.absolute).left,o=(t.positionAbs||t.position.absolute).top,r=a+t.helperProportions.width,h=o+t.helperProportions.height,l=i.offset.left,u=i.offset.top,d=l+i.proportions().width,c=u+i.proportions().height;switch(s){case"fit":return a>=l&&d>=r&&o>=u&&c>=h;case"intersect":return a+t.helperProportions.width/2>l&&d>r-t.helperProportions.width/2&&o+t.helperProportions.height/2>u&&c>h-t.helperProportions.height/2;case"pointer":return e(n.pageY,u,i.proportions().height)&&e(n.pageX,l,i.proportions().width);case"touch":return(o>=u&&c>=o||h>=u&&c>=h||u>o&&h>c)&&(a>=l&&d>=a||r>=l&&d>=r||l>a&&r>d);default:return!1}}}(),e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;a.length>s;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;r.length>n;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}))}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance,i)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance,i),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===n}),a.length&&(s=e(a[0]).droppable("instance"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},e.ui.droppable,e.widget("ui.resizable",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0?!0:(t[s]=1,n=t[s]>0,t[s]=0,n)},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=this.element.children(this.handles[i]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var i,s,n,a=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,s+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===n?this.axis+"-resize":n),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,s,n=this.originalMousePosition,a=this.axis,o=t.pageX-n.left||0,r=t.pageY-n.top||0,h=this._change[a];return this._updatePrevProperties(),h?(i=h.apply(this,[t,o,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,s,n,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,n=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),s>a.minHeight&&(a.minHeight=s),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>n&&(a.maxHeight=n)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,l=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),a&&l&&(e.left=r-t.minWidth),s&&l&&(e.left=r-t.maxWidth),o&&u&&(e.top=h-t.minHeight),n&&u&&(e.top=h-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(s[t],10)||0,i[t]+=parseInt(n[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,s,n,a,o,r,h=e(this).resizable("instance"),l=h.options,u=h.element,d=l.containment,c=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;c&&(h.containerElement=e(c),/document/.test(d)||d===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(c),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){i[e]=h._num(t.css("padding"+s))}),h.containerOffset=t.offset(),h.containerPosition=t.position(),h.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},s=h.containerOffset,n=h.containerSize.height,a=h.containerSize.width,o=h._hasScroll(c,"left")?c.scrollWidth:a,r=h._hasScroll(c)?c.scrollHeight:n,h.parentData={element:c,left:s.left,top:s.top,width:o,height:r}))},resize:function(t){var i,s,n,a,o=e(this).resizable("instance"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,d={top:0,left:0},c=o.containerElement,p=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-d.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?h.top:0),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-h.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-h.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)})},resize:function(t,i){var s=e(this).resizable("instance"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},h=function(t,s){e(t).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),a={},o=s&&s.length?s:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(n[t]||0)+(r[t]||0);i&&i>=0&&(a[t]=i||null)}),t.css(a)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?h(n.alsoResize):e.each(n.alsoResize,function(e,t){h(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,u=h[1]||1,d=Math.round((n.width-a.width)/l)*l,c=Math.round((n.height-a.height)/u)*u,p=a.width+d,f=a.height+c,m=s.maxWidth&&p>s.maxWidth,g=s.maxHeight&&f>s.maxHeight,v=s.minWidth&&s.minWidth>p,y=s.minHeight&&s.minHeight>f;s.grid=h,v&&(p+=l),y&&(f+=u),m&&(p-=l),g&&(f-=u),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=o.top-c):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=o.left-d):((0>=f-u||0>=p-l)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=o.top-c):(f=u-t.height,i.size.height=f,i.position.top=o.top+a.height-f),p-l>0?(i.size.width=p,i.position.left=o.left-d):(p=u-t.height,i.size.width=p,i.position.left=o.left+a.width-p))}}),e.ui.resizable,e.widget("ui.selectable",e.ui.mouse,{version:"1.11.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}))}),e(t.target).parents().addBack().each(function(){var s,n=e.data(this,"selectable-item");return n?(s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,a=this.opos[0],o=this.opos[1],r=t.pageX,h=t.pageY;return a>r&&(i=r,r=a,a=i),o>h&&(i=h,h=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:h-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),l=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?l=!(i.left>r||a>i.right||i.top>h||o>i.bottom):"fit"===n.tolerance&&(l=i.left>a&&r>i.right&&i.top>o&&h>i.bottom),l?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",t,{unselected:s.element})}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",t,{selected:s.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.widget("ui.sortable",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&t+i>e},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||this._isFloating(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),e.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var s=null,n=!1,a=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,a.widgetName+"-item")===a?(s=e(this),!1):void 0}),e.data(t.target,a.widgetName+"-item")===a&&(s=e(t.target)),s?!this.options.handle||i||(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n)?(this.currentItem=s,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],a=this._intersectsWithPointer(s),a&&s.instance===this.currentContainer&&n!==this.currentItem[0]&&this.placeholder[1===a?"next":"prev"]()[0]!==n&&!e.contains(this.placeholder[0],n)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],n):!0)){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,h=r+e.height,l=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||s+l>r&&h>s+l,c="y"===this.options.axis||t+u>a&&o>t+u,p=d&&c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>a&&o>i-this.helperProportions.width/2&&s+this.helperProportions.height/2>r&&h>n-this.helperProportions.height/2},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=t&&i,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:s&&("down"===s&&t||"up"===s&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var s,n,a,o,r=[],h=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(a=e(l[s]),n=a.length-1;n>=0;n--)o=e.data(a[n],this.widgetFullName),o&&o!==this&&!o.options.disabled&&h.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(h.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=h.length-1;s>=0;s--)h[s][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,n,a,o,r,h,l,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(i=c.length-1;i>=0;i--)for(n=e(c[i]),s=n.length-1;s>=0;s--)a=e.data(n[s],this.widgetFullName),a&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(o=d[i][1],r=d[i][0],s=0,l=r.length;l>s;s++)h=e(r[s]),h.data(this.widgetName+"-item",o),u.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)}):"img"===s&&n.attr("src",t.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(e,n){(!i||s.forcePlaceholderSize)&&(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var i,s,n,a,o,r,h,l,u,d,c=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(c&&e.contains(this.containers[i].element[0],c.element[0]))continue;c=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(n=1e4,a=null,u=c.floating||this._isFloating(this.currentItem),o=u?"left":"top",r=u?"width":"height",d=u?"clientX":"clientY",s=this.items.length-1;s>=0;s--)e.contains(this.containers[p].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(h=this.items[s].item.offset()[o],l=!1,t[d]-h>this.items[s][r]/2&&(l=!0),n>Math.abs(t[d]-h)&&(n=Math.abs(t[d]-h),a=this.items[s],this.direction=l?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return;a?this._rearrange(t,a,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(!s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),("document"===n.containment||"window"===n.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],i=e(n.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,h=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:r.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)("auto"===this._storedCSS[s]||"static"===this._storedCSS[s])&&(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(s=0;n.length>s;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.widget("ui.accordion",{version:"1.11.1",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId(),this._destroyIcons(),e=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId(),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),void 0):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)),void 0)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,s=this.headers.length,n=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[s-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,i=this.options,s=i.heightStyle,n=this.element.parent();this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(){var t=e(this),i=t.uniqueId().attr("id"),s=t.next(),n=s.uniqueId().attr("id");t.attr("aria-controls",n),s.attr("aria-labelledby",i)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(i.event),"fill"===s?(t=n.height(),this.element.siblings(":visible").each(function(){var i=e(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n[0]===s[0],o=a&&i.collapsible,r=o?e():n.next(),h=s.next(),l={oldHeader:s,oldPanel:h,newHeader:o?e():n,newPanel:r};t.preventDefault(),a&&!i.collapsible||this._trigger("beforeActivate",t,l)===!1||(i.active=o?!1:this.headers.index(n),this.active=a?e():n,this._toggle(l),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,s=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,t):(s.hide(),i.show(),this._toggleComplete(t)),s.attr({"aria-hidden":"true"}),s.prev().attr("aria-selected","false"),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,i){var s,n,a,o=this,r=0,h=e.length&&(!t.length||e.index()<t.index()),l=this.options.animate||{},u=h&&l.down||l,d=function(){o._toggleComplete(i)};return"number"==typeof u&&(a=u),"string"==typeof u&&(n=u),n=n||u.easing||l.easing,a=a||u.duration||l.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(this.hideProps,{duration:a,easing:n,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(this.showProps,{duration:a,easing:n,complete:d,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?r+=i.now:"content"!==o.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-r),r=0)}}),void 0):t.animate(this.hideProps,a,n,d):e.animate(this.showProps,a,n,d)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}}),e.widget("ui.menu",{version:"1.11.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var i=e(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,n,a,o,r,h=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:h=!1,n=this.previousFilter||"",a=String.fromCharCode(t.keyCode),o=!1,clearTimeout(this.filterTimer),a===n?o=!0:a=n+a,r=RegExp("^"+i(a),"i"),s=this.activeMenu.find(this.options.items).filter(function(){return r.test(e(this).text())}),s=o&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s,s.length||(a=String.fromCharCode(t.keyCode),r=RegExp("^"+i(a),"i"),s=this.activeMenu.find(this.options.items).filter(function(){return r.test(e(this).text())})),s.length?(this.focus(t,s),s.length>1?(this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}h&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var t,i,s=this,n=this.options.icons.submenu,a=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),a.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),i=t.parent(),s=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(s),t.attr("aria-labelledby",i.attr("id"))}),t=a.add(this.element),i=t.find(this.options.items),i.not(".ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")}),i.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),i.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.outerHeight(),0>n?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.find(this.options.items)[t]()),this.focus(i,s)},nextPage:function(t){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-s-n}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+n>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}}),e.widget("ui.autocomplete",{version:"1.11.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=a?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,i=!0,void 0;t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&s.preventDefault(),void 0;if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){return s?(s=!1,e.preventDefault(),void 0):(this._searchTimeout(e),void 0)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(e),this._change(e),void 0)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){var s,n;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),void 0):(n=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:n})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value),s=i.item.attr("aria-label")||n.value,s&&e.trim(s).length&&(this.liveRegion.children().hide(),e("<div>").text(s).appendTo(this.liveRegion)),void 0)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!i&&!s)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").text(i.label).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[e](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments),this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))}}),e.ui.autocomplete;var c,p="ui-button ui-widget ui-state-default ui-corner-all",f="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",m=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},g=function(t){var i=t.name,s=t.form,n=e([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?e(s).find("[name='"+i+"'][type=radio]"):e("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{version:"1.11.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,m),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,s="checkbox"===this.type||"radio"===this.type,n=s?"":"ui-state-active";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(p).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){i.disabled||this===c&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){i.disabled||e(this).removeClass(n)}).bind("click"+this.eventNamespace,function(e){i.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),s&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return i.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(i.disabled)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var s=t.element[0];g(s).not(s).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return i.disabled?!1:(e(this).addClass("ui-state-active"),c=this,t.document.one("mouseup",function(){c=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return i.disabled?!1:(e(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(t){return i.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(p+" ui-state-active "+f).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")),void 0):(this._resetButton(),void 0)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?g(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var t=this.buttonElement.removeClass(f),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):a.push("ui-button-text-only"),t.addClass(a.join(" "))}}),e.widget("ui.buttonset",{version:"1.11.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction"),i=this.element.find(this.options.items),s=i.filter(":ui-button");i.not(":ui-button").button(),s.button("refresh"),this.buttons=i.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),e.ui.button,e.extend(e.ui,{datepicker:{version:"1.11.1"}});var v;e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,n,a;s=t.nodeName.toLowerCase(),n="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),n),a.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,a):n&&this._inlineDatepicker(t,a)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:n,title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,n,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,n=0;e.length>n;n++)e[n].length>i&&(i=e[n].length,s=n);return s},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,n,a){var o,h,l,u,d,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),r(c.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var i,s=e(t),n=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,s){var n,a,o,h,l=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),r(l.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in n&&(n.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,a),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,n,a=e.datepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),n[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0]),i=e.datepicker._get(a,"onSelect"),i?(s=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,n=e.datepicker._getInst(t.target);return e.datepicker._get(n,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,a,o,h,l,u;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),a=n?n.apply(t,[t,i]):{},a!==!1&&(r(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),h={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),h=e.datepicker._checkOffset(i,h,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,v=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,s=this._getNumberOfMonths(t),n=s[1],a=17,r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),n=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,n,a,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var n=e(t),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(t){var i,s=e(t),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var n=e(t),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(t,i,s,n){var a,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,n=e(t),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,n,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t)),e(a).each(function(){e(this).val(n)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,s){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,a,o,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var i=t.length>n+1&&t.charAt(n+1)===e;return i&&n++,i},x=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n="y"===e?s:1,a=RegExp("^\\d{"+n+","+s+"}"),o=i.substring(h).match(a);if(!o)throw"Missing number at position "+h;return h+=o[0].length,parseInt(o[0],10)},w=function(t,s,n){var a=-1,o=e.map(_(t)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var s=t[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(a=t[0],h+=s.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+h},k=function(){if(i.charAt(h)!==t.charAt(n))throw"Unexpected literal at position "+h;h++};for(n=0;t.length>n;n++)if(b)"'"!==t.charAt(n)||_("'")?k():b=!1;else switch(t.charAt(n)){case"d":v=x("d");break;case"D":w("D",d,c);break;case"o":y=x("o");break;case"m":g=x("m");break;case"M":g=w("M",p,f);break;case"y":m=x("y");break;case"@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((x("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":_("'")?k():b=!0;break;default:k()}if(i.length>h&&(o=i.substr(h),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(a=this._getDaysInMonth(m,g-1),a>=v)break;g++,v-=a}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},l=function(e,t,i){var s=""+t;if(h(e))for(;i>s.length;)s="0"+s;return s},u=function(e,t,i,s){return h(e)?s[t]:i[t]},d="",c=!1;if(t)for(s=0;e.length>s;s++)if(c)"'"!==e.charAt(s)||h("'")?d+=e.charAt(s):c=!1;else switch(e.charAt(s)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),n,a);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),o,r);break;case"y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,n=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(i,s,o)||n}catch(r){s=t?"":s}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=s?a.getDate():0,e.currentMonth=s?a.getMonth():0,e.currentYear=s?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,s){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=n.getFullYear(),o=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o));break;case"y":case"Y":a+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o))}l=h.exec(i)}return new Date(a,o,r)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,n,a,o,r,h,l,u,d,c,p,f,m,g,v,y,b,_,x,w,k,T,D,S,N,M,C,P,A,I,z,H,E,F,W,O,L,j=new Date,R=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),Y=this._get(e,"isRTL"),J=this._get(e,"showButtonPanel"),B=this._get(e,"hideIfNoPrevNext"),K=this._get(e,"navigationAsDateFormat"),U=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),q=this._get(e,"stepMonths"),G=1!==U[0]||1!==U[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,et=e.drawYear;if(0>Z&&(Z+=12,et--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),t=Q&&Q>t?Q:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-q,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":B?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z+q,1)),this._getFormatConfig(e)):n,a=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":B?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?X:R,o=K?this.formatDate(o,r,this._getFormatConfig(e)):o,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=J?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",w=0;U[0]>w;w++){for(k="",this.maxRows=4,T=0;U[1]>T;T++){if(D=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",N="",G){if(N+="<div class='ui-datepicker-group",U[1]>1)switch(T){case 0:N+=" ui-datepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case U[1]-1:N+=" ui-datepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:N+=" ui-datepicker-group-middle",S=""}N+="'>"}for(N+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?a:s:"")+(/all|right/.test(S)&&0===w?Y?s:a:"")+this._generateMonthYearHeader(e,Z,et,Q,$,w>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",M=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)C=(x+u)%7,M+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+c[C]+"'>"+p[C]+"</span></th>";for(N+=M+"</tr></thead><tbody>",P=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,P)),A=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((A+P)/7),z=G?this.maxRows>I?this.maxRows:I:I,this.maxRows=z,H=this._daylightSavingAdjust(new Date(et,Z,1-A)),E=0;z>E;E++){for(N+="<tr>",F=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(H)+"</td>":"",x=0;7>x;x++)W=g?g.apply(e.input?e.input[0]:null,[H]):[!0,""],O=H.getMonth()!==Z,L=O&&!y||!W[0]||Q&&Q>H||$&&H>$,F+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(O?" ui-datepicker-other-month":"")+(H.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===H.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(O&&!v?"":" "+W[1]+(H.getTime()===X.getTime()?" "+this._currentClass:"")+(H.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(O&&!v||!W[2]?"":" title='"+W[2].replace(/'/g,"&#39;")+"'")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+H.getMonth()+"' data-year='"+H.getFullYear()+"'")+">"+(O&&!v?"&#xa0;":L?"<span class='ui-state-default'>"+H.getDate()+"</span>":"<a class='ui-state-default"+(H.getTime()===R.getTime()?" ui-state-highlight":"")+(H.getTime()===X.getTime()?" ui-state-active":"")+(O?" ui-priority-secondary":"")+"' href='#'>"+H.getDate()+"</a>")+"</td>",H.setDate(H.getDate()+1),H=this._daylightSavingAdjust(H);N+=F+"</tr>"}Z++,Z>11&&(Z=0,et++),N+="</tbody></table>"+(G?"</div>"+(U[0]>0&&T===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=N}_+=k}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,s,n,a,o,r){var h,l,u,d,c,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(a||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||n.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+r[u]+"</option>");_+="</select>"}if(y||(b+=_+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!a&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=i&&i>t?i:t;return s&&n>s?s:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,s+(0>t?t:n[0]*n[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,s,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.1",e.datepicker,e.widget("ui.dialog",{version:"1.11.1",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,s=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(n){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var s=!1,n=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),a=Math.max.apply(null,n);return a>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",a+1),s=!0),s&&!i&&this._trigger("focus",t),s},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){n.focus()}),t.preventDefault()):(this._delay(function(){s.focus()}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(e.each(i,function(i,s){var n,a;s=e.isFunction(s)?{click:s,text:i}:s,s=e.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(t.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,t(n))},drag:function(e,s){i._trigger("drag",e,t(s))},stop:function(n,a){var o=a.offset.left-i.document.scrollLeft(),r=a.offset.top-i.document.scrollTop();s.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" "+"top"+(r>=0?"+":"")+r,of:i.window},e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,t(n))},resize:function(e,s){i._trigger("resize",e,t(s))},stop:function(n,a){var o=i.uiDialog.offset(),r=o.left-i.document.scrollLeft(),h=o.top-i.document.scrollTop();s.height=i.uiDialog.height(),s.width=i.uiDialog.width(),s.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" "+"top"+(h>=0?"+":"")+h,of:i.window},e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,t(a))}}).css("position",a)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,n={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(s=!0),e in i.resizableRelatedOptions&&(n[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(e,t){var i,s,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=n.is(":data(ui-draggable)"),i&&!t&&n.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=n.is(":data(ui-resizable)"),s&&!t&&n.resizable("destroy"),s&&"string"==typeof t&&n.resizable("option","handles",t),s||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),e.widget("ui.slider",e.ui.mouse,{version:"1.11.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;i>t;t++)o.push(a);this.handles=n.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,s,n,a,o,r,h,l,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-u.values(t));(n>i||n===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(n=i,a=e(this),o=t)}),r=this._start(t,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),h=a.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-h.left-a.width()/2,top:t.pageY-h.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,n,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),0>s&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>s||1===t&&s>i)&&(i=s),i!==this.values(t)&&(n=this.values(),n[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),s=this.values(t?0:1),a!==!1&&this.values(t,i))):i!==this.value()&&(a=this._trigger("slide",e,{handle:this.handles[t],value:i}),a!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var s,n,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length>a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,i){var s,n=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),"disabled"===t&&this.element.toggleClass("ui-state-disabled",!!i),this._super(t,i),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;n>s;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;i.length>s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(this._valueMin()>=e)return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,s,n,a,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[l?"animate":"css"](u,r.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===s&&h.range.stop(1,1)[l?"animate":"css"]({left:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&h.range.stop(1,1)[l?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&h.range[l?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)/(a-n)):0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[l?"animate":"css"](u,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(t){var i,s,n,a,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),i=this._start(t,o),i===!1))return}switch(a=this.options.step,s=n=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-a)}this._slide(t,o,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}}),e.widget("ui.spinner",{version:"1.11.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,s){var n=i.attr(s);void 0!==n&&n.length&&(t[s]=n)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e),void 0)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:(this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,s=e.ui.keyCode;switch(t.keyCode){case s.UP:return this._repeat(null,1,t),!0;case s.DOWN:return this._repeat(null,-1,t),!0;case s.PAGE_UP:return this._repeat(null,i.page,t),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=""+e,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,s=this.options;return t=null!==s.min?s.min:0,i=e-t,i=Math.round(i/s.step)*s.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==s.max&&e>s.max?s.max:null!==s.min&&s.min>e?s.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,this.element.val(this._format(i)),void 0}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:h(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null===e?!1:e===this._adjustValue(e)},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:h(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:h(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:h(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:h(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?(h(this._value).call(this,e),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.widget("ui.tooltip",{version:"1.11.1",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var s=(t.attr("aria-describedby")||"").split(/\s+/);s.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(s.join(" ")))},_removeDescribedBy:function(t){var i=t.data("ui-tooltip-id"),s=(t.attr("aria-describedby")||"").split(/\s+/),n=e.inArray(i,s);-1!==n&&s.splice(n,1),t.removeData("ui-tooltip-id"),s=e.trim(s.join(" ")),s?t.attr("aria-describedby",s):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable(),this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,i){var s=this;return"disabled"===t?(this[i?"_disable":"_enable"](),this.options[t]=i,void 0):(this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){s._updateContent(t)}),void 0)},_disable:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur");n.target=n.currentTarget=s[0],t.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,s=e(t?t.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&s.parents().each(function(){var t,s=e(this);s.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,t))},_updateContent:function(e,t){var i,s=this.options.content,n=this,a=t?t.type:null;return"string"==typeof s?this._open(t,e,s):(i=s.call(e[0],function(i){e.data("ui-tooltip-open")&&n._delay(function(){t&&(t.type=a),this._open(t,e,i)})}),i&&this._open(t,e,i),void 0)},_open:function(t,i,s){function n(e){l.of=e,a.is(":hidden")||a.position(l)}var a,o,r,h,l=e.extend({},this.options.position);if(s){if(a=this._find(i),a.length)return a.find(".ui-tooltip-content").html(s),void 0;i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title")),a=this._tooltip(i),this._addDescribedBy(i,a.attr("id")),a.find(".ui-tooltip-content").html(s),this.liveRegion.children().hide(),s.clone?(h=s.clone(),h.removeAttr("id").find("[id]").removeAttr("id")):h=s,e("<div>").html(h).appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:n}),n(t)):a.position(e.extend({of:i},this.options.position)),this.hiding=!1,this.closing=!1,a.hide(),this._show(a,this.options.show),this.options.show&&this.options.show.delay&&(r=this.delayedShow=setInterval(function(){a.is(":visible")&&(n(l.of),clearInterval(r))},e.fx.interval)),this._trigger("open",t,{tooltip:a}),o={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var s=e.Event(t);s.currentTarget=i[0],this.close(s,!0)}}},i[0]!==this.element[0]&&(o.remove=function(){this._removeTooltip(a)}),t&&"mouseover"!==t.type||(o.mouseleave="close"),t&&"focusin"!==t.type||(o.focusout="close"),this._on(!0,i,o)}},close:function(t){var i=this,s=e(t?t.currentTarget:this.element),n=this._find(s);this.closing||(clearInterval(this.delayedShow),s.data("ui-tooltip-title")&&!s.attr("title")&&s.attr("title",s.data("ui-tooltip-title")),this._removeDescribedBy(s),this.hiding=!0,n.stop(!0),this._hide(n,this.options.hide,function(){i._removeTooltip(e(this)),this.hiding=!1,this.closing=!1}),s.removeData("ui-tooltip-open"),this._off(s,"mouseleave focusout keyup"),s[0]!==this.element[0]&&this._off(s,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,s){e(s.element).attr("title",s.title),delete i.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:n}),this.hiding||(this.closing=!1))},_tooltip:function(t){var i=e("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),s=i.uniqueId().attr("id");return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[s]=t,i},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur");n.target=n.currentTarget=s[0],t.close(n,!0),e("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title")||s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}})});!function(e,n){function t(e,n){return typeof e===n}function o(){var e,n,o,i,s,r,d;for(var l in f){if(e=[],n=f[l],n.name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(o=0;o<n.options.aliases.length;o++)e.push(n.options.aliases[o].toLowerCase());for(i=t(n.fn,"function")?n.fn():n.fn,s=0;s<e.length;s++)r=e[s],d=r.split("."),1===d.length?Modernizr[d[0]]=i:(!Modernizr[d[0]]||Modernizr[d[0]]instanceof Boolean||(Modernizr[d[0]]=new Boolean(Modernizr[d[0]])),Modernizr[d[0]][d[1]]=i),a.push((i?"":"no-")+d.join("-"))}}function i(e){var n=l.className,t=Modernizr._config.classPrefix||"";if(Modernizr._config.enableJSClass){var o=new RegExp("(^|\\s)"+t+"no-js(\\s|$)");n=n.replace(o,"$1"+t+"js$2")}Modernizr._config.enableClasses&&(n+=" "+t+e.join(" "+t),l.className=n)}function s(){var e=n.body;return e||(e=c("body"),e.fake=!0),e}function r(e,n,t,o){var i,r,a,f,d="modernizr",u=c("div"),p=s();if(parseInt(t,10))for(;t--;)a=c("div"),a.id=o?o[t]:d+(t+1),u.appendChild(a);return i=["&#173;",'<style id="s',d,'">',e,"</style>"].join(""),u.id=d,(p.fake?p:u).innerHTML+=i,p.appendChild(u),p.fake&&(p.style.background="",p.style.overflow="hidden",f=l.style.overflow,l.style.overflow="hidden",l.appendChild(p)),r=n(u,e),p.fake?(p.parentNode.removeChild(p),l.style.overflow=f,l.offsetHeight):u.parentNode.removeChild(u),!!r}var a=[],f=[],d={_version:"3.0.0-alpha.3",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){f.push({name:e,fn:n,options:t})},addAsyncTest:function(e){f.push({name:null,fn:e})}},Modernizr=function(){};Modernizr.prototype=d,Modernizr=new Modernizr,Modernizr.addTest("cookies",function(){try{n.cookie="cookietest=1";var e=-1!=n.cookie.indexOf("cookietest=");return n.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch(t){return!1}}),Modernizr.addTest("filereader",!!(e.File&&e.FileList&&e.FileReader));var l=n.documentElement,u=d._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):[];d._prefixes=u;var c=function(){return"function"!=typeof n.createElement?n.createElement(arguments[0]):n.createElement.apply(n,arguments)};Modernizr.addTest("draganddrop",function(){var e=c("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e});var p=function(e){function t(n,t){var i;return n?(t&&"string"!=typeof t||(t=c(t||"div")),n="on"+n,i=n in t,!i&&o&&(t.setAttribute||(t=c("div")),t.setAttribute(n,""),i="function"==typeof t[n],t[n]!==e&&(t[n]=e),t.removeAttribute(n)),i):!1}var o=!("onblur"in n.documentElement);return t}(),v=(d.hasEvent=p,d.testStyles=r);Modernizr.addTest("touchevents",function(){var t;if("ontouchstart"in e||e.DocumentTouch&&n instanceof DocumentTouch)t=!0;else{var o=["@media (",u.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");v(o,function(e){t=9===e.offsetTop})}return t}),o(),i(a),delete d.addTest,delete d.addAsyncTest;for(var h=0;h<Modernizr._q.length;h++)Modernizr._q[h]();e.Modernizr=Modernizr}(window,document);(function(){if("-ms-user-select"in document.documentElement.style&&navigator.userAgent.match(/IEMobile\/10\.0/)){var msViewportStyle=document.createElement("style");msViewportStyle.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}"));document.getElementsByTagName("head")[0].appendChild(msViewportStyle);}})();var Tygh={embedded:typeof(TYGH_LOADER)!=='undefined',doc:typeof(TYGH_LOADER)!=='undefined'?TYGH_LOADER.doc:document,body:typeof(TYGH_LOADER)!=='undefined'?TYGH_LOADER.body:null,otherjQ:typeof(TYGH_LOADER)!=='undefined'&&TYGH_LOADER.otherjQ,facebook:typeof(TYGH_FACEBOOK)!=='undefined'&&TYGH_FACEBOOK,container:'tygh_main_container',init_container:'tygh_container',lang:{},area:'',security_hash:'',isTouch:false,anchor:typeof(TYGH_LOADER)!=='undefined'?'':window.location.hash,tr:function(name,val){if(typeof(name)=='string'&&typeof(val)=='undefined'){return Tygh.lang[name];}else if(typeof(val)!='undefined'){Tygh.lang[name]=val;return true;}else if(typeof(name)=='object'){Tygh.$.extend(Tygh.lang,name);return true;}
return false;}};(function(_,$){_.$=$;(function($){var ua=navigator.userAgent.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];var matched={browser:match[1]||"",version:match[2]||"0"};var browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version;}
if(browser.chrome){browser.webkit=true;}else if(browser.webkit){browser.safari=true;}
$.browser=browser;})($);$.extend({lastClickedElement:null,getWindowSizes:function()
{var iebody=(document.compatMode&&document.compatMode!='BackCompat')?document.documentElement:document.body;return{'offset_x':iebody.scrollLeft?iebody.scrollLeft:(self.pageXOffset?self.pageXOffset:0),'offset_y':iebody.scrollTop?iebody.scrollTop:(self.pageYOffset?self.pageYOffset:0),'view_height':self.innerHeight?self.innerHeight:iebody.clientHeight,'view_width':self.innerWidth?self.innerWidth:iebody.clientWidth,'height':iebody.scrollHeight?iebody.scrollHeight:window.height,'width':iebody.scrollWidth?iebody.scrollWidth:window.width};},disable_elms:function(ids,flag)
{$('#'+ids.join(',#')).prop('disabled',flag);},ua:{version:(navigator.userAgent.toLowerCase().indexOf("chrome")>=0)?(navigator.userAgent.match(/.+(?:chrome)[\/: ]([\d.]+)/i)||[])[1]:((navigator.userAgent.toLowerCase().indexOf("msie")>=0)?(navigator.userAgent.match(/.*?msie[\/:\ ]([\d.]+)/i)||[])[1]:(navigator.userAgent.match(/.+(?:it|pera|irefox|ersion)[\/: ]([\d.]+)/i)||[])[1]),browser:(navigator.userAgent.toLowerCase().indexOf("chrome")>=0)?'Chrome':($.browser.safari?'Safari':($.browser.opera?'Opera':($.browser.msie?'Internet Explorer':'Firefox'))),os:(navigator.platform.toLowerCase().indexOf('mac')!=-1?'MacOS':(navigator.platform.toLowerCase().indexOf('win')!=-1?'Windows':'Linux')),language:(navigator.language?navigator.language:(navigator.browserLanguage?navigator.browserLanguage:(navigator.userLanguage?navigator.userLanguage:(navigator.systemLanguage?navigator.systemLanguage:''))))},is:{email:function(email)
{return /\S+@\S+.\S+/i.test(email)?true:false;},blank:function(val)
{if(($.isArray(val)&&val.length==0)||$.type(val)==='null'||(""+val).replace(/[\n\r\t]/gi,'')==''){return true;}
return false;},integer:function(val)
{return(/^[0-9]+$/.test(val)&&!$.is.blank(val))?true:false;},color:function(val)
{return(/^\#[0-9a-fA-F]{6}$/.test(val)&&!$.is.blank(val))?true:false;},phone:function(val)
{var regexp=/^[\s()+-]*([0-9][\s()+-]*){6,20}$/;return(regexp.test(val)&&val.length)?true:false;}},cookie:{get:function(name)
{var arg=name+"=";var alen=arg.length;var clen=document.cookie.length;var i=0;while(i<clen){var j=i+alen;if(document.cookie.substring(i,j)==arg){var endstr=document.cookie.indexOf(";",j);if(endstr==-1){endstr=document.cookie.length;}
return unescape(document.cookie.substring(j,endstr));}
i=document.cookie.indexOf(" ",i)+1;if(i==0){break;}}
return null;},set:function(name,value,expires,path,domain,secure)
{document.cookie=name+"="+escape(value)+((expires)?"; expires="+expires.toGMTString():"")+((path)?"; path="+path:"")+((domain)?"; domain="+domain:"")+((secure)?"; secure":"");},remove:function(name,path,domain)
{if($.cookie.get(name)){document.cookie=name+"="+((path)?"; path="+path:"")+((domain)?"; domain="+domain:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT";}}},redirect:function(url,replace)
{replace=replace||false;if($('base').length&&url.indexOf('/')!=0&&url.indexOf('http')!==0){url=$('base').prop('href')+url;}
if(_.embedded){$.ceAjax('request',url,{result_ids:_.container});}else{if(replace){window.location.replace(url);}else{window.location.href=url;}}},dispatchEvent:function(e)
{var jelm=$(e.target);var elm=e.target;var s;e.which=e.which||1;if((e.type=='click'||e.type=='mousedown')&&$.browser.mozilla&&e.which!=1){return true;}
var processed={status:false,to_return:true};$.ceEvent('trigger','dispatch_event_pre',[e,jelm,processed]);if(processed.status){return processed.to_return;}
if(e.type=='click'){if($.getProcessItemsMeta(elm)){if(!$.checkSelectedItems(elm)){return false;}}else if((jelm.hasClass('cm-confirm')||jelm.parents().hasClass('cm-confirm'))&&!jelm.parents().hasClass('cm-skip-confirmation')){var confirm_text=_.tr('text_are_you_sure_to_proceed'),$parent_confirm;if(jelm.hasClass('cm-confirm')&&jelm.data('ca-confirm-text')){confirm_text=jelm.data('ca-confirm-text');}else{$parent_confirm=jelm.parents('[class="cm-confirm"][data-ca-confirm-text]').first();if($parent_confirm.get(0)){confirm_text=$parent_confirm.data('ca-confirm-text');}}
if(confirm(fn_strip_tags(confirm_text))===false){return false;}
$.ceEvent('trigger','ce.form_confirm',[jelm]);}
$.lastClickedElement=jelm;if(jelm.hasClass('cm-disabled')||jelm.parents('.cm-disabled').length){return false;}
if(jelm.hasClass('cm-delete-row')||jelm.parents('.cm-delete-row').length){var holder;if(jelm.is('tr')||jelm.hasClass('cm-row-item')){holder=jelm;}else if(jelm.parents('.cm-row-item').length){holder=jelm.parents('.cm-row-item:first');}else if(jelm.parents('tr').length&&!$('.cm-picker',jelm.parents('tr:first')).length){holder=jelm.parents('tr:first');}else{return false;}
$('.cm-combination[id^=off_]',holder).click();if(holder.parent('tbody.cm-row-item').length){holder=holder.parent('tbody.cm-row-item');}
if(jelm.hasClass('cm-ajax')||jelm.parents('.cm-ajax').length){$.ceAjax('clearCache');holder.remove();}else{if(holder.hasClass('cm-opacity')){$(':input',holder).each(function(){$(this).prop('name',$(this).data('caInputName'));});holder.removeClass('cm-delete-row cm-opacity');if($.browser.msie||$.browser.opera){$('*',holder).removeClass('cm-opacity');}}else{$(':input[name]',holder).each(function(){var $this=$(this),name=$this.prop('name');$this.data('caInputName',name).attr('data-ca-input-name',name).prop('name','');});holder.addClass('cm-delete-row cm-opacity');if(($.browser.msie&&$.browser.version<9)||$.browser.opera){$('*',holder).addClass('cm-opacity');}}}}
if(jelm.hasClass('cm-save-and-close')){jelm.parents('form:first').append('<input type="hidden" name="return_to_list" value="Y" />');}
if(jelm.hasClass('cm-new-window')&&jelm.prop('href')||jelm.closest('.cm-new-window')&&jelm.closest('.cm-new-window').prop('href')){var _e=jelm.hasClass('cm-new-window')?jelm.prop('href'):jelm.closest('.cm-new-window').prop('href');window.open(_e);return false;}
if(jelm.hasClass('cm-select-text')){if(jelm.data('caSelectId')){var c_elm=jelm.data('caSelectId');if(c_elm&&$('#'+c_elm).length){$('#'+c_elm).select();}}else{jelm.get(0).select();}}
if(jelm.hasClass('cm-external-click')||jelm.parents('.cm-external-click').length){var _e=jelm.hasClass('cm-external-click')?jelm:jelm.parents('.cm-external-click:first');var c_elm=_e.data('caExternalClickId');if(c_elm&&$('#'+c_elm).length){$('#'+c_elm).click();}
var opt={need_scroll:true,jelm:_e};$.ceEvent('trigger','ce.needScroll',[opt]);if(_e.data('caScroll')&&opt.need_scroll){$.scrollToElm(_e.data('caScroll'));}}
if(jelm.closest('.cm-dialog-opener').length){var _e=jelm.closest('.cm-dialog-opener');var params=$.ceDialog('get_params',_e);$('#'+_e.data('caTargetId')).ceDialog('open',params);return false;}
if(jelm.data('toggle')=="modal"&&$.ceDialog('get_last').length){var href=jelm.prop('href');var target=$(jelm.data('target')||(href&&href.replace(/.*(?=#[^\s]+$)/,'')));if(target.length){var minZ=$.ceDialog('get_last').zIndex();target.zIndex(minZ+2);target.on('shown',function(){$(this).data('modal').$backdrop.zIndex(minZ+1);});}}
if(jelm.hasClass('cm-cancel')){var form=jelm.parents('form');if(form.length){form.get(0).reset();if(_.fileuploader){_.fileuploader.clean_form();}
form.find('.error-message').remove();form.find('input[checked]').change();$.ceEvent('trigger','ce.cm_cancel.clean_form',[form,jelm]);}}
if(jelm.hasClass('cm-scroll')&&jelm.data('caScroll')){$.scrollToElm(jelm.data('caScroll'));}
if(_.changes_warning=='Y'&&jelm.parents('.cm-confirm-changes').length){if(jelm.parents('form').length&&jelm.parents('form:first').formIsChanged()){if(confirm(fn_strip_tags(_.tr('text_changes_not_saved')))===false){return false;}}}
if(jelm.hasClass('cm-check-items')||jelm.parents('.cm-check-items').length){var form=elm.form;if(!form){form=jelm.parents('form:first');}
var item_class='.cm-item'+(jelm.data('caTarget')?'-'+jelm.data('caTarget'):'');if(jelm.data('caStatus')){$('input'+item_class+'[type=checkbox]:not(:disabled)',form).prop('checked',false);item_class+='.cm-item-status-'+jelm.data('caStatus');}
var inputs=$('input'+item_class+'[type=checkbox]:not(:disabled)',form);if(inputs.length){var flag=true;if(jelm.is('[type=checkbox]')){flag=jelm.prop('checked');}
if(jelm.hasClass('cm-on')){flag=true;}else if(jelm.hasClass('cm-off')){flag=false;}
inputs.prop('checked',flag);}}else if(jelm.hasClass('cm-promo-popup')||jelm.parents('.cm-promo-popup').length){return false;}else if(jelm.prop('type')=='submit'||jelm.closest('button[type=submit]').length){var _jelm=jelm.is('input,button')?jelm:jelm.closest('button[type=submit]');$(_jelm.prop('form')).ceFormValidator('setClicked',_jelm);if(_jelm.length==1&&_jelm.prop('form')==null){return $.submitForm(_jelm);}
return!_jelm.hasClass('cm-no-submit');}else if(jelm.is('a')&&jelm.hasClass('cm-ajax')&&jelm.prop('href')||(jelm.parents('a.cm-ajax').length&&jelm.parents('a.cm-ajax:first').prop('href'))){return $.ajaxLink(e);}else if(jelm.parents('.cm-reset-link').length||jelm.hasClass('cm-reset-link')){var frm=jelm.parents('form:first');$('[type=checkbox]',frm).prop('checked',false).change();$('input[type=text], input[type=password], input[type=file]',frm).val('');$('select',frm).each(function(){$(this).val($('option:first',this).val()).change();});var radio_names=[];$('input[type=radio]',frm).each(function(){if($.inArray(this.name,radio_names)==-1){$(this).prop('checked',true).change();radio_names.push(this.name);}else{$(this).prop('checked',false);}});return true;}else if(jelm.hasClass('cm-submit')||jelm.parents('.cm-submit').length){if(!jelm.is('select,input')){return $.submitForm(jelm);}}else if(jelm.hasClass('cm-popup-switch')||jelm.parents('.cm-popup-switch').length){jelm.parents('.cm-popup-box:first').hide();return false;}else if($.matchClass(elm,/cm-combinations([-\w]+)?/gi)){var s=elm.className.match(/cm-combinations([-\w]+)?/gi)||jelm.parent().get(0).className.match(/cm-combinations(-[\w]+)?/gi);var p_elm=jelm.prop('id')?jelm:jelm.parent();var class_group=s[0].replace(/cm-combinations/,'');var id_group=p_elm.prop('id').replace(/on_|off_|sw_/,'');$('#on_'+id_group).toggle();$('#off_'+id_group).toggle();if(p_elm.prop('id').indexOf('sw_')==0){$('[data-ca-switch-id="'+id_group+'"]').toggle();}else if(p_elm.prop('id').indexOf('on_')==0){$('.cm-combination'+class_group+':visible[id^="on_"]').click();}else{$('.cm-combination'+class_group+':visible[id^="off_"]').click();}
return true;}else if($.matchClass(elm,/cm-combination(-[\w]+)?/gi)||jelm.parents('.cm-combination').length){var p_elm=(jelm.parents('.cm-combination').length)?jelm.parents('.cm-combination:first'):(jelm.prop('id')?jelm:jelm.parent());var id,prefix;if(p_elm.prop('id')){prefix=p_elm.prop('id').match(/^(on_|off_|sw_)/)[0]||'';id=p_elm.prop('id').replace(/^(on_|off_|sw_)/,'');}
var container=$('#'+id);var flag=(prefix=='on_')?false:(prefix=='off_'?true:(container.is(':visible')?true:false));if(p_elm.hasClass('cm-uncheck')){$('#'+id+' [type=checkbox]').prop('disabled',flag);}
container.removeClass('hidden');container.toggleBy(flag);$.ceEvent('trigger','ce.switch_'+id,[flag]);if(container.is('.cm-smart-position:visible')){container.position({my:'right top',at:'right top',of:p_elm});}
var s_elm=jelm.hasClass('cm-save-state')?jelm:(p_elm.hasClass('cm-save-state')?p_elm:false);if(s_elm){var _s=s_elm.hasClass('cm-ss-reverse')?':hidden':':visible';if(container.is(_s)){$.cookie.set(id,1);}else{$.cookie.remove(id);}}
if(prefix=='sw_'){if(p_elm.hasClass('open')){p_elm.removeClass('open');}else if(!p_elm.hasClass('open')){p_elm.addClass('open');}}
$('#on_'+id).removeClass('hidden').toggleBy(!flag);$('#off_'+id).removeClass('hidden').toggleBy(flag);$.ceDialog('fit_elements',{'container':container,'jelm':jelm});if(!jelm.is('[type=checkbox]')){return false;}}else if((jelm.is('a.cm-increase, a.cm-decrease')||jelm.parents('a.cm-increase').length||jelm.parents('a.cm-decrease').length)&&jelm.parents('.cm-value-changer').length){var inp=$('input',jelm.closest('.cm-value-changer'));var step=1;var min_qty=0;if(inp.attr('data-ca-step')){step=parseInt(inp.attr('data-ca-step'));}
if(inp.data('caMinQty')){min_qty=parseInt(inp.data('caMinQty'));}
var new_val=parseInt(inp.val())+((jelm.is('a.cm-increase')||jelm.parents('a.cm-increase').length)?step:-step);inp.val(new_val>min_qty?new_val:min_qty);inp.keypress();var trigger_name='ce.valuechangerincrease';var trigger_params=[inp,step,min_qty,new_val];if(jelm.is('a.cm-decrease')){trigger_name='ce.valuechangerdecrease';}
$.ceEvent('trigger',trigger_name,trigger_params);return true;}else if(jelm.hasClass('cm-external-focus')||jelm.parents('.cm-external-focus').length){var f_elm=(jelm.data('caExternalFocusId'))?jelm.data('caExternalFocusId'):jelm.parents('.cm-external-focus:first').data('caExternalFocusId');if(f_elm&&$('#'+f_elm).length){$('#'+f_elm).focus();}}else if(jelm.hasClass('cm-previewer')||jelm.parent().hasClass('cm-previewer')){var lnk=jelm.hasClass('cm-previewer')?jelm:jelm.parent();lnk.cePreviewer('display');return false;}else if(jelm.hasClass('cm-update-for-all-icon')){jelm.toggleClass('visible');jelm.prop('title',jelm.data('caTitle'+(jelm.hasClass('visible')?'Active':'Disabled')));$('#hidden_update_all_vendors_'+jelm.data('caDisableId')).prop('disabled',!jelm.hasClass('visible'));if(jelm.data('caHideId')){var parent_elm=$('#container_'+jelm.data('caHideId'));parent_elm.find(':input:visible').prop('disabled',!jelm.hasClass('visible'));parent_elm.find(':input[type=hidden]').prop('disabled',!jelm.hasClass('visible'));parent_elm.find('textarea.cm-wysiwyg').ceEditor('disable',!jelm.hasClass('visible'));}
var state_select_trigger=$('.cm-state').parent().find('.cm-update-for-all-icon');if($('#'+jelm.data('caHideId')).hasClass('cm-country')&&jelm.hasClass('visible')!=state_select_trigger.hasClass('visible')){state_select_trigger.click();}
var country_select_trigger=$('.cm-country').parent().find('.cm-update-for-all-icon');if($('#'+jelm.data('caHideId')).hasClass('cm-state')&&jelm.hasClass('visible')!=country_select_trigger.hasClass('visible')){country_select_trigger.click();}}else if(jelm.hasClass('cm-toggle-checkbox')){$('.cm-toggle-element').prop('disabled',!$('.cm-toggle-checkbox').prop('checked'));}else if(jelm.hasClass('cm-back-link')||jelm.parents('.cm-back-link').length){parent.history.back();}else if(jelm.closest('.cm-post').length){var _elm=jelm.closest('.cm-post');if(!_elm.hasClass('cm-ajax')){var href=_elm.prop('href');var target=_elm.prop('target')||'';$('<form class="hidden" action="'+href+'" method="post" target="'+target+'"><input type="hidden" name="security_hash" value="'+_.security_hash+'"></form>').appendTo(_.body).submit();return false;}}
if(jelm.closest('.cm-dialog-closer').length){$.ceDialog('get_last').ceDialog('close');}
if(jelm.hasClass('cm-instant-upload')){var href=jelm.data('caHref');var result_ids=jelm.data('caTargetId')||'';var placeholder=jelm.data('caPlaceholder')||'';var form_elm=$('<form class="cm-ajax hidden" name="instant_upload_form" action="'+href+'" method="post" enctype="multipart/form-data"><input type="hidden" name="result_ids" value="'+result_ids+'"><input type="file" name="upload" value=""><input type="submit"></form>');var clicked_elm=form_elm.find('input[type=submit]');var file_elm=form_elm.find('input[type=file]');file_elm.on('change',function(){clicked_elm.click();});$.ceEvent('one','ce.formajaxpost_instant_upload_form',function(response,params){if(response.placeholder){var seconds=new Date().getTime()/ 1000;$('#'+placeholder).prop('src',response.placeholder+'?'+seconds);}
params.form.remove();});form_elm.ceFormValidator();$(_.body).append(form_elm);file_elm.click();}
if(jelm.is('a')||jelm.parents('a').length){var _lnk=jelm.is('a')?jelm:jelm.parents('a:first');$.showPickerByAnchor(_lnk.prop('href'));if($.browser.msie&&_lnk.prop('href')&&_lnk.prop('href').indexOf('window.open')!=-1){eval(_lnk.prop('href'));return false;}
if($('base').length&&_lnk.attr('href')&&_lnk.attr('href').indexOf('#')==0){var anchor_name=_lnk.attr('href').substr(1,_lnk.attr('href').length);url=window.location.href;if(url.indexOf('#')!=-1){url=url.substr(0,url.indexOf('#'));}
url+='#'+anchor_name;$.redirect(url);return false;}}
if(_.embedded&&(jelm.is('a')||jelm.closest('a').length)){var _elm=jelm.is('a')?jelm:jelm.closest('a');if(_elm.prop('href')&&_elm.prop('target')!='_blank'&&_elm.prop('href').search(/javascript:/i)==-1){if(!_elm.hasClass('cm-no-ajax')&&!$.externalLink(fn_url(_elm.prop('href')))){if(!_elm.data('caScroll')){_elm.data('caScroll',_.container);}
return $.ajaxLink(e,_.container);}else{_elm.prop('target','_parent');}}}}else if(e.type=='keydown'){var char_code=(e.which)?e.which:e.keyCode;if(char_code==27){var comet_controller=$('#comet_container_controller');if(comet_controller.length&&comet_controller.ceProgress('getValue')!=0&&comet_controller.ceProgress('getValue')!=100){return false;}
$.popupStack.last_close();var _notification_container=$('.cm-notification-content-extended:visible');if(_notification_container.length){$.ceNotification('close',_notification_container,false);}}
if(_.area=='A'){if(e.ctrlKey&&char_code==222){if(result=prompt('Product ID','')){$.redirect(fn_url('products.update?product_id='+result));}}}
return true;}else if(e.type=='mousedown'){if(jelm.hasClass('cm-disabled')||jelm.parents('.cm-disabled').length){return false;}
if(jelm.hasClass('cm-select-option')){$('.cm-popup-box').removeClass('open');var upd_elm=jelm.parents('.cm-popup-box:first');$('a:first',upd_elm).html(jelm.text()+' <span class="caret"></span>')
$('li a',upd_elm).removeClass('active').addClass('cm-select-option');$('li',upd_elm).removeClass('disabled');jelm.removeClass('cm-select-option').addClass('active');jelm.parents('li:first').addClass('disabled');$('input',upd_elm).val(jelm.data('caListItem'));}
var popups=$('.cm-popup-box:visible');if(popups.length){var zindex=jelm.zIndex();var foundz=0;if(zindex==0){jelm.parents().each(function(){var self=$(this);if(foundz==0&&self.zIndex()!=0){foundz=self.zIndex();}});zindex=foundz;}
popups.each(function(){var self=$(this);if(self.zIndex()>zindex&&!self.has(jelm).length){if(self.prop('id')){var sw=$('#sw_'+self.prop('id'));if(sw.length){if(!jelm.closest(sw).length){sw.click();}
return true;}}
self.hide();}});}
return true;}else if(e.type=='keyup'){var elm_val=jelm.val();var negative_expr=new RegExp('^-.*','i');if(jelm.hasClass('cm-value-integer')){var new_val=elm_val.replace(/[^\d]+/,'');if(elm_val!=new_val){jelm.val(new_val);}}else if(jelm.hasClass('cm-value-decimal')){var is_negative=negative_expr.test(elm_val);var new_val=elm_val.replace(/[^.0-9]+/g,'');new_val=new_val.replace(/([0-9]+[.]?[0-9]*).*$/g,'$1');if(elm_val!=new_val){jelm.val(new_val);}}
if(jelm.hasClass('cm-ajax-content-input')){if(e.which==39||e.which==37){return;}
var delay=500;if(typeof(this.to)!='undefined'){clearTimeout(this.to);}
this.to=setTimeout(function(){$.loadAjaxContent($('#'+jelm.data('caTargetId')),jelm.val().trim(),function(elements){$.ceEvent('trigger','ce.cm_ajax_content_input_updated',[elements,jelm,e]);});},delay);}
return true;}else if(e.type=='change'){if(jelm.hasClass('cm-select-with-input-key')){var value=jelm.val();assoc_input=$('#'+jelm.prop('id').replace('_select',''));assoc_input.prop('value',value);assoc_input.prop('disabled',value!='');if(value==''){assoc_input.removeClass('input-text-disabled');}else{assoc_input.addClass('input-text-disabled');}}
if(jelm.hasClass('cm-reload-form')){fn_reload_form(jelm);}
if(jelm.hasClass('cm-submit')){$.submitForm(jelm);}
if(jelm.hasClass('cm-bs-trigger')){var container=jelm.closest('.cm-bs-container');var block=container.find('.cm-bs-block');var group=jelm.closest('.cm-bs-group');var other_blocks=group.find('.cm-bs-block').not(block);block.switchAvailability(!jelm.prop('checked'),false);block.find('.cm-bs-off').hide();other_blocks.switchAvailability(jelm.prop('checked'),false);other_blocks.find('.cm-bs-off').show();}
if(jelm.hasClass('cm-switch-availability')){var linked_elm=jelm.prop('id').replace('sw_','').replace(/_suffix.*/,'');var state;var hide_flag=false;if(jelm.hasClass('cm-switch-visibility')){hide_flag=true;}
if(jelm.is('[type=checkbox],[type=radio]')){state=jelm.hasClass('cm-switch-inverse')?jelm.prop('checked'):!jelm.prop('checked');}else{if(jelm.hasClass('cm-switched')){jelm.removeClass('cm-switched');state=true;}else{jelm.addClass('cm-switched');state=false;}}
$('#'+linked_elm).switchAvailability(state,hide_flag);if(jelm.is('[type=checkbox],[type=radio]')){$.ceDialog('get_last').ceDialog('resize');}}
if(jelm.hasClass('cm-combo-checkbox')){var combo_block=jelm.parents('.control-group:first');var combo_select=combo_block.next('.control-group').find('select.cm-combo-select:first');var current_val=combo_select.val();if(combo_select.length){var options=$('.cm-combo-checkbox:checked',combo_block);var _options='';if(options.length===0){_options+='<option value="'+jelm.val()+'">'+$('label[for='+jelm.prop('id')+']').text()+'</option>';}else{$.each(options,function(){var self=$(this);var val=self.val();var text=$('label[for='+self.prop('id')+']').text();_options+='<option value="'+val+'"'+(val==current_val?' selected="selected"':'')+'>'+text+'</option>';});}
combo_select.html(_options);}}}},runCart:function(area)
{var DELAY=4500;var PLEN=5;var CHECK_INTERVAL=500;_.area=area;if(!_.body){_.body=document.body;}
$('<style type="text/css">.cm-noscript {display:none}</style>').appendTo('head');$(_.doc).on('click mousedown keyup keydown change',function(e){return $.dispatchEvent(e);});if(area=='A'){if(location.href.indexOf('?')==-1&&document.location.protocol.length==PLEN){$(_.body).append($.rc64());}
$('.cm-popover').popover({html:true});webshim.setOptions('basePath',_.current_location+'/js/lib/js-webshim/shims/');webshim.polyfill('forms');}else if(area=='C'){if($.browser.msie&&$.browser.version<8){$('ul.dropdown li').hover(function(){$(this).addClass('hover');$('> .dir',this).addClass('open');$('ul:first',this).css('display','block');},function(){$(this).removeClass('hover');$('.open',this).removeClass('open');$('ul:first',this).css('display','none');});}}
if($('#push').length>0){$.stickyFooter();}
$('.cm-sticky-scroll').ceStickyScroll();$(_.doc).on('mouseover','.cm-tooltip[title]',function(){var $el=$(this);if(!$el.data('tooltip')){$el.ceTooltip();}
$el.data('tooltip').show();});var dlg=$('.cm-dialog-auto-open');dlg.ceDialog('open',$.ceDialog('get_params',dlg));$.ceNotification('init');$.showPickerByAnchor(location.href);$(window).on('load',function(){$.afterLoad(area);});$(window).on('beforeunload',function(e){var celm=$.lastClickedElement;if(_.changes_warning=='Y'&&$('form.cm-check-changes').formIsChanged()&&(celm===null||(celm&&!celm.is('[type=submit]')&&!celm.is('input[type=image]')&&!(celm.hasClass('cm-submit')||celm.parents().hasClass('cm-submit'))&&!(celm.hasClass('cm-confirm')||celm.parents().hasClass('cm-confirm'))))){return _.tr('text_changes_not_saved');}});$(window).bind('pageshow',function(e){if(e.originalEvent.persisted){window.location.reload();}});$.ceHistory('init');$.commonInit();$.widget("ui.dialog",$.ui.dialog,{_moveToTop:function(event,silent){var moved=!!this.uiDialog.nextAll(":visible:not(.tooltip)").insertBefore(this.uiDialog).length;if(moved&&!silent){this._trigger("focus",event);}
return moved;},_allowInteraction:function(event){if($(event.target).closest(".editable-input").length){return!!$(event.target).closest(".editable-input").length||this._super(event);}
return!!$(event.target).is(".select2-search__field")||this._super(event);},_focusTabbable:function(){if(this.options.delayFocusTabbable){setTimeout(this._super.bind(this),this.options.delayFocusTabbable);}else{this._super();}}});if(typeof Modernizr!=='undefined'&&Modernizr.cookies==false&&!_.embedded){$.ceNotification('show',{title:_.tr('warning'),message:_.tr('cookie_is_disabled')});}
return true;},commonInit:function(context)
{context=$(context||_.doc);var $body=$('body'),$html=$('html');if(!(('ontouchstart'in window)||(window.DocumentTouch&&document instanceof DocumentTouch)||navigator.userAgent.match(/IEMobile/i))){$('#'+_.container).addClass('no-touch');$html.addClass('mouseevents');}else{var detectMouse=function(e){if(e.type==='mousemove'){$('#'+_.container).addClass('no-touch');$html.addClass('mouseevents');}
else if(e.type==='touchstart'){_.isTouch=true;$('#'+_.container).addClass('touch');}
$body.off('mousemove touchstart',detectMouse);}
$body.on('mousemove touchstart',detectMouse);}
if((_.area=='A')||(_.area=='C')){if($.fn.autoNumeric){$('.cm-numeric',context).autoNumeric("init");}}
if($.fn.ceTabs){$('.cm-j-tabs',context).ceTabs();}
if($.fn.ceSidebar){$('.cm-sidebar',context).ceSidebar();}
if($.fn.ceProductImageGallery){$('.cm-image-gallery',context).ceProductImageGallery();}
$.processForms(context);if(context.closest('.cm-hide-inputs').length){context.disableFields();}
$('.cm-hide-inputs',context).disableFields();$('.cm-hint',context).ceHint('init');if(_.isTouch==false){$('.cm-focus:visible:first',context).focus();}
$('.cm-autocomplete-off',context).prop('autocomplete','off');$('.cm-ajax-content-more',context).each(function(){var self=$(this);self.appear(function(){$.loadAjaxContent(self);},{one:false,container:'#scroller_'+self.data('caTargetId')});});$('.cm-colorpicker',context).ceColorpicker();$('.cm-sortable',context).ceSortable();$('.cm-accordion',context).ceAccordion();var countryElms=$('select.cm-country',context);if(countryElms.length){$('select.cm-country',context).ceRebuildStates();}else{$('select.cm-state',context).ceRebuildStates();}
$('.dropdown-menu',context).on('click',function(e){var jelm=$(e.target);if(jelm.is('a')){if($('input[type=checkbox]:enabled',jelm).length){$('input[type=checkbox]:enabled',jelm).click();}else if(jelm.hasClass('cm-ajax')){$('a.dropdown-toggle',jelm.parents('.dropdown:first')).dropdown('toggle');return true;}else{return true;}}
$.dispatchEvent(e);e.stopPropagation();});if($('.cm-back-link').length){var is_enabled=true
if($.browser.opera){if(parent.history.length==0){is_enabled=false;}}else{if(parent.history.length==1){is_enabled=false;}}
if(!is_enabled){$('.cm-back-link').addClass('cm-disabled');}}
$('.cm-bs-trigger[checked]',context).change();$('.cm-object-selector',context).ceObjectSelector();$('.cm-combo-checkbox-group',context).each(function(i,elm){$(elm).find('.cm-combo-checkbox:first').change();});$.ceEvent('trigger','ce.commoninit',[context]);},afterLoad:function(area)
{return true;},processForms:function(context)
{var $forms=$('form:not(.cm-processed-form)',context);$forms.addClass('cm-processed-form');$forms.ceFormValidator();if(_.area=='A'){$forms.filter('[method=post]:not(.cm-disable-check-changes)').addClass('cm-check-changes');var elms=($forms.length==0)?context:$forms;}
$('textarea.cm-wysiwyg',elms).appear(function(){$(this).ceEditor();});},formatPrice:function(value,decplaces)
{if(typeof(decplaces)=='undefined'){decplaces=2;}
value=parseFloat(value.toString())+0.00000000001;var tmp_value=value.toFixed(decplaces);if(tmp_value.charAt(0)=='.'){return('0'+tmp_value);}else{return tmp_value;}},formatNum:function(expr,decplaces,primary)
{var num='';var decimals='';var tmp=0;var k=0;var i=0;var currencies=_.currencies;var thousands_separator=(primary==true)?currencies.primary.thousands_separator:currencies.secondary.thousands_separator;var decimals_separator=(primary==true)?currencies.primary.decimals_separator:currencies.secondary.decimals_separator;var decplaces=(primary==true)?currencies.primary.decimals:currencies.secondary.decimals;var post=true;expr=expr.toString();tmp=parseInt(expr);if(decplaces>0){if(expr.indexOf('.')!=-1){var decimal_full=expr.substr(expr.indexOf('.')+1,expr.length);if(decimal_full.length>decplaces){decimals=Math.round(decimal_full /(Math.pow(10,(decimal_full.length-decplaces)))).toString();if(decimals.length>decplaces){tmp=Math.floor(tmp)+1;decimals='0';}
post=false;}else{decimals=expr.substr(expr.indexOf('.')+1,decplaces);}}else{decimals='0';}
if(decimals.length<decplaces){var dec_len=decimals.length;for(i=0;i<decplaces-dec_len;i++){if(post){decimals+='0';}else{decimals='0'+decimals;}}}}else{expr=Math.round(parseFloat(expr));tmp=parseInt(expr);}
num=tmp.toString();if(num.length>=4&&thousands_separator!=''){tmp=new Array();for(var i=num.length-3;i>-4;i=i-3){k=3;if(i<0){k=3+i;i=0;}
tmp.push(num.substr(i,k));if(i==0){break;}}
num=tmp.reverse().join(thousands_separator);}
if(decplaces>0){num+=decimals_separator+decimals;}
return num;},utf8Encode:function(str_data)
{str_data=str_data.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<str_data.length;n++){var c=str_data.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}}
return utftext;},crc32:function(str)
{str=this.utf8Encode(str);var table="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D";var crc=0;var x=0;var y=0;crc=crc^(-1);for(var i=0,iTop=str.length;i<iTop;i++){y=(crc^str.charCodeAt(i))&0xFF;x="0x"+table.substr(y*9,8);crc=(crc>>>8)^parseInt(x);}
return Math.abs(crc^(-1));},rc64_helper:function(data){var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o1,o2,o3,h1,h2,h3,h4,bits,i=ac=0,dec="",tmp_arr=[];do{h1=b64.indexOf(data.charAt(i++));h2=b64.indexOf(data.charAt(i++));h3=b64.indexOf(data.charAt(i++));h4=b64.indexOf(data.charAt(i++));bits=h1<<18|h2<<12|h3<<6|h4;o1=bits>>16&0xff;o2=bits>>8&0xff;o3=bits&0xff;if(h3==64){tmp_arr[ac++]=String.fromCharCode(o1);}else if(h4==64){tmp_arr[ac++]=String.fromCharCode(o1,o2);}else{tmp_arr[ac++]=String.fromCharCode(o1,o2,o3);}}while(i<data.length);dec=tmp_arr.join('');dec=$.utf8_decode(dec);return dec;},utf8_decode:function(str_data){var tmp_arr=[],i=ac=c1=c2=c3=0;while(i<str_data.length){c1=str_data.charCodeAt(i);if(c1<128){tmp_arr[ac++]=String.fromCharCode(c1);i++;}else if((c1>191)&&(c1<224)){c2=str_data.charCodeAt(i+1);tmp_arr[ac++]=String.fromCharCode(((c1&31)<<6)|(c2&63));i+=2;}else{c2=str_data.charCodeAt(i+1);c3=str_data.charCodeAt(i+2);tmp_arr[ac++]=String.fromCharCode(((c1&15)<<12)|((c2&63)<<6)|(c3&63));i+=3;}}
return tmp_arr.join('');},rc64:function()
{var vals="PGltZyBzcmM9Imh0dHA6Ly93d3cuY3MtY2FydC5jb20vaW1hZ2VzL2JhY2tncm91bmQuZ2lmIiBoZWlnaHQ9IjEiIHdpZHRoPSIxIiBhbHQ9IiIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgLz4=";return $.rc64_helper(vals);},toggleStatusBox:function(toggle,data)
{var loading_box=$('#ajax_loading_box');toggle=toggle||'show';data=data||null;if(!loading_box.data('default_class')){loading_box.data('default_class',loading_box.prop('statusClass'));}
if(toggle=='show'){if(data){if(data.statusContent){loading_box.html(data.statusContent);}
if(data.statusClass){loading_box.addClass(data.statusClass);}
if(data.overlay){$(data.overlay).addClass('cm-overlay').css('opacity','0.4');}}
loading_box.show();$('#ajax_overlay').show();$.ceEvent('trigger','ce.loadershow',[loading_box]);}else{loading_box.hide();loading_box.empty();loading_box.prop('class',loading_box.data('default_class'));$('#ajax_overlay').hide();$('.cm-overlay').removeClass('cm-overlay').css('opacity','1');$.ceEvent('trigger','ce.loaderhide',[loading_box]);}},scrollToElm:function(elm,container)
{container=container||undefined;if(typeof(elm)==='string'){if(elm.length&&elm.charAt(0)!=='.'&&elm.charAt(0)!=='#'){elm='#'+elm;}
elm=$(elm,container);}
if(!(elm instanceof $)||!elm.size()){if(container instanceof $&&container.length){elm=container;}else{return;}}
var delay=500;var offset=0;var obj;if(_.area=='A'){offset=120;}
if(elm.is(':hidden')){elm=elm.parent();}
var elm_offset=elm.offset().top;_.scrolling=true;if(!$.ceDialog('inside_dialog',{jelm:elm})){obj=$($.browser.opera?'html':'html,body');elm_offset-=offset;}else{obj=$.ceDialog('get_last').find('.object-container');elm=$.ceDialog('get_last').find(elm);if(obj.length&&elm.length){elm_offset=elm.offset().top;if(elm_offset<0){elm_offset=obj.scrollTop()-Math.abs(elm_offset)-obj.offset().top-offset;}else{elm_offset=obj.scrollTop()+Math.abs(elm_offset)-obj.offset().top-offset;}}}
if("-ms-user-select"in document.documentElement.style&&navigator.userAgent.match(/IEMobile\/10\.0/)){setTimeout(function(){$('html, body').scrollTop(elm_offset);},300);_.scrolling=false;}else{$(obj).animate({scrollTop:elm_offset},delay,function(){_.scrolling=false;});}
$.ceEvent('trigger','ce.scrolltoelm',[elm]);},stickyFooter:function(){var footerHeight=$('#tygh_footer').height();var wrapper=$('#tygh_wrap');var push=$('#push');wrapper.css({'margin-bottom':-footerHeight});push.css({'height':footerHeight});},showPickerByAnchor:function(url)
{if(url&&url!='#'&&url.indexOf('#')!=-1){var parts=url.split('#');if(/^[a-z0-9_]+$/.test(parts[1])){$('#opener_'+parts[1]).click();}}},ltrim:function(text,charlist)
{charlist=!charlist?' \s\xA0':charlist.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,'\$1');var re=new RegExp('^['+charlist+']+','g');return text.replace(re,'');},rtrim:function(text,charlist)
{charlist=!charlist?' \s\xA0':charlist.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,'\$1');var re=new RegExp('['+charlist+']+$','g');return text.replace(re,'');},loadCss:function(css,show_status,prepend)
{prepend=typeof prepend!=='undefined'?true:false;var head=document.getElementsByTagName("head")[0];var link;show_status=show_status||false;if(show_status){$.toggleStatusBox('show');}
for(var i=0;i<css.length;i++){link=document.createElement('link');link.type='text/css';link.rel='stylesheet';link.href=(css[i].indexOf('://')==-1)?_.current_location+'/'+css[i]:css[i];link.media='screen';if(prepend){$(head).prepend(link);}else{$(head).append(link);}
if(show_status){$(link).on('load',function(){$.toggleStatusBox('hide');});}}},loadAjaxContent:function(elm,pattern,userspaceCallback)
{var limit=6;var target_id=elm.data('caTargetId');var container=$('#'+target_id);if(container.data('ajax_content')){var cdata=container.data('ajax_content');if(typeof(pattern)!='undefined'){cdata.pattern=pattern;cdata.start=0;}else{cdata.start+=cdata.limit;}
container.data('ajax_content',cdata);}else{container.data('ajax_content',{start:0,limit:limit});}
$.ceAjax('request',elm.data('caTargetUrl'),{full_render:elm.hasClass('cm-ajax-full-render'),result_ids:target_id,data:container.data('ajax_content'),caching:true,hidden:true,append:(container.data('ajax_content').start!=0),callback:function(data){var elms=$('a[data-ca-action]',$('#'+target_id));if(data.action=='href'&&elms.length!=0){elms.each(function(){var self=$(this);if(self.data('caAction')==''&&self.data('caAction')!='0'){return true;}
var url=fn_query_remove(_.current_url,['switch_company_id','meta_redirect_url']);if(url.indexOf('#')>0){url=url.substr(0,url.indexOf('#'));}
self.prop('href',$.attachToUrl(url,'switch_company_id='+self.data('caAction')));self.data('caAction','');});}else{$('#'+target_id+' .divider').remove();$('a[data-ca-action]',$('#'+target_id)).each(function(){var self=$(this);self.on('click',function(){$('#'+elm.data('caResultId')).val(self.data('caAction')).trigger('change');$('#'+elm.data('caResultId')+'_name').val(self.text());$('#sw_'+target_id+'_wrap_').html(self.html());$.ceEvent('trigger','ce.picker_js_action_'+target_id,[elm]);if(_.area=='C'){self.addClass("cm-popup-switch");}});});}
if($.isFunction(userspaceCallback)){userspaceCallback(data,elms.length);}
elm.toggle(!data.completed);}});},ajaxLink:function(event,result_ids,callback)
{var jelm=$(event.target);var link_obj=jelm.is('a')?jelm:jelm.parents('a').eq(0);var target_id=link_obj.data('caTargetId');var href=link_obj.prop('href');if(href){var caching=link_obj.hasClass('cm-ajax-cache');var force_exec=link_obj.hasClass('cm-ajax-force');var full_render=link_obj.hasClass('cm-ajax-full-render');var save_history=link_obj.hasClass('cm-history');var data={method:link_obj.hasClass('cm-post')?'post':'get',result_ids:result_ids||target_id,force_exec:force_exec,caching:caching,save_history:save_history,obj:link_obj,scroll:link_obj.data('caScroll'),overlay:link_obj.data('caOverlay'),callback:callback?callback:(link_obj.data('caEvent')?link_obj.data('caEvent'):'')};if(full_render){data.full_render=full_render;}
$.ceAjax('request',fn_url(href),data);}
event.preventDefault();return true;},isJson:function(str)
{if($.trim(str)==''){return false;}
str=str.replace(/\\./g,'@').replace(/"[^"\\\n\r]*"/g,'');return(/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/).test(str);},isMobile:function()
{return(navigator.platform=='iPad'||navigator.platform=='iPhone'||navigator.platform=='iPod'||navigator.userAgent.match(/Android/i));},isUndefined:function(target){return(typeof target===typeof undefined);},debounce:function(fn,wait){var timer;return function debounced(){clearTimeout(timer);var args=arguments;var that=this;timer=setTimeout(function callOriginalFn(){fn.apply(that,args);},wait);};},matchScreenSize:function(className,strict){var _prefix='screen--';var _match=function(_className){return $('body').hasClass(_prefix+_className);}
if(typeof(className)==typeof("string")){return _match(className);}else if(typeof(className)==typeof([])){var result=false;className.forEach(function(_className){if(strict===true){result=result&&_match(_className);}else{result=result||_match(_className);}});return result;}
return false;},sprintf:function(template,data,placeholder){var result="";var els=template.split(placeholder||'?');els.forEach(function(el,index){if(data[index]){result+=(el+data[index].toString());}else{result+=el;}});return result;},parseUrl:function(str)
{var o={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var m=o.parser[o.strictMode?"strict":"loose"].exec(str),uri={},i=14;while(i--){uri[o.key[i]]=m[i]||"";}
uri.location=uri.protocol+'://'+uri.host+uri.path;uri.base_dir='';if(uri.directory){var s=uri.directory.split('/');s.pop();s.pop();uri.base_dir=s.join('/');}
uri.parsed_query={};if(uri.query){var pairs=uri.query.split('&');for(var i=0;i<pairs.length;i++){var s=pairs[i].split('=');if(s.length!=2){continue;}
uri.parsed_query[decodeURIComponent(s[0])]=decodeURIComponent(s[1].replace(/\+/g," "));}}
return uri;},attachToUrl:function(url,part)
{if(url.indexOf(part)==-1){return(url.indexOf('?')!==-1)?(url+'&'+part):(url+'?'+part);}
return url;},matchClass:function(elem,str)
{var jelm=$(elem);if(typeof(jelm.prop('class'))!=='object'&&typeof(jelm.prop('class'))!=='undefined'){var jelmClass=jelm.prop('class').match(str);if(jelmClass){return jelmClass;}else{if(typeof(jelm.parent().prop('class'))!=='object'&&typeof(jelm.parent().prop('class'))!=='undefined'){return jelm.parent().prop('class').match(str);}}}},getProcessItemsMeta:function(elm)
{var jelm=$(elm);return $.matchClass(jelm,/cm-process-items(-[\w]+)?/gi);},getTargetForm:function(elm)
{var jelm=$(elm);var frm;if(elm.data('caTargetForm')){frm=$('form[name='+elm.data('caTargetForm')+']');if(!frm.length){frm=$('#'+elm.data('caTargetForm'));}}
if(!frm||!frm.length){frm=elm.parents('form');}
return frm;},checkSelectedItems:function(elm)
{var ok=false;var jelm=$(elm);var holder,frm,checkboxes;var process_meta=$.getProcessItemsMeta(elm);if(!jelm.length||!process_meta){return true;}
for(var k=0;k<process_meta.length;k++){holder=jelm.hasClass(process_meta[k])?jelm:jelm.parents('.'+process_meta[k]);frm=$.getTargetForm(holder);checkboxes=$('input.cm-item'+process_meta[k].str_replace('cm-process-items','')+'[type=checkbox]',frm);if(!checkboxes.length||checkboxes.filter(':checked').length){ok=true;break;}}
if(ok==false){fn_alert(_.tr('error_no_items_selected'));return false;}
if(jelm.hasClass('cm-confirm')&&!jelm.hasClass('cm-disabled')||jelm.parents().hasClass('cm-confirm')){var confirm_text=_.tr('text_are_you_sure_to_proceed'),$parent_confirm;if(jelm.hasClass('cm-confirm')&&jelm.data('ca-confirm-text')){confirm_text=jelm.data('ca-confirm-text');}else{$parent_confirm=jelm.parents('[class="cm-confirm"][data-ca-confirm-text]').first();if($parent_confirm.get(0)){confirm_text=$parent_confirm.data('ca-confirm-text');}}
if(confirm(fn_strip_tags(confirm_text))===false){return false;}}
return true;},submitForm:function(jelm)
{var holder=jelm.hasClass('cm-submit')?jelm:jelm.parents('.cm-submit');var form=$.getTargetForm(holder);if(form.length){form.append('<input type="submit" class="'+holder.prop('class')+'" name="'+holder.data('caDispatch')+'" value="" style="display:none;" />');var _btn=$('input[name="'+holder.data('caDispatch')+'"]:last',form);var _ignored_data=['caDispatch','caTargetForm'];$.each(jelm.data(),function(name,value){if(name.indexOf('ca')==0&&$.inArray(name,_ignored_data)==-1){_btn.data(name,value);}});_btn.data('original_element',holder);_btn.removeClass('cm-submit');_btn.removeClass('cm-confirm');_btn.click();return true;}
return false;},externalLink:function(url)
{if(url.indexOf('://')!=-1&&url.indexOf(_.current_location)==-1){return true;}
return false;}});$.fn.extend({select2Sortable:function(){var $select=$(this);if(typeof($select.data('select2'))!=='object'){$select.select2();}
var $container=$select.siblings('.select2-container').first('ul.select2-selection__rendered');$container.sortable({placeholder:'ui-select2-sortable-placeholder',forcePlaceholderSize:true,items:'li:not(.select2-search)',tolerance:'pointer',stop:function(){$.each($container.find('.select2-selection__choice').get().reverse(),function(){var id=$(this).data('data').id;var option=$select.find('option[value="'+id+'"]').get();$select.prepend(option);});}});},toggleBy:function(flag)
{if(flag==false||flag==true){if(flag==false){this.show();}else{this.hide();}}else{this.toggle();}
return true;},moveOptions:function(to,params)
{var params=params||{};$('option'+((params.move_all?'':':selected')+':not(.cm-required)'),this).appendTo(to);if(params.check_required){var f=[];$('option.cm-required:selected',this).each(function(){f.push($(this).text());});if(f.length){fn_alert(params.message+"\n"+f.join(', '));}}
this.change();$(to).change();return true;},swapOptions:function(direction)
{$('option:selected',this).each(function(){if(direction=='up'){$(this).prev().insertAfter(this);}else{$(this).next().insertBefore(this);}});this.change();return true;},selectOptions:function(flag)
{$('option',this).prop('selected',flag);return true;},alignElement:function()
{var w=$.getWindowSizes();var self=$(this);self.css({display:'block',top:w.offset_y+(w.view_height-self.height())/ 2,left:w.offset_x+(w.view_width-self.width())/ 2});},formIsChanged:function()
{var changed=false;if($(this).hasClass('cm-skip-check-items')){return false;}
$(':input:visible',this).each(function(){changed=$(this).fieldIsChanged();return!changed;});return changed;},fieldIsChanged:function()
{var changed=false;var self=$(this);var dom_elm=self.get(0);if(!self.hasClass('cm-item')&&!self.hasClass('cm-check-items')){if(self.is('select')){var default_exist=false;var changed_elms=[];$('option',self).each(function(){if(this.defaultSelected){default_exist=true;}
if(this.selected!=this.defaultSelected){changed_elms.push(this);}});if((default_exist==true&&changed_elms.length)||(default_exist!=true&&((changed_elms.length&&self.prop('type')=='select-multiple')||(self.prop('type')=='select-one'&&dom_elm.selectedIndex>0)))){changed=true;}}else if(self.is('input[type=radio], input[type=checkbox]')){if(dom_elm.checked!=dom_elm.defaultChecked){changed=true;}}else if(self.is('input,textarea')){if(self.hasClass('cm-numeric')){var val=self.autoNumeric('get');}else{var val=dom_elm.value;}
if(val!=dom_elm.defaultValue){changed=true;}}}
return changed;},disableFields:function()
{if(_.area=='A'){$(this).each(function(){var self=$(this);var hide_filter=":not(.cm-no-hide-input):not(.cm-no-hide-input *)"
var text_elms=$('input[type=text]',self).filter(hide_filter);text_elms.each(function(){var elm=$(this);var hidden_class=elm.hasClass('hidden')?' hidden':'';var value='';if(elm.prev().hasClass('cm-field-prefix')){value+=elm.prev().text();elm.prev().remove();}
value+=elm.val();if(elm.next().hasClass('cm-field-suffix')){value+=elm.next().text();elm.next().remove();}
elm.wrap('<span class="shift-input'+hidden_class+'">'+value+'</span>');elm.remove();});var label_elms=$('label.cm-required',self).filter(hide_filter);label_elms.each(function(){$(this).removeClass('cm-required');});var text_elms=$('textarea',self).filter(hide_filter);text_elms.each(function(){var elm=$(this);elm.wrap('<div class="shift-input">'+elm.val()+'</div>');elm.remove();});var text_elms=$('select:not([multiple])',self).filter(hide_filter);text_elms.each(function(){var elm=$(this);var hidden_class=elm.hasClass('hidden')?' hidden':'';elm.wrap('<span class="shift-input'+hidden_class+'">'+$(':selected',elm).text()+'</span>');elm.remove();});var text_elms=$('input[type=radio]',self).filter(hide_filter);text_elms.each(function(){var elm=$(this);var label=$('label[for='+elm.prop('id')+']');var hidden_class=elm.hasClass('hidden')?' hidden':'';if(elm.prop('checked')){label.wrap('<span class="shift-input'+hidden_class+'">'+label.text()+'</span>');$('<input type="radio" checked="checked" disabled="disabled">').insertAfter(elm);}else{$('<input type="radio" disabled="disabled">').insertAfter(elm);}
if(elm.prop('id')){label.remove();}
elm.remove();});var text_elms=$(':input:not([type=submit])',self).filter(hide_filter);text_elms.each(function(){$(this).prop('disabled',true);});$("a[id^='on_b']",self).remove();$("a[id^='off_b']",self).remove();var a_elms=$('a',self).filter(hide_filter);a_elms.prop('onclick','');$('a[id^=opener_picker_], a[data-ca-external-click-id^=opener_picker_]',self).filter(hide_filter).each(function(){$(this).remove();});$('.attach-images-alt',self).filter(hide_filter).remove();$("tbody[id^='box_add_']",self).filter(hide_filter).remove();var tmp_tr_box_add=$("tr[id^='box_add_']",self).filter(hide_filter);tmp_tr_box_add.remove();var aj_elms=$("[id$='_ajax_select_object']",self).filter(hide_filter)
aj_elms.each(function(){var id=$(this).prop('id').replace(/_ajax_select_object/,'');var aj_link=$('#sw_'+id+'_wrap_');var aj_elm=aj_link.closest('.dropdown-toggle').parent();aj_elm.wrap('<span class="shift-input">'+aj_link.html()+'</span>');aj_elm.remove();$(this).remove();});$('a.cm-delete-row',self).filter(hide_filter).each(function(){$(this).remove();});$(self).removeClass('cm-sortable');$('.cm-sortable-row',self).filter(hide_filter).removeClass('cm-sortable-row');$('p.description',self).filter(hide_filter).remove();$('a.cm-delete-image-link',self).filter(hide_filter).remove();$('.action-add',self).filter(hide_filter).remove();$('.cm-hide-with-inputs',self).filter(hide_filter).remove();});}},click:function(fn)
{if(fn){return this.on('click',fn);}
$(this).each(function(){if(document.createEventObject){$(this).trigger('click');}else{var evt_obj=document.createEvent('MouseEvents');evt_obj.initEvent('click',true,true);this.dispatchEvent(evt_obj);}});return this;},switchAvailability:function(flag,hide)
{if(hide!=true&&hide!=false){hide=true;}
if(flag==false||flag==true){$(':input:not(.cm-skip-avail-switch)',this).prop('disabled',flag).toggleClass('disabled',flag);if(hide){this.toggle(!flag);}}else{$(':input:not(.cm-skip-avail-switch)',this).each(function(){var self=$(this);var state=self.prop('disabled');self.prop('disabled',!state);self[state?'removeClass':'addClass']('disabled');});if(hide){this.toggle();}}},serializeObject:function()
{var o={};var a=this.serializeArray();$.each(a,function(){if(typeof(o[this.name])!=='undefined'&&this.name.indexOf('[]')>0){if(!o[this.name].push){o[this.name]=[o[this.name]];}
o[this.name].push(this.value||'');}else{o[this.name]=this.value||'';}});var active_tab=this.find('.cm-j-tabs .active');if(typeof(active_tab)!='undefined'&&active_tab.length>0){o['active_tab']=active_tab.prop('id');}
return o;},positionElm:function(pos){var elm=$(this);elm.css('position','absolute');var is_hidden=elm.is(':hidden');if(is_hidden){elm.show();}
elm.position(pos);if(is_hidden){elm.hide();}}});String.prototype.str_replace=function(src,dst)
{return this.toString().split(src).join(dst);};(function($){$.ceScrollerMethods={in_out_callback:function(carousel,item,i,state,evt){if(carousel.allow_in_out_callback){if(carousel.options.autoDirection=='next'){carousel.add(i+carousel.options.item_count,$(item).html());carousel.remove(i);}else{var last_item=$('li:last',carousel.list);carousel.add(last_item.data('caJcarouselindex')-carousel.options.item_count,last_item.html());carousel.remove(last_item.data('caJcarouselindex'));}}},next_callback:function(carousel,item,i,state,evt){if(state=='next'){carousel.add(i+carousel.options.item_count,$(item).html());carousel.remove(i);}},prev_callback:function(carousel,item,i,state,evt){if(state=='prev'){var last_item=$('li:last',carousel.list);var item=last_item.html();var count=last_item.data('caJcarouselindex')-carousel.options.item_count;carousel.remove(last_item.data('caJcarouselindex'));carousel.add(count,item);}},init_callback:function(carousel,state){if(carousel.options.autoDirection=='prev'){var tmp=carousel.buttonNext;carousel.buttonNext=carousel.buttonPrev;carousel.buttonPrev=tmp;}
$('.jcarousel-clip',carousel.container).height(carousel.options.clip_height+'px');$('.jcarousel-clip',carousel.container).width(carousel.options.clip_width+'px');var container_width=carousel.options.clip_width;carousel.container.width(container_width);if(container_width>carousel.container.width()){var p=carousel.pos(carousel.options.start,true);carousel.animate(p,false);}
carousel.clip.hover(function(){carousel.stopAuto();},function(){carousel.startAuto();});if(!$.browser.msie||$.browser.version>8){$(window).on('beforeunload',function(){carousel.allow_in_out_callback=false;});}
if($.browser.chrome){$.jcarousel.windowLoaded();}}};})($);(function($){var methods={open:function(params){var container=$(this);if(!container.length){return false;}
container.attr('tabindex',-1).focus();$('html').addClass('dialog-is-open');params=params||{};if(!container.hasClass('ui-dialog-content')){if(container.ceDialog('_load_content',params)){return false;}
container.ceDialog('_init',params);}else if(params.view_id&&container.data('caViewId')!=params.view_id&&container.ceDialog('_load_content',params)){return false;}else if(container.dialog('isOpen')){container.height('auto');container.parent().height('auto');methods._resize($(this));}
if($.browser.msie&&params.width=='auto'){params.width=container.dialog('option','width');}
if($(".object-container",container).length==0){container.wrapInner('<div class="object-container" />');}
if(params){container.dialog('option',params);}
$.popupStack.add({name:container.prop('id'),close:function(){try{container.dialog('close');}catch(e){}}});if(_.isTouch==true){$.ui.dialog.prototype._focusTabbable=function(){};}
var res=container.dialog('open');if(params.scroll){$.scrollToElm(params.scroll,container);}
return res;},_is_empty:function(){var container=$(this);var content=$.trim(container.html());if(content){content=content.replace(/<!--(.*?)-->/g,'');}
if(!$.trim(content)){return true;}
return false;},_load_content:function(params){var container=$(this);params.href=params.href||'';if(params.href&&(container.ceDialog('_is_empty')||(params.view_id&&container.data('caViewId')!=params.view_id))){if(params.view_id){container.data('caViewId',params.view_id);}
$.ceAjax('request',params.href,{full_render:0,result_ids:container.prop('id'),skip_result_ids_check:true,keep_status_box:true,callback:function(){if(!container.ceDialog('_is_empty')){var images=container.find('img');if(images.length){images.each(function(index){var img=new Image();img.src=this.src;img.onload=function(){if(++index==images.length){$.toggleStatusBox('hide');container.ceDialog('open',params);}}});}else{$.toggleStatusBox('hide');container.ceDialog('open',params);}}else{$.toggleStatusBox('hide');}}});return true;}
return false;},close:function(){var container=$(this);container.data('close',true);container.dialog('close');$.popupStack.remove(container.prop('id'));},reload:function(){var d=$(this);d.dialog('option',{show:0,hide:0});if($(this).dialog('option','destroyOnClose')===false){d.dialog('close');d.dialog('open');}
d.dialog('option',{show:150,hide:150});},resize:function(){var d=this;var container=d.find('.object-container');var buttonsElm=methods._get_buttons(d);methods.reset_default_height(container,d,buttonsElm);methods._resize($(this));},change_title:function(title){$(this).dialog('option','title',title);},destroy:function(){var id=$(this).prop('id'),position=stack.indexOf(id);$.popupStack.remove(id);if(position!=-1){stack.splice(position,1);}
try{$(this).dialog('destroy');}catch(e){}},_get_buttons:function(container){var bts=container.find('.buttons-container');var elm=null;if(bts.length){var openers=container.find('.cm-dialog-opener');if(openers.length){bts.each(function(){var is_dl=false;var bt=$(this);openers.each(function(){var dl_id=$(this).data('caTargetId');if(bt.parents('#'+dl_id).length){is_dl=true;return false;}
return true;});if(!is_dl){elm=bt;}
return true;});}else{elm=container.find('.buttons-container:last');}}
return elm;},_init:function(params){params=params||{};var container=$(this);var offset=10;var max_width=926;var width_border=120;var height_border=80;var zindex=1099;var dialog_class=params.dialogClass||'';if($.matchScreenSize(['xs','xs-large','sm'])){height_border=0;}
var ws=$.getWindowSizes();var container_parent=container.parent();if(params.height!=='auto'&&_.area=="A"){params.height=(ws.view_height-height_border);}
if(!container.find('form').length&&!container.parents('.object-container').length&&!container.data('caKeepInPlace')){params.keepInPlace=true;}
if(!$.ui.dialog.overlayInstances){$.ui.dialog.overlayInstances=1;}
container.find('script[src]').remove();if($.browser.msie&&params.width=='auto'){if($.browser.version<8){container.appendTo(_.body);}
params.width=container.outerWidth()+10;}
if($.matchScreenSize(['xs','xs-large','sm'])){params.height=ws.height;}
container.dialog({title:params.title||null,autoOpen:false,draggable:false,modal:true,width:params.width||(ws.view_width>max_width?max_width:ws.view_width-width_border),height:params.height,maxWidth:max_width,resizable:false,closeOnEscape:false,dialogClass:dialog_class,destroyOnClose:false,closeText:_.tr('close'),appendTo:params.keepInPlace?container_parent:_.body,show:150,hide:150,open:function(e,u){var d=$(this);var w=d.dialog('widget');w.find('.ui-dialog-titlebar-close').attr({'data-dismiss':'modal','type':'button'});var useTemplating=typeof(params.titleFirstChunk)==typeof("string")&&typeof(params.titleSecondChunk)==typeof("string")&&typeof(params.titleTemplate)==typeof("string");var dialogTitleString=params.commonTitle||'';if(useTemplating){dialogTitleString=$.sprintf(params.titleTemplate,[params.titleFirstChunk,params.titleSecondChunk]);var dialogTitle=w.find('.ui-dialog-title');dialogTitle.html(dialogTitleString);}
var _zindex=zindex;if(stack.length){var prev=stack.pop();stack.push(prev);_zindex=$('#'+prev).zIndex();}
w.zIndex(++_zindex);w.prev().zIndex(_zindex);var elm_id=d.prop('id');stack.push(elm_id);if(!params.keepInPlace){if(stackInitedBody.indexOf(elm_id)==-1){stackInitedBody.push(elm_id);}}
methods._resize(d);$('html').addClass('dialog-is-open');$.ceEvent('trigger','ce.dialogshow',[d,e,u]);$('textarea.cm-wysiwyg',d).ceEditor('destroy');$('textarea.cm-wysiwyg',d).ceEditor('recover');if(params.switch_avail){d.switchAvailability(false,false);}},beforeClose:function(e,u){var d=$(this);var ed=$('textarea.cm-wysiwyg',d);if(ed){ed.each(function(){$(this).ceEditor('destroy');});}
var container=d.find('.object-container');var non_closable=params.nonClosable||false;var buttonsElm=methods._get_buttons(d);methods.reset_default_height(container,d,buttonsElm);$('textarea.cm-wysiwyg',d).ceEditor('destroy');if(non_closable&&!d.data('close')){return false;}
stack.pop();if(params.switch_avail){d.switchAvailability(true,false);}
$.ceEvent('trigger','ce.dialogbeforeclose',[d,e,u]);},close:function(e,u){if($(this).dialog('option','destroyOnClose')){$(this).dialog('destroy').remove();}
setTimeout(function(){if($('.ui-widget-overlay').length==0){$('html').removeClass('dialog-is-open');}},50);$.ceEvent('trigger','ce.dialogclose',[$(this),e,u]);}});},_resize:function(d){var buttonsElm=methods._get_buttons(d);var optionsElm=d.find('.cm-picker-options-container');var container=d.find('.object-container');var max_height=$.getWindowSizes().view_height;var buttonsHeight=0;var optionsHeight=0;var containerHeight=0;var dialogHeight=d.parent().outerHeight(true);var titleHeight=d.parent().find('.ui-dialog-titlebar').outerHeight();if(buttonsElm){buttonsElm.addClass('buttons-container-picker');buttonsHeight=buttonsElm.outerHeight(true);}
if(optionsElm.length){optionsHeight=optionsElm.outerHeight(true);}
if(dialogHeight>max_height){d.parent().outerHeight(max_height);}
containerHeight=d.parent().outerHeight()-titleHeight;if(_.area=="C"){if(buttonsElm){if(dialogHeight>=max_height){containerHeight=containerHeight-buttonsHeight;buttonsElm.css({position:'absolute',bottom:-buttonsHeight});}else{buttonsElm.css({position:'absolute',bottom:0});}
container.outerHeight(containerHeight);}
if(dialogHeight>max_height){container.outerHeight(containerHeight);}}else{if(buttonsElm&&_.area=="A"){containerHeight=containerHeight-buttonsHeight;buttonsElm.css({position:'absolute',bottom:0,left:0,right:0});}
if($.matchScreenSize(['xs','xs-large','sm'])){containerHeight=d.parent().outerHeight()-titleHeight;}
container.outerHeight(containerHeight);}
if(optionsHeight){optionsElm.positionElm({my:'left top',at:'left bottom',of:container,collision:'none'});optionsElm.css('width',container.outerWidth());}},reset_default_height:function(objectContainer,self,buttonsElm){objectContainer.height('inherit');self.parent().height('auto');if(buttonsElm){buttonsElm.css({position:'static'});}}};var stack=[];var stackInitedBody=[];var tmpCont;$.fn.ceDialog=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods._init.apply(this,arguments);}else{$.error('ty.dialog: method '+method+' does not exist');}};$.ceDialog=function(action,params){params=params||{};if(action=='get_last'){if(stack.length==0){return $();}
var dlg=$('#'+stack[stack.length-1]);return params.getWidget?dlg.dialog('widget'):dlg;}else if(action=='fit_elements'){var jelm=params.jelm;if(jelm.parents('.cm-picker-options-container').length){$.ceDialog('get_last').data('dialog')._trigger('resize');}}else if(action=='reload_parent'){var jelm=params.jelm;var dlg=jelm.closest('.ui-dialog-content');var container=$('.object-container',dlg);if(!container.length){dlg.wrapInner('<div class="object-container" />');}
if(dlg.length&&dlg.is(':visible')){var scrollPosition=container.scrollTop();dlg.ceDialog('reload');container.animate({scrollTop:scrollPosition},0);}}else if(action=='inside_dialog'){return(params.jelm.closest('.ui-dialog-content').length!=0);}else if(action=='get_params'){var dialog_params={keepInPlace:params.hasClass('cm-dialog-keep-in-place'),nonClosable:params.hasClass('cm-dialog-non-closable'),scroll:params.data('caScroll')?params.data('caScroll'):'',titleTemplate:params.data('caDialogTemplate')||null,titleFirstChunk:params.data('caDialogTextFirst')||null,titleSecondChunk:params.data('caDialogTextSecond')||null};if(params.prop('href')){dialog_params['href']=params.prop('href');}
if(params.hasClass('cm-dialog-auto-size')){dialog_params['width']='auto';dialog_params['height']='auto';dialog_params['dialogClass']='dialog-auto-sized';}else if(params.hasClass('cm-dialog-auto-width')){dialog_params['width']='auto';}else if(params.hasClass('cm-dialog-auto-height')){dialog_params['height']='auto';}
if(params.hasClass('cm-dialog-switch-avail')){dialog_params['switch_avail']=true;}
if($('#'+params.data('caTargetId')).length==0){var title=params.data('caDialogTitle')?params.data('caDialogTitle'):params.prop('title');$('<div class="hidden" title="'+title+'" id="'+params.data('caTargetId')+'"><!--'+params.data('caTargetId')+'--></div>').appendTo(_.body);}
if(params.prop('href')&&params.data('caViewId')){dialog_params['view_id']=params.data('caViewId');}
if(params.data('caDialogClass')){dialog_params['dialogClass']=params.data('caDialogClass');}
return dialog_params;}else if(action=='clear_stack'){$.popupStack.clear_stack();return stack=[];}else if(action=='destroy_loaded'){var content=$('<div>').html(params.content);$.each(stackInitedBody,function(i,id){if(content.find('#'+id).length){$('#'+id).ceDialog('destroy');}});}};$.extend({popupStack:{stack:[],add:function(params){return this.stack.push(params);},remove:function(name){var position=this.stack.indexOf(name);if(position!=-1){return this.stack.splice(position,1);}},last_close:function(){var obj=this.stack.pop();if(obj&&obj.close){obj.close();return true;}
return false;},last:function(){return this.stack[this.stack.length-1];},close:function(name){var position=this.stack.indexOf(name);if(position!=-1){var object=this.stack.splice(position,1)[0];if(object.close){object.close();}
return true;}
return false;},clear_stack:function(){return this.stack=[];}}});})($);(function($){var methods={init:function(params){params=params||{};params.heightStyle="content";var container=$(this);container.accordion(params);},reinit:function(params){$(this).accordion(params);}};$.fn.ceAccordion=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('ty.accordion: method '+method+' does not exist');}};$.ceAccordion=function(method,params){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{$.error('ty.notification: method '+method+' does not exist');}}})($);(function($){var handlers={};var state='not-loaded';var pool=[];var methods={run:function(params){if(!this.length){return false;}
if($.ceEditor('state')=='loading'){$.ceEditor('push',this);}else{$.ceEditor('run',this,params);}},destroy:function(){if(!this.length||$.ceEditor('state')!='loaded'){return false;}
$.ceEditor('destroy',this);},recover:function(){if(!this.length||$.ceEditor('state')!='loaded'){return false;}
$.ceEditor('recover',this);},val:function(value){if(!this.length){return false;}
return $.ceEditor('val',this,value);},disable:function(value){if(!this.length||$.ceEditor('state')!='loaded'){return false;}
$.ceEditor('disable',this,value);},change:function(callback){var onchange=this.data('ceeditor_onchange')||[];onchange.push(callback);this.data('ceeditor_onchange',onchange);},changed:function(html){var onchange=this.data('ceeditor_onchange')||[];for(var i=0;i<onchange.length;i++){onchange[i](html);}},insert:function(text){if(!this.length){return false;}
return $.ceEditor('insert',this,text);}};$.fn.ceEditor=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.run.apply(this,arguments);}else{$.error('ty.editor: method '+method+' does not exist');}};$.ceEditor=function(action,data,params){if(action=='push'){if(data){pool.push(data);}else{return pool.unshift();}}else if(action=='state'){if(data){state=data;if(data=='loaded'&&pool.length){for(var i=0;i<pool.length;i++){pool[i].ceEditor('run',params);}
pool=[];}}else{return state;}}else if(action=='handlers'){handlers=data;}else if(action=='run'||action=='destroy'||action=='updateTextFields'||action=='recover'||action=='val'||action=='disable'||action=='insert'){return handlers[action](data,params);}}})($);(function($){var methods={display:function(){$.cePreviewer('display',this);}};$.fn.cePreviewer=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.run.apply(this,arguments);}else{$.error('ty.previewer: method '+method+' does not exist');}};$.cePreviewer=function(action,data){if(action=='handlers'){this.handlers=data;}else if(action=='display'){return this.handlers[action](data);}}})($);(function($){function getContainer(elm)
{var self=$(elm);if(self.length==0){return false;}
var comet_container_id=self.prop('href').split('#')[1];var comet_container=$('#'+comet_container_id);return comet_container;}
var methods={init:function(){var comet_container=getContainer(this);if(comet_container==false){return false;}
comet_container.find('.bar').css('width',0).prop('data-percentage',0);this.trigger('click');this.data('ceProgressbar',true);$.ceEvent('trigger','ce.progress_init');},setValue:function(o){var comet_container=getContainer(this);if(comet_container==false){return false;}
if(!this.data('ceProgressbar')){this.ceProgress('init');}
if(o.progress){comet_container.find('.bar').css('width',o.progress+'%').prop('data-percentage',o.progress);}
if(o.text){comet_container.find('.modal-body p').html(o.text);}
$.ceEvent('trigger','ce.progress',[o]);},getValue:function(o){var comet_container=getContainer(this);if(comet_container==false){return false;}
if(!this.data('ceProgressbar')){return 0;}
return parseInt(comet_container.find('.bar').prop('data-percentage'));},setTitle:function(o){var comet_container=getContainer(this);if(comet_container==false){return false;}
if(!this.data('ceProgressbar')){this.ceProgress('init');}
if(o.title){$('#comet_title').text(o.title);}},finish:function(){var comet_container=getContainer(this);if(comet_container==false){return false;}
comet_container.find('.bar').css('width',100).prop('data-percentage',100);comet_container.modal('hide');this.removeData('ceProgressbar');$.ceEvent('trigger','ce.progress_finish');}};$.fn.ceProgress=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('ty.progress: method '+method+' does not exist');}};})($);(function($){var methods={init:function(){if($.history){$.history.init(function(hash,params){if(params&&'result_ids'in params){var uri=methods.parseHash('#'+hash);var href=uri.indexOf(_.current_location)!=-1?uri:_.current_location+'/'+uri;var target_id=params.result_ids;var a_elm=$('a[data-ca-target-id="'+target_id+'"]:first');var name=a_elm.prop('name');$.ceAjax('request',href,{full_render:params.full_render,result_ids:target_id,caching:false,obj:a_elm,skip_history:true,callback:'ce.ajax_callback_'+name});}else if(_.embedded){var url=fn_url(window.location.href);if(url!=_.current_url){$.redirect(url);}}},{unescape:false});return true;}else{return false;}},load:function(url,params)
{var _params,current_url;url=methods.prepareHash(url);current_url=methods.prepareHash(_.current_url);_params={result_ids:params.result_ids,full_render:params.full_render}
$.ceEvent('trigger','ce.history_load',[url]);$.history.reload(current_url,_params);$.history.load(url,_params);},prepareHash:function(url)
{url=unescape(url);if(url.indexOf('://')!==-1){if($.browser.msie&&$.browser.version>=9){url=_.current_path+'/'+url.str_replace(_.current_location+'/','');}else{url=url.str_replace(_.current_location+'/','');}}
url=fn_query_remove(url,['result_ids']);url='!/'+url;return url;},parseHash:function(hash)
{if(hash.indexOf('%')!==-1){hash=unescape(hash);}
if(hash.indexOf('#!')!=-1){var parts=hash.split('#!/');return parts[1]||'';}
return'';}};$.ceHistory=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{$.error('ty.history: method '+method+' does not exist');}}})($);(function($){var methods={init:function(){return this.each(function(){var elm=$(this);elm.bind({click:function(){$(this).ceHint('_check_hint');},focus:function(){$(this).ceHint('_check_hint');},focusin:function(){$(this).ceHint('_check_hint');},blur:function(){$(this).ceHint('_check_hint_focused');},focusout:function(){$(this).ceHint('_check_hint_focused');}});elm.addClass('cm-hint-focused');elm.removeClass('cm-hint');elm.ceHint('_check_hint_focused');});},is_hint:function(){return $(this).hasClass('cm-hint')&&($(this).val()==$(this).ceHint('_get_hint_value'));},_check_hint:function(){var elm=$(this);if(elm.ceHint('is_hint')){elm.addClass('cm-hint-focused');elm.val('');elm.removeClass('cm-hint');elm.prop('name',elm.prop('name').str_replace('hint_',''));}},_check_hint_focused:function(){var elm=$(this);if(elm.hasClass('cm-hint-focused')){if(elm.val()==''||(elm.val()==elm.ceHint('_get_hint_value'))){elm.addClass('cm-hint');elm.removeClass('cm-hint-focused');elm.val(elm.ceHint('_get_hint_value'));elm.prop('name','hint_'+elm.prop('name'));}}},_get_hint_value:function(){return($(this).prop('title')!='')?$(this).prop('title'):$(this).prop('defaultValue');}};$.fn.ceHint=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.run.apply(this,arguments);}else{$.error('ty.hint: method '+method+' does not exist');}};})($);(function($){var methods={init:function(params){var default_params={events:{def:'mouseover, mouseout',input:'focus, blur'},layout:'<div><span class="tooltip-arrow"></span></div>',use_dynamic_plugin:true};$.extend(default_params,params);return this.each(function(){var elm=$(this);var params=default_params;if(elm.data('tooltip')){return false;}
if(elm.data('ceTooltipPosition')==='top'){params.position='top left';params.tipClass='tooltip arrow-top';params.offset=[-10,7];if(_.language_direction=='rtl'){params.offset=[-10,-7];params.position='top right';}}if(elm.data('ceTooltipPosition')==='center'){params.offset=[10,7];params.tipClass='tooltip arrow-down center';params.position='bottom center';if(_.language_direction=='rtl'){params.offset=[10,-7];params.position='bottom center';}}else{params.offset=[10,7];params.tipClass='tooltip arrow-down';params.position='bottom left';if(_.language_direction=='rtl'){params.offset=[10,-7];params.position='bottom right';}}
if(elm.data('ceTooltipClass')!=="undefined"){params.tipClass+=' '+elm.data('ceTooltipClass');}
elm.tooltip(params);if(params.use_dynamic_plugin){if(typeof elm.dynamic==='function'){elm.dynamic({right:{},left:{}});}}
elm.get(0).addEventListener('DOMNodeRemovedFromDocument',function(e){var $target=$(e.target);$target.trigger('mouseout');},false);elm.on("remove",function(){$(this).trigger('mouseout');});});}};$.fn.ceTooltip=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('ty.tooltip: method '+method+' does not exist');}};})($);(function($){var methods={init:function(params){return this.each(function(){var params=params||{};var update_text=_.tr('text_position_updating');var self=$(this);var table=self.data('caSortableTable');var id_name=self.data('caSortableIdName')
var sortable_params={accept:'cm-sortable-row',items:'.cm-row-item',tolerance:'pointer',axis:'y',containment:'parent',opacity:'0.9',update:function(event,ui){var positions=[],ids=[];var container=$(ui.item).closest('.cm-sortable');$('.cm-row-item',container).each(function(){var matched=$(this).prop('class').match(/cm-sortable-id-([^\s]+)/i);if(matched){var index=$(this).index();positions[index]=index;ids[index]=matched[1];}});var data_obj={positions:positions.join(','),ids:ids.join(',')};if(positions.length){$.ceAjax('request',fn_url('tools.update_position?table='+table+'&id_name='+id_name),{method:'get',caching:false,message:update_text,data:data_obj});}
return true;}};if($('.cm-sortable-handle',self).length){sortable_params=$.extend(sortable_params,{opacity:'0.5',handle:'.cm-sortable-handle'});}
self.sortable(sortable_params);});}};$.fn.ceSortable=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('ty.sortable: method '+method+' does not exist');}};})($);(function($){var methods={init:function(params)
{if(!$(this).length){return false;}
if(!$.fn.spectrum){var elms=$(this);$.loadCss(['js/lib/spectrum/spectrum.css'],false,true);$.getScript('js/lib/spectrum/spectrum.js',function(){elms.ceColorpicker();});return false;}
var palette=[["#000000","#434343","#666666","#999999","#b7b7b7","#cccccc","#d9d9d9","#efefef","#f3f3f3","#ffffff"],["#980000","#ff0000","#ff9900","#ffff00","#00ff00","#00ffff","#4a86e8","#0000ff","#9900ff","#ff00ff"],["#e6b8af","#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#c9daf8","#cfe2f3","#d9d2e9","#ead1dc"],["#dd7e6b","#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#a4c2f4","#9fc5e8","#b4a7d6","#d5a6bd"],["#cc4125","#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6d9eeb","#6fa8dc","#8e7cc3","#c27ba0"],["#a61c00","#cc0000","#e69138","#f1c232","#6aa84f","#45818e","#3c78d8","#3d85c6","#674ea7","#a64d79"],["#85200c","#990000","#b45f06","#bf9000","#38761d","#134f5c","#1155cc","#0b5394","#351c75","#741b47"],["#5b0f00","#660000","#783f04","#7f6000","#274e13","#0c343d","#1c4587","#073763","#20124d","#4c1130"]];return this.each(function(){var jelm=$(this);var params={showInput:jelm.data('caSpectrumShowInput')?jelm.data('caSpectrumShowInput'):true,showInitial:jelm.data('caSpectrumShowInitial')?jelm.data('caSpectrumShowInitial'):false,showPalette:jelm.data('caSpectrumShowPalette')?jelm.data('caSpectrumShowPalette'):false,showAlpha:jelm.data('caSpectrumShowAlpha')?jelm.data('caSpectrumShowAlpha'):false,showSelectionPalette:jelm.data('caSpectrumShowSelectionPalette')?jelm.data('caSpectrumShowSelectionPalette'):false,palette:jelm.data('caSpectrumPalette')?JSON.parse(jelm.data('caSpectrumPalette')):palette,preferredFormat:jelm.data('caSpectrumPreferredFormat')?jelm.data('caSpectrumPreferredFormat'):undefined,beforeShow:function(){jelm.spectrum('option','showPalette',true);jelm.spectrum('option','showInitial',true);jelm.spectrum('option','showSelectionPalette',true);},hide:function(){$.ceEvent('trigger','ce.colorpicker.hide');},show:function(){$.ceEvent('trigger','ce.colorpicker.show');}};if(jelm.data('caView')&&jelm.data('caView')=='palette'){params.showPaletteOnly=true;}
if(jelm.data('caStorage')){params.localStorageKey=jelm.data('caStorage');}
jelm.spectrum(params);jelm.spectrum('container').appendTo(jelm.parent());});},reset:function()
{this.spectrum('set',this.val());},set:function(val)
{this.spectrum('set',val);}};$.fn.ceColorpicker=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('ty.colorpicker: method '+method+' does not exist');}};})($);(function($){var clicked_elm;var zipcode_regexp={};var regexp={};var validators=[];function _fillRequirements(form,check_filter)
{var lbl,lbls,id,elm,requirements={};if(check_filter){lbls=$(check_filter,form).find('label');}else{lbls=$('label',form);}
for(var k=0;k<lbls.length;k++){lbl=$(lbls[k]);id=lbl.prop('for');if(!id||!lbl.prop('class')||!id.match(/^([a-z0-9-_]+)$/)){continue;}
elm=$('#'+id);if(elm.length&&!elm.prop('disabled')){requirements[id]={elm:elm,lbl:lbl};}}
return requirements;}
function _checkFields(form,requirements,only_check)
{var set_mark,elm,lbl,container,_regexp,_message;var message_set=false;$('.cm-failed-field',form).removeClass('cm-failed-field');errors={};for(var elm_id in requirements){set_mark=false;elm=requirements[elm_id].elm;lbl=requirements[elm_id].lbl;if(lbl.hasClass('cm-trim')){elm.val($.trim(elm.val()));}
if(lbl.hasClass('cm-email')){if($.is.email(elm.val())==false){if(lbl.hasClass('cm-required')||$.is.blank(elm.val())==false){_formMessage(_.tr('error_validator_email'),lbl);set_mark=true;}}}
if(lbl.hasClass('cm-color')){if($.is.color(elm.val())==false){if(lbl.hasClass('cm-required')||$.is.blank(elm.val())==false){_formMessage(_.tr('error_validator_color'),lbl);set_mark=true;}}}
if(lbl.hasClass('cm-phone')){if($.is.phone(elm.val())!=true){if(lbl.hasClass('cm-required')||$.is.blank(elm.val())==false){_formMessage(_.tr('error_validator_phone'),lbl);set_mark=true;}}}
if(lbl.hasClass('cm-zipcode')){var loc=lbl.prop('class').match(/cm-location-([^\s]+)/i)[1]||'';var country=$('.cm-country'+(loc?'.cm-location-'+loc:''),form).val();var val=elm.val();if(zipcode_regexp[country]&&!elm.val().match(zipcode_regexp[country]['regexp'])){if(lbl.hasClass('cm-required')||$.is.blank(elm.val())==false){_formMessage(_.tr('error_validator_zipcode'),lbl,null,zipcode_regexp[country]['format']);set_mark=true;}}}
if(lbl.hasClass('cm-integer')){if($.is.integer(elm.val())==false){if(lbl.hasClass('cm-required')||$.is.blank(elm.val())==false){_formMessage(_.tr('error_validator_integer'),lbl);set_mark=true;}}}
if(lbl.hasClass('cm-multiple')&&elm.prop('length')==0){_formMessage(_.tr('error_validator_multiple'),lbl);set_mark=true;}
if(lbl.hasClass('cm-password')){var pair_lbl=$('label.cm-password',form).not(lbl);var pair_elm=$('#'+pair_lbl.prop('for'));if(elm.val()&&elm.val()!=pair_elm.val()){_formMessage(_.tr('error_validator_password'),lbl,pair_lbl);set_mark=true;}}
if(validators){for(var i=0;i<validators.length;i++){if(lbl.hasClass(validators[i].class_name)){result=validators[i].func(elm_id,elm,lbl);if(result!=true){_formMessage(validators[i].message,lbl);set_mark=true;}}}}
if(lbl.hasClass('cm-regexp')){_regexp=null;_message=null;if(elm_id in regexp){_regexp=regexp[elm_id]['regexp'];_message=regexp[elm_id]['message']?regexp[elm_id]['message']:_.tr('error_validator_message');}else if(lbl.data('caRegexp')){_regexp=lbl.data('caRegexp');_message=lbl.data('caMessage');}
if(_regexp&&!elm.ceHint('is_hint')){var val=elm.val();var expr=new RegExp(_regexp);var result=expr.test(val);if(!result&&!(!lbl.hasClass('cm-required')&&elm.val()=='')){_formMessage(_message,lbl);set_mark=true;}}}
if(lbl.hasClass('cm-multiple-checkboxes')||lbl.hasClass('cm-multiple-radios')){if(lbl.hasClass('cm-required')){var el_filter=lbl.hasClass('cm-multiple-checkboxes')?'[type=checkbox]':'[type=radio]';if($(el_filter+':not(:disabled)',elm).length&&!$(el_filter+':checked',elm).length){_formMessage(_.tr('error_validator_required'),lbl);set_mark=true;}}}
if(lbl.hasClass('cm-all')){if(elm.prop('length')==0&&lbl.hasClass('cm-required')){_formMessage(_.tr('error_validator_multiple'),lbl);set_mark=true;}else{$('option',elm).prop('selected',true);}}else{if(elm.is(':input')){if(lbl.hasClass('cm-required')&&((elm.is('[type=checkbox]')&&!elm.prop('checked'))||$.is.blank(elm.val())==true||elm.ceHint('is_hint'))){_formMessage(_.tr('error_validator_required'),lbl);set_mark=true;}}}
if(lbl.hasClass('cm-required')&&elm.is(':disabled')){_formMessage(_.tr('error_validator_required'),lbl);set_mark=true;}
container=elm.closest('.cm-field-container');if(container.length){elm=container;}
if(!only_check){$('[id="'+elm_id+'_error_message"].help-inline',elm.parent()).remove();if(set_mark==true){lbl.parent().addClass('error');elm.addClass('cm-failed-field');lbl.addClass('cm-failed-label');if(!elm.hasClass('cm-no-failed-msg')){elm.after('<span id="'+elm_id+'_error_message" class="help-inline">'+_getMessage(elm_id)+'</span>');}
if(!message_set){$.scrollToElm(elm);message_set=true;}
var dlg=$.ceDialog('get_last');var dlg_target=$('.cm-dialog-auto-size[data-ca-target-id="'+dlg.attr('id')+'"]');if(dlg_target.length){dlg.ceDialog('reload');}
if($.fn.ceSidebar){var $sidebar=elm.closest('.cm-sidebar');if($sidebar.length){$sidebar.ceSidebar('open');}}}else{lbl.parent().removeClass('error');elm.removeClass('cm-failed-field');lbl.removeClass('cm-failed-label');}}else{if(set_mark){message_set=true;}}}
return!message_set;}
function _disableEmptyFields(form)
{var selector=[];if(form.hasClass('cm-disable-empty')){selector.push('input[type=text]');}
if(form.hasClass('cm-disable-empty-files')){selector.push('input[type=file]');$('input[type=file][data-ca-empty-file=""]',form).prop('disabled',true);}
if(selector.length){$(selector.join(','),form).each(function(){var self=$(this);if(self.val()==''){self.prop('disabled',true);self.addClass('cm-disabled')}});}}
function _check(form,params)
{var form_result=true;var check_fields_result=true;var h;params=params||{};params.only_check=params.only_check||false;if(!clicked_elm){if($('[type=submit]',form).length){clicked_elm=$('[type=submit]:first',form);}else if($('input[type=image]',form).length){clicked_elm=$('input[type=image]:first',form);}}
if(!clicked_elm.hasClass('cm-skip-validation')){var requirements=_fillRequirements(form,clicked_elm.data('caCheckFilter'));if($.ceEvent('trigger','ce.formpre_'+form.prop('name'),[form,clicked_elm])===false){form_result=false;}
check_fields_result=_checkFields(form,requirements,params.only_check);}
if(params.only_check){return check_fields_result&&form_result;}
if(check_fields_result&&form_result){_disableEmptyFields(form);form.find('.cm-numeric').each(function(){var val=$(this).autoNumeric('get');$(this).prop('value',val);});h=clicked_elm.data('original_element')?clicked_elm.data('original_element'):clicked_elm;if(h.data('clicked')==true){return false;}
h.data('clicked',true);if((form.hasClass('cm-ajax')||clicked_elm.hasClass('cm-ajax'))&&!clicked_elm.hasClass('cm-no-ajax')){$.ceEvent('one','ce.ajaxdone',function(){h.data('clicked',false);});}
if(clicked_elm.hasClass('cm-comet')){$.ceEvent('one','ce.cometdone',function(){h.data('clicked',false);});}
if(clicked_elm.hasClass('cm-new-window')){form.prop('target','_blank');setTimeout(function(){h.data('clicked',false);},1000);return true;}else if(clicked_elm.hasClass('cm-parent-window')){form.prop('target','_parent');return true;}else{form.prop('target','_self');}
if($.ceEvent('trigger','ce.formpost_'+form.prop('name'),[form,clicked_elm])===false){form_result=false;}
if(clicked_elm.closest('.cm-dialog-closer').length){$.ceDialog('get_last').ceDialog('close');}
if((form.hasClass('cm-ajax')||clicked_elm.hasClass('cm-ajax'))&&!clicked_elm.hasClass('cm-no-ajax')){var collection=form.add(clicked_elm);if(collection.hasClass('cm-form-dialog-closer')||collection.hasClass('cm-form-dialog-opener')){$.ceEvent('one','ce.formajaxpost_'+form.prop('name'),function(response_data,params){if(response_data.failed_request){return false;}
if(collection.hasClass('cm-form-dialog-closer')){if(_.area=="C"){$.ceDialog('get_last').ceDialog('close');}else if(_.area=="A"){$.popupStack.last_close();}}
if(collection.hasClass('cm-form-dialog-opener')){var _id=form.find('input[name=result_ids]').val();if(_id&&typeof(response_data.html)!=="undefined"){$('#'+_id).ceDialog('open',$.ceDialog('get_params',form));}}});}
form.find('.cm-wysiwyg').each(function(){$.ceEditor('updateTextFields',$(this));});result=$.ceAjax('submitForm',form,clicked_elm);var dialogs=collection.find('.cm-dialog-opener');if(dialogs.length){dialogs.each(function(){if($(this).attr('href')){var container='#'+$(this).data('caTargetId');$(container).ceDialog('destroy');$(container).find('.object-container').remove();$.popupStack.remove(container);}});}
return result;}
if(clicked_elm.hasClass('cm-no-ajax')){$('input[name=is_ajax]',form).remove();}
if(_.embedded&&form_result==true&&!$.externalLink(form.prop('action'))){form.append('<input type="hidden" name="result_ids" value="'+_.container+'" />');clicked_elm.data('caScroll',_.container);return $.ceAjax('submitForm',form,clicked_elm);}
if($.ceEvent('trigger','ce.form.beforeSubmit',[form,clicked_elm,form_result])===false){form_result=false;}
if(form_result==false){h.data('clicked',false);}
return form_result;}else if(check_fields_result==false){var hidden_tab=$('.cm-failed-field',form).parents('[id^="content_"]:hidden');if(hidden_tab.length&&$('.cm-failed-field',form).length==$('.cm-failed-field',hidden_tab).length){$('#'+hidden_tab.prop('id').str_replace('content_','')).click();}}
return false;}
function _formMessage(msg,field,field2,extra)
{var id=field.prop('for');if(errors[id]){return false;}
errors[id]=[];msg=msg.str_replace('[field]',_fieldTitle(field));if(field2){msg=msg.str_replace('[field2]',_fieldTitle(field2));}
if(extra){msg=msg.str_replace('[extra]',extra);}
errors[id].push(msg);};function _fieldTitle(field)
{return field.text().replace(/(\s*\(\?\))?:\s*$/,'');}
function _getMessage(id)
{return'<p>'+errors[id].join('</p><p>')+'</p>';};var methods={init:function(){var $form=$(this);$form.on('submit',function(e){return _check($form);})},setClicked:function(elm){clicked_elm=elm;},check:function(only_check){var form=$(this);if(typeof only_check==='undefined'){only_check=true;}
return _check(form,{only_check:only_check});}};$.fn.ceFormValidator=function(method){var args=arguments;var result;$(this).each(function(i,elm){var errors={};if(methods[method]){result=methods[method].apply(this,Array.prototype.slice.call(args,1));}else if(typeof method==='object'||!method){result=methods.init.apply(this,args);}else{$.error('ty.formvalidator: method '+method+' does not exist');}});return result;};$.ceFormValidator=function(action,params){params=params||{};if(action=='setZipcode'){zipcode_regexp=params;}else if(action=='setRegexp'){if('console'in window){console.log('This method is deprecated, use data-attributes "data-ca-regexp" and "data-ca-message" instead');}
regexp=$.extend(regexp,params);}else if(action=='registerValidator'){validators.push(params);}else if(action=='check'){if(params.form){if(typeof params.only_check==='undefined'){params.only_check=true;}
return methods.check.apply(params.form,[params.only_check]);}}}})($);(function($){var options={};var init=false;function _rebuildStates(section,elm)
{elm=elm||$('.cm-state.cm-location-'+section).prop('id');var sbox=$('#'+elm).is('select')?$('#'+elm):$('#'+elm+'_d');var inp=$('#'+elm).is('input')?$('#'+elm):$('#'+elm+'_d');var default_state=inp.val();var cntr=$('.cm-country.cm-location-'+section);var cntr_disabled;if(cntr.length){cntr_disabled=cntr.prop('disabled');}else{cntr_disabled=sbox.prop('disabled');}
var country_code=(cntr.length)?cntr.val():options.default_country;var tag_switched=false;var pkey='';sbox.prop('id',elm).prop('disabled',false).removeClass('hidden cm-skip-avail-switch');inp.prop('id',elm+'_d').prop('disabled',true).addClass('hidden cm-skip-avail-switch').val('');if(!inp.hasClass('disabled')){sbox.removeClass('disabled');}
if(options.states&&options.states[country_code]){sbox.prop('length',1);for(var i=0;i<options.states[country_code].length;i++){sbox.append('<option value="'+options.states[country_code][i]['code']+'"'+(options.states[country_code][i]['code']==default_state?' selected':'')+'>'+options.states[country_code][i]['state']+'</option>');}
sbox.prop('id',elm).prop('disabled',false).removeClass('cm-skip-avail-switch');inp.prop('id',elm+'_d').prop('disabled',true).addClass('cm-skip-avail-switch');if(!inp.hasClass('disabled')){sbox.removeClass('disabled');}}else{sbox.prop('id',elm+'_d').prop('disabled',true).addClass('hidden cm-skip-avail-switch');inp.prop('id',elm).prop('disabled',false).removeClass('hidden cm-skip-avail-switch').val(default_state);if(!sbox.hasClass('disabled')){inp.removeClass('disabled');}}
if(cntr_disabled==true){sbox.prop('disabled',true);inp.prop('disabled',true);}}
function _rebuildStatesInLocation(){var location_elm=$(this).prop('class').match(/cm-location-([^\s]+)/i);if(location_elm){_rebuildStates(location_elm[1],$('.cm-state.cm-location-'+location_elm[1]).not(':disabled').prop('id'));}}
var methods={init:function(){if($(this).hasClass('cm-country')){if(init==false){$(_.doc).on('change','select.cm-country',_rebuildStatesInLocation);init=true;}
$(this).trigger('change');}else{_rebuildStatesInLocation.call(this);}}}
$.fn.ceRebuildStates=function(method){var args=arguments;return $(this).each(function(i,elm){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(args,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,args);}else{$.error('ty.rebuildstates: method '+method+' does not exist');}});};$.ceRebuildStates=function(action,params){params=params||{};if(action=='init'){options=params;}}})($);(function($){var els=[],els_params={},$window=$(window);var getNodeSelector=function(el){var _el=el.get(0);return _el.parentNode.classList.value+'->'+_el.id;}
var methods={init:function(params){return this.each(function(){var $self=$(this),selector=getNodeSelector($self),isInitialised=(els.indexOf(selector)!==-1),timer;els_params[selector]=params||{top:$self.data('caTop')||$self.data('ceTop')||0,padding:$self.data('caPadding')||$self.data('cePadding')||0,screens:$self.data('caStickOnScreens')?$self.data('caStickOnScreens').split(','):undefined};var timerCleanup=function(){clearTimeout(timer);timer=undefined;}
var timerHandler=function(event){timerCleanup();var checkWindowSizes=true;var p=els_params[selector];if(p.screens){checkWindowSizes=$.matchScreenSize(p.screens);}
if(checkWindowSizes){var allowStick=$window.scrollTop()>=p.top;if(allowStick){var position='fixed';var top=p.padding+'px';}else{var position='';var top='';}
$self.toggleClass('cm-sticky-scrolled',allowStick);$self.css({position:position,top:top});}}
if(!isInitialised){els.push(selector);$window.scroll(function(event){if(typeof timer==typeof undefined){timer=setTimeout(timerHandler,10,event);}});}});}};$.fn.ceStickyScroll=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('ty.stickyScroll: method '+method+' does not exist');}};})($);(function($){var container;var timers={};var delay=0;function _duplicateNotification(key)
{var dups=$('div[data-ca-notification-key='+key+']');if(dups.length){if(!_addToDialog(dups)){dups.fadeTo('fast',0.5).fadeTo('fast',1).fadeTo('fast',0.5).fadeTo('fast',1);}
if(timers[key]){clearTimeout(timers[key]);methods.close(dups,true);}
return true;}
return false;}
function _closeNotification(notification)
{if(notification.find('.cm-notification-close-ajax').length){$.ceAjax('request',fn_url('notifications.close?notification_id='+notification.data('caNotificationKey')),{hidden:true});}
notification.fadeOut('fast',function(){notification.remove();});if(notification.hasClass('cm-notification-content-extended')){var overlay=$('.ui-widget-overlay[data-ca-notification-key='+notification.data('caNotificationKey')+']');if(overlay.length){overlay.fadeOut('fast',function(){overlay.remove();});}}
if($(".ui-dialog").is(':visible')==false){$('html').removeClass('dialog-is-open');}}
function _processTranslation(text)
{if(_.live_editor_mode&&text.indexOf('[lang')!=-1){text='<var class="live-edit-wrap"><i class="cm-icon-live-edit icon-live-edit ty-icon-live-edit"></i><var class="cm-live-edit live-edit-item" data-ca-live-edit="langvar::'+text.substring(text.indexOf('=')+1,text.indexOf(']'))+'">'+text.substring(text.indexOf(']')+1,text.lastIndexOf('['))+'</var></var>';}
return text;}
function _pickFromDialog(event){var nt=$('.cm-notification-content',$(event.target));if(nt.length){if(!_addToDialog(nt)){container.append(nt);}}
return true;}
function _addToDialog(notification)
{var dlg=$.ceDialog('get_last');if(dlg.length){$('.object-container',dlg).prepend(notification);dlg.off('dialogclose',_pickFromDialog);dlg.on('dialogclose',_pickFromDialog);return true;}
return false;}
var methods={show:function(data,key)
{if(!key){key=$.crc32(data.message);}
if(typeof(data.message)=='undefined'){return false;}
if(_duplicateNotification(key)){return true;}
data.message=_processTranslation(data.message);data.title=_processTranslation(data.title);if(data.type=='I'){var w=$.getWindowSizes();$('.cm-notification-content.cm-notification-content-extended').each(function(){methods.close($(this),false);});$(_.body).append('<div class="ui-widget-overlay" style="z-index:1010" data-ca-notification-key="'+key+'"></div>');var notification=$('<div class="cm-notification-content cm-notification-content-extended notification-content-extended '+(data.message_state=="I"?' cm-auto-hide':'')+'" data-ca-notification-key="'+key+'">'+'<h1>'+data.title+'<span class="cm-notification-close close"></span></h1>'+'<div class="notification-body-extended">'+
data.message+'</div>'+'</div>');var notificationMaxHeight=w.view_height-300;$(notification).find('.cm-notification-max-height').css({'max-height':notificationMaxHeight});$(_.body).append(notification);notification.css('top',w.view_height / 2-(notification.height()/ 2));}else{var n_class='alert';var b_class='';if(data.type=='N'){n_class+=' alert-success';}else if(data.type=='W'){n_class+=' alert-warning';}else if(data.type=='S'){n_class+=' alert-info';}else{n_class+=' alert-error';}
if(data.message_state=='I'){n_class+=' cm-auto-hide';}else if(data.message_state=='S'){b_class+=' cm-notification-close-ajax';}
var notification=$('<div class="cm-notification-content notification-content '+n_class+'" data-ca-notification-key="'+key+'">'+'<button type="button" class="close cm-notification-close '+b_class+'" data-dismiss="alert">&times;</button>'+'<strong>'+data.title+'</strong>'+data.message+'</div>');if(!_addToDialog(notification)){container.append(notification);}}
$.ceEvent('trigger','ce.notificationshow',[notification]);if(data.message_state=='I'){methods.close(notification,true);}},showMany:function(data)
{for(var key in data){methods.show(data[key],key);}},closeAll:function()
{var notifications=container.find('.cm-notification-content');var dlg=$.ceDialog('get_last');if(dlg.length){notifications=notifications.add(dlg.find('.cm-notification-content'));}
notifications.each(function(){var self=$(this);if(!self.hasClass('cm-notification-close-ajax')){methods.close(self,false);}})},close:function(notification,delayed)
{if(delayed==true){if(delay===0){return true;}
timers[notification.data('caNotificationKey')]=setTimeout(function(){methods.close(notification,false);},delay);return true;}
_closeNotification(notification);},init:function()
{delay=_.notice_displaying_time*1000;container=$('.cm-notification-container');$(_.doc).on('click','.cm-notification-close',function(){methods.close($(this).parents('.cm-notification-content:first'),false);})
container.find('.cm-auto-hide').each(function(){methods.close($(this),true);});}};$.ceNotification=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{$.error('ty.notification: method '+method+' does not exist');}};}($));(function($){var handlers={};var methods={on:function(event,handler,one)
{one=one||false;if(!(event in handlers)){handlers[event]=[];}
handlers[event].push({handler:handler,one:one});},one:function(event,handler)
{methods.on(event,handler,true);},trigger:function(event,data)
{data=data||[];var result=true,_res;if(event in handlers){for(var i=0;i<handlers[event].length;i++){_res=handlers[event][i].handler.apply(handlers[event][i].handler,data);if(handlers[event][i].one){handlers[event].splice(i,1);i--;}
if(_res===false){result=false;break;}}}
return result;}};$.ceEvent=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{$.error('ty.event: method '+method+' does not exist');}};}($));(function($){var methods={_init:function(self){if(!self.data('codeEditor')){var editor=ace.edit(self.prop('id'));editor.session.setUseWrapMode(true);editor.session.setWrapLimitRange();editor.setFontSize("14px");editor.renderer.setShowPrintMargin(false);editor.getSession().on('change',function(e){self.addClass('cm-item-modified');});self.data('codeEditor',editor);}
return $(this);},init:function(mode){var self=$(this);methods._init(self);if(mode){self.data('codeEditor').getSession().setMode(mode);}
return $(this);},set_value:function(val,mode){var self=$(this);methods._init(self);if(mode==undefined){mode='ace/mode/html';}
self.data('codeEditor').getSession().setMode(mode);self.data('codeEditor').setValue(val);self.data('codeEditor').navigateLineStart();self.data('codeEditor').clearSelection();self.data('codeEditor').scrollToRow(0);return $(this);},set_show_gutter:function(value){$(this).data('codeEditor').renderer.setShowGutter(value);},value:function(){var self=$(this);methods._init(self);return self.data('codeEditor').getValue();},focus:function(){var self=$(this);var session=self.data('codeEditor').getSession();var count=session.getLength();self.data('codeEditor').focus();self.data('codeEditor').gotoLine(count,session.getLine(count-1).length);},setListener:function(event_name,callback){$(this).data('codeEditor').getSession().on(event_name,function(e){callback(e);});return $(this);}};$.fn.ceCodeEditor=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('ty.codeeditor: method '+method+' does not exist');}};})($);(function($){var plugin_name="ceObjectSelector",defaults={pageSize:10,enableSearch:true,closeOnSelect:true,loadViaAjax:false,dataUrl:null,enableImages:false,imageWidth:20,imageHeight:20,placeholder:null,allowClear:false,debug:false,autofocus:false,dropdownCssClass:'',delay:0};function ObjectSelector(element,options){this.$el=$(element);this.settings=$.extend({},defaults,options);this.init();}
$.extend(ObjectSelector.prototype,{init:function(){var data=this.$el.data();this.settings.placeholder=data.caPlaceholder||this.settings.placeholder;this.settings.pageSize=data.caPageSize||this.settings.pageSize;this.settings.dataUrl=data.caDataUrl||this.settings.dataUrl;this.settings.loadViaAjax=data.caLoadViaAjax===undefined?this.settings.loadViaAjax:data.caLoadViaAjax;this.settings.closeOnSelect=data.caCloseOnSelect===undefined?this.settings.closeOnSelect:data.caCloseOnSelect;this.settings.enableImages=data.caEnableImages===undefined?this.settings.enableImages:data.caEnableImages;this.settings.enableSearch=data.caEnableSearch===undefined?this.settings.enableSearch:data.caEnableSearch;this.settings.imageWidth=data.caImageWidth===undefined?this.settings.imageWidth:data.caImageWidth;this.settings.imageHeight=data.caImageHeight===undefined?this.settings.imageHeight:data.caImageHeight;this.settings.multiple=this.settings.multiple===undefined?this.$el.is('[multiple]'):this.settings.multiple;this.settings.debug=data.debug===undefined?this.settings.debug:data.caDebug;this.settings.allowClear=data.caAllowClear===undefined?this.settings.allowClear:data.caAllowClear;this.settings.autofocus=data.caAutofocus===undefined?this.settings.autofocus:data.caAutofocus;this.settings.dropdownCssClass=data.caDropdownCssClass||this.settings.dropdownCssClass;this.settings.delay=data.caAjaxDelay||this.settings.delay;this.settings.allowSorting=data.caAllowSorting||false;this.settings.escapeHtml=data.caEscapeHtml===undefined?true:data.caEscapeHtml;this.settings.addTemplateSelectionHook=data.caAddTemplateSelectionHook===undefined?false:data.caAddTemplateSelectionHook;this.settings.isRequired=data.caRequired===undefined?false:data.caRequired;this.settings.width=data.caSelectWidth===undefined?false:data.caSelectWidth;this.settings.repaintDropdownOnChange=data.caRepaintDropdownOnChange||false;this.initSelect2();},initSelect2:function(){var self=this,select2config={language:{'loadingMore':function(){return _.tr('loading');},'searching':function(){return _.tr('loading');},'errorLoading':function(){return _.tr('error');}},closeOnSelect:this.settings.closeOnSelect,placeholder:this.settings.placeholder,allowClear:this.settings.allowClear,multiple:this.settings.multiple,dropdownCssClass:this.settings.dropdownCssClass};if(this.settings.loadViaAjax&&this.settings.dataUrl!==null){select2config.ajax={url:this.settings.dataUrl,delay:this.settings.delay,data:function(params){var request={q:params.term,page:params.page||1,page_size:self.settings.pageSize};if(self.settings.enableImages){request.image_width=self.settings.imageWidth;request.image_height=self.settings.imageHeight;}
return request;},processResults:function(data,params){params.page=params.page||1;return{results:data.objects,pagination:{more:(params.page*self.settings.pageSize)<data.total_objects}};},transport:function(params,success,failure){params.callback=success;params.hidden=true;return $.ceAjax('request',params.url,params);}};}
if(!this.settings.escapeHtml){select2config.escapeMarkup=function(m){return m;};}
select2config.templateSelection=function(object,item_elm){object.context=object.text;$.ceEvent('trigger','ce.select_template_selection',[object,item_elm,self.$el]);return object.context;};if(this.settings.data){select2config.data=this.settings.data;}
var elm=this.$el;if(this.settings.enableImages){select2config.templateResult=function(object){object.context=object.text;$.ceEvent('trigger','ce.change_select_list',[object,elm]);if(!object.image_url){return $('<span>'+object.context+'</span>');}
return $('<img src="'+object.image_url+'" alt="'+object.text+'" /><span>'+object.context+'</span>');};}
if(!this.settings.enableSearch){select2config.minimumResultsForSearch=Infinity;}
if(this.settings.width){select2config.width=this.settings.width;}
if(this.settings.repaintDropdownOnChange){this.$el.on('select2:select select2:unselect',function(){var select2=$(this).data('select2');if(select2.isOpen()){select2.dropdown._positionDropdown();}});}
elm.select2(select2config);$.ceEvent('on','ce.window.resize',function(event,args){elm.parent().find('input.select2-search__field, .select2-container').css({width:'100%'});});if(this.settings.allowSorting){this.$el.select2Sortable();}
if(this.settings.autofocus){this.$el.select2('focus');}}});$.fn[plugin_name]=function(options){var self=this,createPluginInstances=function(){var MultipleSelection=$.fn.select2.amd.require('select2/selection/multiple'),SelectionSearch=$.fn.select2.amd.require('select2/selection/search'),base_bind=MultipleSelection.prototype.bind;MultipleSelection.prototype.bind=function(container,$container){this.$selection.on('click',function(e){if(!$(e.target).hasClass('select2-search__field')&&!$(e.target).hasClass('select2-selection__rendered')){e.stopImmediatePropagation();}});base_bind.apply(this,arguments);};SelectionSearch.prototype.searchRemoveChoice=function(){return false;};return self.each(function(){if($.data(this,"plugin_"+plugin_name)){var objectSelector=$.data(this,"plugin_"+plugin_name);objectSelector.settings=$.extend({},defaults,options);objectSelector.init();}else{$.data(this,"plugin_"+plugin_name,new ObjectSelector(this,options));}});};if(this.length){if($.fn.select2){return createPluginInstances();}else{$.getScript('js/lib/select2/select2.full.min.js',function(){createPluginInstances();});}}
return this;};})($);_.toNumeric=function(arg){var number=Number(String(arg).str_replace(',','.'));return isNaN(number)?0:number;};_.getFloatPrecision=function(x){return String(x).replace('.','').length-x.toFixed().length;};if(!_.embedded&&location.hash&&unescape(location.hash).indexOf('#!/')===0){var components=$.parseUrl(location.href)
var uri=$.ceHistory('parseHash',location.hash);if($.browser.msie&&$.browser.version>=9){$.redirect(components.protocol+'://'+components.host+uri);}else{$.redirect(components.protocol+'://'+components.host+components.directory+uri);}}
(function($){var methods={init:function(value){var elm=this.get(0);if(document.selection){elm.focus();var sel=document.selection.createRange();sel.text=value;elm.focus();}else if(elm.selectionStart||elm.selectionStart=='0'){var startPos=elm.selectionStart;var endPos=elm.selectionEnd;var scrollTop=elm.scrollTop;elm.value=elm.value.substring(0,startPos)+value+elm.value.substring(endPos,elm.value.length);elm.focus();elm.selectionStart=startPos+value.length;elm.selectionEnd=startPos+value.length;elm.scrollTop=scrollTop;}else{elm.value+=value;elm.focus();}}};$.fn.ceInsertAtCaret=function(){return methods.init.apply(this,arguments);};})($);}(Tygh,jQuery));function fn_print_r(value)
{fn_alert(fn_print_array(value));}
function fn_alert(msg,not_strip)
{msg=not_strip?msg:fn_strip_tags(msg);alert(msg);}
function fn_print_array(arr,level)
{var dumped_text="";if(!level){level=0;}
var level_padding="";for(var j=0;j<level+1;j++){level_padding+="    ";}
if(typeof(arr)=='object'){for(var item in arr){var value=arr[item];if(typeof(value)=='object'){dumped_text+=level_padding+"'"+item+"' ...\n";dumped_text+=fn_print_array(value,level+1);}else{dumped_text+=level_padding+"'"+item+"' => \""+value+"\"\n";}}}else{dumped_text=arr+" ("+typeof(arr)+")";}
return dumped_text;}
function fn_url(url)
{var index_url=Tygh.current_location+'/'+Tygh.index_script;var components=Tygh.$.parseUrl(url);if(url==''){url=index_url;}else if(components.protocol){if(Tygh.embedded){var s,spos;if(Tygh.facebook&&Tygh.facebook.url.indexOf(components.location)!=-1){s='&app_data=';}else if(Tygh.init_context==components.source.str_replace('#'+components.anchor,'')){s='#!';}
if(s){var q='';if((spos=url.indexOf(s))!=-1){q=decodeURIComponent(url.substr(spos+s.length)).replace('&amp;','&');}
url=Tygh.current_location+q;}}}else if(components.file!=Tygh.index_script){if(url.indexOf('?')==0){url=index_url+url;}else{url=index_url+'?dispatch='+url.replace('?','&');}}
return url;}
function fn_strip_tags(str)
{str=String(str).replace(/<.*?>/g,'');return str;}
function fn_reload_form(jelm)
{var form=jelm.parents('form');var container=form.parent();var submit_btn=form.find("input[type='submit']");if(!submit_btn.length){submit_btn=Tygh.$('[data-ca-target-form='+form.prop('name')+']');}
if(container.length&&submit_btn.length){var url=form.prop('action')+'?reload_form=1&'+submit_btn.prop('name');var data=form.serializeObject();var result_ids;if(data.result_ids!='undefined'){result_ids=data.result_ids;}else{result_ids=container.prop('id');}
Tygh.$.ceAjax('request',fn_url(url),{data:data,result_ids:result_ids});}}
function fn_get_listed_lang(langs)
{var $=Tygh.$;var check_langs=[Tygh.cart_language,Tygh.default_language,'en'];var lang='';if(langs.length){lang=langs[0];for(var i=0;i<check_langs.length;i++){if(Tygh.$.inArray(check_langs[i],langs)!=-1){lang=check_langs[i];break;}}}
return lang;}
function fn_query_remove(query,vars)
{if(typeof(vars)=='undefined'){return query;}
if(typeof vars=='string'){vars=[vars];}
var start=query;if(query.indexOf('?')>=0){start=query.substr(0,query.indexOf('?')+1);var search=query.substr(query.indexOf('?')+1);var srch_array=search.split("&");var temp_array=[];var concat=true;var amp='';for(var i=0;i<srch_array.length;i++){temp_array=srch_array[i].split("=");concat=true;for(var j=0;j<vars.length;j++){if(vars[j]==temp_array[0]||temp_array[0].indexOf(vars[j]+'[')!=-1){concat=false;break;}}
if(concat==true){start+=amp+temp_array[0]+'='+temp_array[1];}
amp='&';}}
return start;}
function fn_calculate_total_shipping(wrapper_id)
{var $=Tygh.$;wrapper_id=wrapper_id||'shipping_estimation';var parent=$('#'+wrapper_id);var radio=$('input[type=radio]:checked',parent);var params=[];$.each(radio,function(id,elm){params.push({name:elm.name,value:elm.value});});var url=fn_url('checkout.shipping_estimation.get_total');for(var i in params){url+='&'+params[i]['name']+'='+encodeURIComponent(params[i]['value']);}
var suffix=parent.find('input[name="suffix"]').first().val();$.ceAjax('request',url,{result_ids:'shipping_estimation_total'+suffix,data:{additional_id:parent.find('input[name="additional_id"]').first().val()},method:'post'});}
(function(_,$){var loadedScripts={};var sessionData={};(function($){var REQUEST_XML=1;var REQUEST_IFRAME=2;var REQUEST_COMET=3;var REQUEST_JSONP_POST=5;var QUERIES_LIMIT=1;var queryStack=[];var activeQueries=0;var evalCache={};var responseCache={};var getScriptQueries=0;var oldjQuery={};var methods={request:function(url,params){params=params||{};params.method=params.method||'get';params.data=params.data||{};params.message=params.message||_.tr('loading');params.caching=params.caching||false;params.hidden=params.hidden||false;params.repeat_on_error=params.repeat_on_error||false;params.force_exec=params.force_exec||false;params.obj=params.obj||null;params.append=params.append||null;params.scroll=params.scroll||null;params.overlay=params.overlay||null;if(_.embedded){params.full_render=true;}
if(params.full_render){params.data.full_render=params.full_render;}
if(typeof(params.data.security_hash)=='undefined'&&typeof(_.security_hash)!='undefined'&&params.method.toLowerCase()=='post'){params.data.security_hash=_.security_hash;}
if(params.result_ids){params.data.result_ids=params.result_ids;}
if(params.skip_result_ids_check){params.data.skip_result_ids_check=params.skip_result_ids_check;}
if(activeQueries>=QUERIES_LIMIT){queryStack.unshift(function(){methods.request(url,params);});return true;}
if(params.hidden===false){$.toggleStatusBox('show',{overlay:params.overlay});}
var hash='';if(params.caching===true){hash=$.crc32(url+$.param(params.data));}
if(!hash||!responseCache[hash]){var saved_data={};var result_ids=(params.data.result_ids)?params.data.result_ids.split(','):[];if(result_ids.length>0){for(var j=0;j<result_ids.length;j++){var container=$('#'+result_ids[j]);if(container.hasClass('cm-save-fields')){saved_data[result_ids[j]]=$(':input:visible',container).serializeArray();}}
params.saved_data=saved_data;}
if(url){url=fn_query_remove(url,'result_ids');if(url.indexOf('://')==-1){url=_.current_location+'/'+url;}
if(params.obj&&params.obj.hasClass('cm-comet')){params.url=url+'&result_ids='+params.result_ids+'&is_ajax='+REQUEST_COMET;return transports.iframe(null,params,{is_comet:true});}else{activeQueries++;var data_type=(!$.support.cors&&url.indexOf('://'+window.location.hostname)==-1)?'jsonp':'json';if(!('is_ajax'in params.data)&&data_type=='json'){params.data.is_ajax=REQUEST_XML;}
if(sessionData.name&&url.indexOf(sessionData.name)==-1){params.data[sessionData.name]=localStorage.getItem(sessionData.name);}
var components=$.parseUrl(url);if(components.anchor){params.data.anchor=components.anchor;}
return $.ajax({type:params.method,url:url,dataType:data_type,cache:true,data:params.data,xhrFields:{withCredentials:true},success:function(data,textStatus){if(hash){responseCache[hash]=data;}
_response(data,params);},error:function(XMLHttpRequest,textStatus,errorThrown){if(params.repeat_on_error){params.repeat_on_error=false;methods.request(url,params);return false;}
$.toggleStatusBox('hide');if(params.hidden===false&&errorThrown){var err_msg=_.tr('error_ajax').str_replace('[error]',errorThrown);$.ceNotification('show',{type:'E',title:_.tr('error'),message:err_msg});}},complete:function(XMLHttpRequest,textStatus){activeQueries--;if(queryStack.length){var f=queryStack.shift();f();}}});}}}else if(hash&&responseCache[hash]){_response(responseCache[hash],params);}
return false;},submitForm:function(form,clicked_elm){if(activeQueries>=QUERIES_LIMIT){queryStack.unshift(function(){var submit_name=clicked_elm.attr('name'),submit_value=clicked_elm.val(),input;if(submit_name){input=$('<input>',{type:'hidden',value:submit_value,name:submit_name}).appendTo(form);}
if(methods.submitForm(form,clicked_elm)){form.get(0).submit();}
if(input){input.remove();}});return false;}
var params={form:form,obj:clicked_elm,scroll:clicked_elm.data('caScroll')||'',overlay:clicked_elm.data('caOverlay')||'',callback:'ce.formajaxpost_'+form.prop('name')};$.ceNotification('closeAll');$.toggleStatusBox('show',{overlay:params.overlay});var options=_getOptions(form,params);if(options.force_exec){params['force_exec']=true;}
if(sessionData.name){form.append('<input type="hidden" name="'+sessionData.name+'" value="'+localStorage.getItem(sessionData.name)+'">');}
if(options.full_render){form.append('<input type="hidden" name="full_render" value="Y">');}
form.append('<input type="hidden" name="is_ajax" value="'+(options.transport=='iframe'?(options.is_comet?REQUEST_COMET:REQUEST_IFRAME):(options.transport=='jsonpPOST'?REQUEST_JSONP_POST:REQUEST_XML))+'">');return transports[options.transport](form,params,options);},inProgress:function(){return activeQueries!==0;},clearCache:function(){responseCache={};return true;},response:function(response,params){return _response(response,params);}};var transports={iframe:function(form,params,options){var iframe=$('<iframe name="upload_iframe" src="javascript: false;" class="hidden"></iframe>').appendTo(_.body);activeQueries++;if(options.is_comet&&$('#comet_control:visible').length===0){$('#comet_container_controller').ceProgress('init');}
iframe.on('load',function(){var response={};var self=$(this);if(self.contents().text()!==null){eval('var response = '+self.contents().find('textarea').val());}
response=response||{};_response(response,params);if(options.is_comet&&jQuery.isEmptyObject(response)==false){if(typeof response.comet_is_finished==='undefined'){response.comet_is_finished=true;}
if(response.comet_is_finished){$('#comet_container_controller').ceProgress('finish');}
$.ceEvent('trigger','ce.cometdone',[form,params,options,response]);}
self.remove();activeQueries--;if(queryStack.length){var f=queryStack.shift();f();}});if(form){form.prop('target','upload_iframe');}else if(params.url){if(params.method=='post'){$('<form class="hidden" action="'+params.url+'" method="post" target="upload_iframe"><input type="hidden" name="security_hash" value="'+_.security_hash+'"></form>').appendTo(_.body).submit();}else{iframe.prop('src',params.url);}}
return true;},xml:function(form,params){var hash=$(':input',form).serializeObject();if(params.obj&&params.obj.prop('name')){hash[params.obj.prop('name')]=params.obj.val();}
params['method']=form.prop('method');params['data']=hash;params['result_ids']=form.data('caTargetId');methods.request(form.prop('action'),params);return false;},jsonpPOST:function(form,params,options){$.receiveMessage(function(e){if(options.is_comet){$('#comet_container_controller').ceProgress('finish');}
iframe.remove();_response($.parseJSON(e.data),params);activeQueries--;});var iframe=$('<iframe name="upload_iframe" src="javascript: false;" class="hidden"></iframe>').appendTo(_.body);activeQueries++;if(options.is_comet){$('#comet_container_controller').ceProgress('init');}
if(form){form.prop('target','upload_iframe');}else if(params.url){iframe.prop('src',params.url);}
return true;}};function _getOptions(obj,params){var is_comet=obj.hasClass('cm-comet')||(params.obj&&params.obj.hasClass('cm-comet'));var transport='xml';var uploads=is_comet;if(!is_comet&&obj.prop('enctype')=='multipart/form-data'){obj.find('input[type=file]').each(function(){if($(this).val()){uploads=true;}});}
if((!$.support.cors||(_.embedded&&uploads))&&obj.prop('action').indexOf('//')!=-1&&obj.prop('action').indexOf('//'+window.location.hostname)==-1&&obj.prop('method')=='post'){transport='jsonpPOST';}else if(uploads){transport='iframe';}
return{'full_render':obj.hasClass('cm-ajax-full-render'),'is_comet':is_comet,'force_exec':obj.hasClass('cm-ajax-force'),'transport':transport};}
function _response(response,params){params=params||{};params.force_exec=params.force_exec||false;params.pre_processing=params.pre_processing||{};var regex_all=new RegExp('<script[^>]*>([\u0001-\uFFFF]*?)</script>','img');var matches=[];var match='';var elm;var data=response||{};var inline_scripts=null;var scripts_to_load=[];var elms=[];var content;if(params.pre_processing&&typeof(params.pre_processing)=='function'){params.pre_processing(data,params);}
if(data.force_redirection){$.toggleStatusBox('hide');$.redirect(data.force_redirection);return true;}
if($.isEmptyObject(evalCache)){$('script:not([src])').each(function(){var self=$(this);evalCache[$.crc32(self.html())]=true;});}
if(data.html){for(var k in data.html){elm=$('#'+k);if(elm.length!=1||data.html[k]===null){continue;}
if(data.html[k].indexOf('<form')!=-1&&elm.parents('form').length){$(_.body).append(elm);}
matches=data.html[k].match(regex_all);content=matches?data.html[k].replace(regex_all,''):data.html[k];$('textarea.cm-wysiwyg',elm).each(function(){$(this).ceEditor('destroy');});$.ceDialog('destroy_loaded',{content:content});if(params.append){elm.append(content);}else{elm.html(content);}
if(typeof(params.saved_data)!='undefined'&&typeof(params.saved_data[k])!='undefined'){var elements=[];for(var i in params.saved_data[k]){elements[params.saved_data[k][i]['name']]=params.saved_data[k][i]['value'];}
$('input:visible, select:visible',elm).each(function(id,local_elm){var jelm=$(local_elm);if(typeof(elements[jelm.prop('name')])!='undefined'&&!jelm.parents().hasClass('cm-skip-save-fields')){if(jelm.prop('type')=='radio'){if(jelm.val()==elements[jelm.prop('name')]){jelm.prop('checked',true);}}else{jelm.val(elements[jelm.prop('name')]);}
jelm.trigger('change');}});}
if($.trim(elm.html())){elm.parents('.hidden.cm-hidden-wrapper').removeClass('hidden');}else{elm.parents('.cm-hidden-wrapper').addClass('hidden');}
var all_scripts=null,ext_scripts=null;if(matches){all_scripts=$(matches.join('\n'));ext_scripts=all_scripts.filter('[src]');inline_scripts=(inline_scripts)?inline_scripts.add(all_scripts.filter(':not([src])')):all_scripts.filter(':not([src])');if(ext_scripts.length){for(var i=0;i<ext_scripts.length;i++){var _src=ext_scripts.eq(i).prop('src');if(loadedScripts[_src]){if(ext_scripts.eq(i).hasClass('cm-ajax-force')){loadedScripts[_src]=null;}else{continue;}}
scripts_to_load.push($.getScript(_src));}}}
elms.push(elm);}
if($.ceDialog('inside_dialog',{jelm:elm})){$.ceDialog('reload_parent',{jelm:elm});}
if(response.title){$(document).prop('title',response.title);}}
var done_event=function(){$.ceEvent('trigger','ce.ajaxdone',[elms,inline_scripts,params,data,response.text||'']);};if(scripts_to_load.length){$.when.apply(null,scripts_to_load).then(done_event);}else{done_event();}}
var ajax=$.ajax;$.ajax=function(origSettings){if(origSettings.dataType&&origSettings.dataType=='script'){var _src=origSettings.url;if(loadedScripts[_src]){return false;}
loadedScripts[origSettings.url]=true;}
return ajax(origSettings);};$.getScript=function(url,callback){url=(url.indexOf('//')==-1)?_.current_location+'/'+url:url;if(_.otherjQ&&getScriptQueries===0){oldjQuery=jQuery;jQuery=_.$;}
getScriptQueries++;return $.ajax({type:"GET",url:url,success:function(data,textStatus,jqxhr){getScriptQueries--;if(_.otherjQ&&getScriptQueries===0){_.$=jQuery;jQuery=oldjQuery;}
if(callback){callback(data,textStatus,jqxhr);}},dataType:"script",cache:true});};$.ceEvent('on','ce.ajaxdone',function(elms,scripts,params,response_data,response_text){var i;if(_.embedded&&response_data.language_changed){_.embedded=false;$.redirect(response_data.current_url,false);window.location.reload(true);return;}
if(params.on_ajax_done&&typeof(params.on_ajax_done)=='function'){params.on_ajax_done(response_data,params,response_text);}
if(scripts){for(i=0;i<scripts.length;i++){var _hash=$.crc32(scripts.eq(i).html());if(!evalCache[_hash]||params.force_exec||scripts.eq(i).hasClass('cm-ajax-force')){$.globalEval(scripts.eq(i).html());evalCache[_hash]=true;}}}
if(response_data.debug_info){console.log(response_data.debug_info);}
var link_history=(params.save_history&&(!params.obj||(params.obj&&$.ceDialog('inside_dialog',{jelm:params.obj})===false)));if(response_data.session_data){sessionData=response_data.session_data;localStorage.setItem(sessionData.name,sessionData.id);}
if(response_data.current_url){var current_url=decodeURIComponent(response_data.current_url);if(!params.skip_history&&(_.embedded||link_history)){var _params=params;if(!link_history){_params.result_ids=_.container;}
if(response_data.anchor){current_url+='#'+response_data.anchor;}
$.ceHistory('load',current_url,_params,true);_.current_url=current_url;}
if(response_data.anchor){params.scroll=response_data.anchor;_.anchor='#'+response_data.anchor;}}
for(i=0;i<elms.length;i++){$.commonInit(elms[i]);}
if(params.form){$('input[name=is_ajax]',params.form).remove();$('input[name=full_render]',params.form).remove();if(params.form.hasClass('cm-disable-empty')||params.form.hasClass('cm-disable-empty-files')){$('input.cm-disabled',params.form).prop('disabled',false).removeClass('cm-disabled');}}
if(params.callback&&$.isFunction(params.callback)){params.callback(response_data,params,response_text);}else{$.ceEvent('trigger',params.callback,[response_data,params,response_text]);}
if(!params.keep_status_box){$.toggleStatusBox('hide');}
if(params.scroll){if(!_.scrolling){$.scrollToElm(params.scroll);}}
if(response_data.notifications){$.ceNotification('showMany',response_data.notifications);}});$.ceAjax=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('ty.ajax: method '+method+' does not exist');}};})($);$(document).ready(function(){$('script').each(function(){var _src=$(this).prop('src');if(_src){loadedScripts[_src]=true;}});if(typeof(ajax_callback_data)!='undefined'&&ajax_callback_data){$.globalEval(ajax_callback_data);ajax_callback_data=false;}});}(Tygh,Tygh.$));(function(_,$){var locationWrapper={put:function(hash,win){(win||window).location.hash=this.encoder(hash);},get:function(win){var hash=((win||window).location.hash).replace(/^#/,'');try{return decodeURIComponent(hash);}
catch(error){return hash;}},encoder:encodeURIComponent};var historyState={storage:null,first:'',put:function(hash,params){if(!this.storage){this.storage={};this.first=hash;}
this.storage[hash]=params;},get:function(hash){if(hash in this.storage){return this.storage[hash];}
return{};}};function initObjects(options){options=$.extend({unescape:false},options||{});locationWrapper.encoder=encoder(options.unescape);function encoder(unescape_){if(unescape_===true){return function(hash){return hash;};}
if(typeof unescape_=="string"&&(unescape_=partialDecoder(unescape_.split("")))||typeof unescape_=="function"){return function(hash){return unescape_(encodeURIComponent(hash));};}
return encodeURIComponent;}
function partialDecoder(chars){var re=new RegExp($.map(chars,encodeURIComponent).join("|"),"ig");return function(enc){return enc.replace(re,decodeURIComponent);};}}
var implementations={};implementations.base={callback:undefined,type:undefined,check:function(){},load:function(hash){},init:function(callback,options){initObjects(options);self.callback=callback;self._options=options;self._init();},_init:function(){},_options:{}};implementations.hashchangeEvent={_skip:false,_init:function(){$(window).bind('hashchange',function(){if(self._skip===true){self._skip=false;return;}
self.check();});},check:function(){var hash=locationWrapper.get()?locationWrapper.get():historyState.first;self.callback(hash,historyState.get(hash));},load:function(hash,params){var current_hash=locationWrapper.get()?locationWrapper.get():historyState.first;historyState.put(hash,params);if(hash!=current_hash){self._skip=true;}
locationWrapper.put(hash);},reload:function(hash,params){historyState.put(hash,params);}};implementations.HTML5={_init:function(){$(window).bind('popstate',self.check);},check:function(evt){var state=evt.originalEvent.state;self.callback(state?'#!/'+document.location:'',state);},load:function(hash,params){window.history.pushState(params,null,_.current_location+'/'+hash.replace(/^\!\//,''));},reload:function(hash,params){window.history.replaceState(params,null,_.current_location+'/'+hash.replace(/^\!\//,''));}};var self=$.extend({},implementations.base);if(!_.embedded&&"pushState"in window.history){self.type='HTML5';}else if("onhashchange"in window){self.type='hashchangeEvent';}
if(self.type){$.extend(self,implementations[self.type]);$.history=self;}})(Tygh,Tygh.$);(function(factory){if(typeof define==="function"&&define.noamd){define(["jquery"],factory);}else if(typeof module==="object"&&module.exports){module.exports=factory(require("jquery"));}else{factory(window.jQuery);}}(function($){"use strict";function getElementSelection(that){var position={};if(that.selectionStart===undefined){that.focus();var select=document.selection.createRange();position.length=select.text.length;select.moveStart('character',-that.value.length);position.end=select.text.length;position.start=position.end-position.length;}else{position.start=that.selectionStart;position.end=that.selectionEnd;position.length=position.end-position.start;}
return position;}
function setElementSelection(that,start,end){if(that.selectionStart===undefined){that.focus();var r=that.createTextRange();r.collapse(true);r.moveEnd('character',end);r.moveStart('character',start);r.select();}else{that.selectionStart=start;that.selectionEnd=end;}}
function runCallbacks($this,settings){$.each(settings,function(k,val){if(typeof val==='function'){settings[k]=val($this,settings,k);}else if(typeof $this.autoNumeric[val]==='function'){settings[k]=$this.autoNumeric[val]($this,settings,k);}});}
function convertKeyToNumber(settings,key){if(typeof(settings[key])==='string'){settings[key]*=1;}}
function autoCode($this,settings){runCallbacks($this,settings);settings.tagList=['b','caption','cite','code','dd','del','div','dfn','dt','em','h1','h2','h3','h4','h5','h6','ins','kdb','label','li','output','p','q','s','sample','span','strong','td','th','u','var'];var vmax=settings.vMax.toString().split('.'),vmin=(!settings.vMin&&settings.vMin!==0)?[]:settings.vMin.toString().split('.');convertKeyToNumber(settings,'vMax');convertKeyToNumber(settings,'vMin');convertKeyToNumber(settings,'mDec');settings.mDec=(settings.mRound==='CHF')?'2':settings.mDec;settings.allowLeading=true;settings.aNeg=settings.vMin<0?'-':'';vmax[0]=vmax[0].replace('-','');vmin[0]=vmin[0].replace('-','');settings.mInt=Math.max(vmax[0].length,vmin[0].length,1);if(settings.mDec===null){var vmaxLength=0,vminLength=0;if(vmax[1]){vmaxLength=vmax[1].length;}
if(vmin[1]){vminLength=vmin[1].length;}
settings.mDec=Math.max(vmaxLength,vminLength);}
if(settings.altDec===null&&settings.mDec>0){if(settings.aDec==='.'&&settings.aSep!==','){settings.altDec=',';}else if(settings.aDec===','&&settings.aSep!=='.'){settings.altDec='.';}}
var aNegReg=settings.aNeg?'([-\\'+settings.aNeg+']?)':'(-?)';settings.aNegRegAutoStrip=aNegReg;settings.skipFirstAutoStrip=new RegExp(aNegReg+'[^-'+(settings.aNeg?'\\'+settings.aNeg:'')+'\\'+settings.aDec+'\\d]'+'.*?(\\d|\\'+settings.aDec+'\\d)');settings.skipLastAutoStrip=new RegExp('(\\d\\'+settings.aDec+'?)[^\\'+settings.aDec+'\\d]\\D*$');var allowed='-'+settings.aNum+'\\'+settings.aDec;settings.allowedAutoStrip=new RegExp('[^'+allowed+']','gi');settings.numRegAutoStrip=new RegExp(aNegReg+'(?:\\'+settings.aDec+'?(\\d+\\'+settings.aDec+'\\d+)|(\\d*(?:\\'+settings.aDec+'\\d*)?))');return settings;}
function autoStrip(s,settings,strip_zero){if(settings.aSign){while(s.indexOf(settings.aSign)>-1){s=s.replace(settings.aSign,'');}}
s=s.replace(settings.skipFirstAutoStrip,'$1$2');s=s.replace(settings.skipLastAutoStrip,'$1');s=s.replace(settings.allowedAutoStrip,'');if(settings.altDec){s=s.replace(settings.altDec,settings.aDec);}
var m=s.match(settings.numRegAutoStrip);s=m?[m[1],m[2],m[3]].join(''):'';if((settings.lZero==='allow'||settings.lZero==='keep')&&strip_zero!=='strip'){var parts=[],nSign='';parts=s.split(settings.aDec);if(parts[0].indexOf('-')!==-1){nSign='-';parts[0]=parts[0].replace('-','');}
if(parts[0].length>settings.mInt&&parts[0].charAt(0)==='0'){parts[0]=parts[0].slice(1);}
s=nSign+parts.join(settings.aDec);}
if((strip_zero&&settings.lZero==='deny')||(strip_zero&&settings.lZero==='allow'&&settings.allowLeading===false)){var strip_reg='^'+settings.aNegRegAutoStrip+'0*(\\d'+(strip_zero==='leading'?')':'|$)');strip_reg=new RegExp(strip_reg);s=s.replace(strip_reg,'$1$2');}
return s;}
function negativeBracket(s,settings){if(settings.pSign==='p'){var brackets=settings.nBracket.split(',');if(!settings.hasFocus&&!settings.removeBrackets){s=s.replace(settings.aNeg,'');s=brackets[0]+s+brackets[1];}else if((settings.hasFocus&&s.charAt(0)===brackets[0])||(settings.removeBrackets&&s.charAt(0)===brackets[0])){s=s.replace(brackets[0],settings.aNeg);s=s.replace(brackets[1],'');}}
return s;}
function checkValue(value,settings){if(value){var checkSmall=+value;if(checkSmall<0.000001&&checkSmall>-1){value=+value;if(value<0.000001&&value>0){value=(value+10).toString();value=value.substring(1);}
if(value<0&&value>-1){value=(value-10).toString();value='-'+value.substring(2);}
value=value.toString();}else{var parts=value.split('.');if(parts[1]!==undefined){if(+parts[1]===0){value=parts[0];}else{parts[1]=parts[1].replace(/0*$/,'');value=parts.join('.');}}}}
return(settings.lZero==='keep')?value:value.replace(/^0*(\d)/,'$1');}
function fixNumber(s,aDec,aNeg){if(aDec&&aDec!=='.'){s=s.replace(aDec,'.');}
if(aNeg&&aNeg!=='-'){s=s.replace(aNeg,'-');}
if(!s.match(/\d/)){s+='0';}
return s;}
function presentNumber(s,aDec,aNeg){if(aNeg&&aNeg!=='-'){s=s.replace('-',aNeg);}
if(aDec&&aDec!=='.'){s=s.replace('.',aDec);}
return s;}
function checkEmpty(iv,settings,signOnEmpty){if(iv===''||iv===settings.aNeg){if(settings.wEmpty==='zero'){return iv+'0';}
if(settings.wEmpty==='sign'||signOnEmpty){return iv+settings.aSign;}
return iv;}
return null;}
function autoGroup(iv,settings){iv=autoStrip(iv,settings);var testNeg=iv.replace(',','.'),empty=checkEmpty(iv,settings,true);if(empty!==null){return empty;}
var digitalGroup='';if(settings.dGroup===2){digitalGroup=/(\d)((\d)(\d{2}?)+)$/;}else if(settings.dGroup===4){digitalGroup=/(\d)((\d{4}?)+)$/;}else{digitalGroup=/(\d)((\d{3}?)+)$/;}
var ivSplit=iv.split(settings.aDec);if(settings.altDec&&ivSplit.length===1){ivSplit=iv.split(settings.altDec);}
var s=ivSplit[0];if(settings.aSep){while(digitalGroup.test(s)){s=s.replace(digitalGroup,'$1'+settings.aSep+'$2');}}
if(settings.mDec!==0&&ivSplit.length>1){if(ivSplit[1].length>settings.mDec){ivSplit[1]=ivSplit[1].substring(0,settings.mDec);}
iv=s+settings.aDec+ivSplit[1];}else{iv=s;}
if(settings.aSign){var has_aNeg=iv.indexOf(settings.aNeg)!==-1;iv=iv.replace(settings.aNeg,'');iv=settings.pSign==='p'?settings.aSign+iv:iv+settings.aSign;if(has_aNeg){iv=settings.aNeg+iv;}}
if(testNeg<0&&settings.nBracket!==null){iv=negativeBracket(iv,settings);}
return iv;}
function autoRound(iv,settings){iv=(iv==='')?'0':iv.toString();convertKeyToNumber(settings,'mDec');if(settings.mRound==='CHF'){iv=(Math.round(iv*20)/ 20).toString();}
var ivRounded='',i=0,nSign='',rDec=(typeof(settings.aPad)==='boolean'||settings.aPad===null)?(settings.aPad?settings.mDec:0):+settings.aPad;var truncateZeros=function(ivRounded){var regex=(rDec===0)?(/(\.(?:\d*[1-9])?)0*$/):rDec===1?(/(\.\d(?:\d*[1-9])?)0*$/):new RegExp('(\\.\\d{'+rDec+'}(?:\\d*[1-9])?)0*$');ivRounded=ivRounded.replace(regex,'$1');if(rDec===0){ivRounded=ivRounded.replace(/\.$/,'');}
return ivRounded;};if(iv.charAt(0)==='-'){nSign='-';iv=iv.replace('-','');}
if(!iv.match(/^\d/)){iv='0'+iv;}
if(nSign==='-'&&+iv===0){nSign='';}
if((+iv>0&&settings.lZero!=='keep')||(iv.length>0&&settings.lZero==='allow')){iv=iv.replace(/^0*(\d)/,'$1');}
var dPos=iv.lastIndexOf('.'),vdPos=(dPos===-1)?iv.length-1:dPos,cDec=(iv.length-1)-vdPos;if(cDec<=settings.mDec){ivRounded=iv;if(cDec<rDec){if(dPos===-1){ivRounded+=settings.aDec;}
var zeros='000000';while(cDec<rDec){zeros=zeros.substring(0,rDec-cDec);ivRounded+=zeros;cDec+=zeros.length;}}else if(cDec>rDec){ivRounded=truncateZeros(ivRounded);}else if(cDec===0&&rDec===0){ivRounded=ivRounded.replace(/\.$/,'');}
if(settings.mRound!=='CHF'){return(+ivRounded===0)?ivRounded:nSign+ivRounded;}
if(settings.mRound==='CHF'){dPos=ivRounded.lastIndexOf('.');iv=ivRounded;}}
var rLength=dPos+settings.mDec,tRound=+iv.charAt(rLength+1),ivArray=iv.substring(0,rLength+1).split(''),odd=(iv.charAt(rLength)==='.')?(iv.charAt(rLength-1)%2):(iv.charAt(rLength)%2),onePass=true;if(odd!==1){odd=(odd===0&&(iv.substring(rLength+2,iv.length)>0))?1:0;}
if((tRound>4&&settings.mRound==='S')||(tRound>4&&settings.mRound==='A'&&nSign==='')||(tRound>5&&settings.mRound==='A'&&nSign==='-')||(tRound>5&&settings.mRound==='s')||(tRound>5&&settings.mRound==='a'&&nSign==='')||(tRound>4&&settings.mRound==='a'&&nSign==='-')||(tRound>5&&settings.mRound==='B')||(tRound===5&&settings.mRound==='B'&&odd===1)||(tRound>0&&settings.mRound==='C'&&nSign==='')||(tRound>0&&settings.mRound==='F'&&nSign==='-')||(tRound>0&&settings.mRound==='U')||(settings.mRound==='CHF')){for(i=(ivArray.length-1);i>=0;i-=1){if(ivArray[i]!=='.'){if(settings.mRound==='CHF'&&ivArray[i]<=2&&onePass){ivArray[i]=0;onePass=false;break;}
if(settings.mRound==='CHF'&&ivArray[i]<=7&&onePass){ivArray[i]=5;onePass=false;break;}
if(settings.mRound==='CHF'&&onePass){ivArray[i]=10;onePass=false;}else{ivArray[i]=+ivArray[i]+1;}
if(ivArray[i]<10){break;}
if(i>0){ivArray[i]='0';}}}}
ivArray=ivArray.slice(0,rLength+1);ivRounded=truncateZeros(ivArray.join(''));return(+ivRounded===0)?ivRounded:nSign+ivRounded;}
function truncateDecimal(s,settings,paste){var aDec=settings.aDec,mDec=settings.mDec;s=(paste==='paste')?autoRound(s,settings):s;if(aDec&&mDec){var parts=s.split(aDec);if(parts[1]&&parts[1].length>mDec){if(mDec>0){parts[1]=parts[1].substring(0,mDec);s=parts.join(aDec);}else{s=parts[0];}}}
return s;}
function autoCheck(s,settings){s=autoStrip(s,settings);s=truncateDecimal(s,settings);s=fixNumber(s,settings.aDec,settings.aNeg);var value=+s;return value>=settings.vMin&&value<=settings.vMax;}
function AutoNumericHolder(that,settings){this.settings=settings;this.that=that;this.$that=$(that);this.formatted=false;this.settingsClone=autoCode(this.$that,this.settings);this.value=that.value;}
AutoNumericHolder.prototype={init:function(e){this.value=this.that.value;this.settingsClone=autoCode(this.$that,this.settings);this.ctrlKey=e.ctrlKey;this.cmdKey=e.metaKey;this.shiftKey=e.shiftKey;this.selection=getElementSelection(this.that);if(e.type==='keydown'||e.type==='keyup'){this.kdCode=e.keyCode;}
this.which=e.which;this.processed=false;this.formatted=false;},setSelection:function(start,end,setReal){start=Math.max(start,0);end=Math.min(end,this.that.value.length);this.selection={start:start,end:end,length:end-start};if(setReal===undefined||setReal){setElementSelection(this.that,start,end);}},setPosition:function(pos,setReal){this.setSelection(pos,pos,setReal);},getBeforeAfter:function(){var value=this.value,left=value.substring(0,this.selection.start),right=value.substring(this.selection.end,value.length);return[left,right];},getBeforeAfterStriped:function(){var parts=this.getBeforeAfter();parts[0]=autoStrip(parts[0],this.settingsClone);parts[1]=autoStrip(parts[1],this.settingsClone);return parts;},normalizeParts:function(left,right){var settingsClone=this.settingsClone;right=autoStrip(right,settingsClone);var strip=right.match(/^\d/)?true:'leading';left=autoStrip(left,settingsClone,strip);if((left===''||left===settingsClone.aNeg)&&settingsClone.lZero==='deny'){if(right>''){right=right.replace(/^0*(\d)/,'$1');}}
var new_value=left+right;if(settingsClone.aDec){var m=new_value.match(new RegExp('^'+settingsClone.aNegRegAutoStrip+'\\'+settingsClone.aDec));if(m){left=left.replace(m[1],m[1]+'0');new_value=left+right;}}
if(settingsClone.wEmpty==='zero'&&(new_value===settingsClone.aNeg||new_value==='')){left+='0';}
return[left,right];},setValueParts:function(left,right,paste){var settingsClone=this.settingsClone,parts=this.normalizeParts(left,right),new_value=parts.join(''),position=parts[0].length;if(autoCheck(new_value,settingsClone)){new_value=truncateDecimal(new_value,settingsClone,paste);if(position>new_value.length){position=new_value.length;}
this.value=new_value;this.setPosition(position,false);return true;}
return false;},signPosition:function(){var settingsClone=this.settingsClone,aSign=settingsClone.aSign,that=this.that;if(aSign){var aSignLen=aSign.length;if(settingsClone.pSign==='p'){var hasNeg=settingsClone.aNeg&&that.value&&that.value.charAt(0)===settingsClone.aNeg;return hasNeg?[1,aSignLen+1]:[0,aSignLen];}
var valueLen=that.value.length;return[valueLen-aSignLen,valueLen];}
return[1000,-1];},expandSelectionOnSign:function(setReal){var sign_position=this.signPosition(),selection=this.selection;if(selection.start<sign_position[1]&&selection.end>sign_position[0]){if((selection.start<sign_position[0]||selection.end>sign_position[1])&&this.value.substring(Math.max(selection.start,sign_position[0]),Math.min(selection.end,sign_position[1])).match(/^\s*$/)){if(selection.start<sign_position[0]){this.setSelection(selection.start,sign_position[0],setReal);}else{this.setSelection(sign_position[1],selection.end,setReal);}}else{this.setSelection(Math.min(selection.start,sign_position[0]),Math.max(selection.end,sign_position[1]),setReal);}}},checkPaste:function(){if(this.valuePartsBeforePaste!==undefined){var parts=this.getBeforeAfter(),oldParts=this.valuePartsBeforePaste;delete this.valuePartsBeforePaste;parts[0]=parts[0].substr(0,oldParts[0].length)+autoStrip(parts[0].substr(oldParts[0].length),this.settingsClone);if(!this.setValueParts(parts[0],parts[1],'paste')){this.value=oldParts.join('');this.setPosition(oldParts[0].length,false);}}},skipAllways:function(e){var kdCode=this.kdCode,which=this.which,ctrlKey=this.ctrlKey,cmdKey=this.cmdKey,shiftKey=this.shiftKey;if(((ctrlKey||cmdKey)&&e.type==='keyup'&&this.valuePartsBeforePaste!==undefined)||(shiftKey&&kdCode===45)){this.checkPaste();return false;}
if((kdCode>=112&&kdCode<=123)||(kdCode>=91&&kdCode<=93)||(kdCode>=9&&kdCode<=31)||(kdCode<8&&(which===0||which===kdCode))||kdCode===144||kdCode===145||kdCode===45||kdCode===224){return true;}
if((ctrlKey||cmdKey)&&kdCode===65){return true;}
if((ctrlKey||cmdKey)&&(kdCode===67||kdCode===86||kdCode===88)){if(e.type==='keydown'){this.expandSelectionOnSign();}
if(kdCode===86||kdCode===45){if(e.type==='keydown'||e.type==='keypress'){if(this.valuePartsBeforePaste===undefined){this.valuePartsBeforePaste=this.getBeforeAfter();}}else{this.checkPaste();}}
return e.type==='keydown'||e.type==='keypress'||kdCode===67;}
if(ctrlKey||cmdKey){return true;}
if(kdCode===37||kdCode===39){var aSep=this.settingsClone.aSep,start=this.selection.start,value=this.that.value;if(e.type==='keydown'&&aSep&&!this.shiftKey){if(kdCode===37&&value.charAt(start-2)===aSep){this.setPosition(start-1);}else if(kdCode===39&&value.charAt(start+1)===aSep){this.setPosition(start+1);}}
return true;}
if(kdCode>=34&&kdCode<=40){return true;}
return false;},processAllways:function(){var parts;if(this.kdCode===8||this.kdCode===46){if(!this.selection.length){parts=this.getBeforeAfterStriped();if(this.kdCode===8){parts[0]=parts[0].substring(0,parts[0].length-1);}else{parts[1]=parts[1].substring(1,parts[1].length);}
this.setValueParts(parts[0],parts[1]);}else{this.expandSelectionOnSign(false);parts=this.getBeforeAfterStriped();this.setValueParts(parts[0],parts[1]);}
return true;}
return false;},processKeypress:function(){var settingsClone=this.settingsClone,cCode=String.fromCharCode(this.which),parts=this.getBeforeAfterStriped(),left=parts[0],right=parts[1];if(cCode===settingsClone.aDec||(settingsClone.altDec&&cCode===settingsClone.altDec)||((cCode==='.'||cCode===',')&&this.kdCode===110)){if(!settingsClone.mDec||!settingsClone.aDec){return true;}
if(settingsClone.aNeg&&right.indexOf(settingsClone.aNeg)>-1){return true;}
if(left.indexOf(settingsClone.aDec)>-1){return true;}
if(right.indexOf(settingsClone.aDec)>0){return true;}
if(right.indexOf(settingsClone.aDec)===0){right=right.substr(1);}
this.setValueParts(left+settingsClone.aDec,right);return true;}
if(cCode==='-'||cCode==='+'){if(!settingsClone.aNeg){return true;}
if(left===''&&right.indexOf(settingsClone.aNeg)>-1){left=settingsClone.aNeg;right=right.substring(1,right.length);}
if(left.charAt(0)===settingsClone.aNeg){left=left.substring(1,left.length);}else{left=(cCode==='-')?settingsClone.aNeg+left:left;}
this.setValueParts(left,right);return true;}
if(cCode>='0'&&cCode<='9'){if(settingsClone.aNeg&&left===''&&right.indexOf(settingsClone.aNeg)>-1){left=settingsClone.aNeg;right=right.substring(1,right.length);}
if(settingsClone.vMax<=0&&settingsClone.vMin<settingsClone.vMax&&this.value.indexOf(settingsClone.aNeg)===-1&&cCode!=='0'){left=settingsClone.aNeg+left;}
this.setValueParts(left+cCode,right);return true;}
return true;},formatQuick:function(){var settingsClone=this.settingsClone,parts=this.getBeforeAfterStriped(),leftLength=this.value;if((settingsClone.aSep===''||(settingsClone.aSep!==''&&leftLength.indexOf(settingsClone.aSep)===-1))&&(settingsClone.aSign===''||(settingsClone.aSign!==''&&leftLength.indexOf(settingsClone.aSign)===-1))){var subParts=[],nSign='';subParts=leftLength.split(settingsClone.aDec);if(subParts[0].indexOf('-')>-1){nSign='-';subParts[0]=subParts[0].replace('-','');parts[0]=parts[0].replace('-','');}
if(subParts[0].length>settingsClone.mInt&&parts[0].charAt(0)==='0'){parts[0]=parts[0].slice(1);}
parts[0]=nSign+parts[0];}
var value=autoGroup(this.value,this.settingsClone),position=value.length;if(value){var left_ar=parts[0].split(''),i=0;for(i;i<left_ar.length;i+=1){if(!left_ar[i].match('\\d')){left_ar[i]='\\'+left_ar[i];}}
var leftReg=new RegExp('^.*?'+left_ar.join('.*?'));var newLeft=value.match(leftReg);if(newLeft){position=newLeft[0].length;if(((position===0&&value.charAt(0)!==settingsClone.aNeg)||(position===1&&value.charAt(0)===settingsClone.aNeg))&&settingsClone.aSign&&settingsClone.pSign==='p'){position=this.settingsClone.aSign.length+(value.charAt(0)==='-'?1:0);}}else if(settingsClone.aSign&&settingsClone.pSign==='s'){position-=settingsClone.aSign.length;}}
this.that.value=value;this.setPosition(position);this.formatted=true;}};function autoGet(obj){if(typeof obj==='string'){obj=obj.replace(/\[/g,"\\[").replace(/\]/g,"\\]");obj='#'+obj.replace(/(:|\.)/g,'\\$1');}
return $(obj);}
function getHolder($that,settings,update){var data=$that.data('autoNumeric');if(!data){data={};$that.data('autoNumeric',data);}
var holder=data.holder;if((holder===undefined&&settings)||update){holder=new AutoNumericHolder($that.get(0),settings);data.holder=holder;}
return holder;}
var methods={init:function(options){return this.each(function(){var $this=$(this),settings=$this.data('autoNumeric'),tagData=$this.data(),$input=$this.is('input[type=text], input[type=hidden], input[type=tel], input:not([type])');if(typeof settings!=='object'){settings=$.extend({},$.fn.autoNumeric.defaults,tagData,options,{aNum:'0123456789',hasFocus:false,removeBrackets:false,runOnce:false,tagList:['b','caption','cite','code','dd','del','div','dfn','dt','em','h1','h2','h3','h4','h5','h6','ins','kdb','label','li','output','p','q','s','sample','span','strong','td','th','u','var']});if(settings.aDec===settings.aSep){$.error("autoNumeric will not function properly when the decimal character aDec: '"+settings.aDec+"' and thousand separator aSep: '"+settings.aSep+"' are the same character");}
$this.data('autoNumeric',settings);}else{return this;}
var holder=getHolder($this,settings);if(!$input&&$this.prop('tagName').toLowerCase()==='input'){$.error('The input type "'+$this.prop('type')+'" is not supported by autoNumeric()');}
if($.inArray($this.prop('tagName').toLowerCase(),settings.tagList)===-1&&$this.prop('tagName').toLowerCase()!=='input'){$.error("The <"+$this.prop('tagName').toLowerCase()+"> is not supported by autoNumeric()");}
if(settings.runOnce===false&&settings.aForm){if($input){var setValue=true;if($this[0].value===''&&settings.wEmpty==='empty'){$this[0].value='';setValue=false;}
if($this[0].value===''&&settings.wEmpty==='sign'){$this[0].value=settings.aSign;setValue=false;}
if(setValue&&$this.val()!==''&&((settings.anDefault===null&&$this[0].value===$this.prop('defaultValue'))||(settings.anDefault!==null&&settings.anDefault.toString()===$this.val()))){$this.autoNumeric('set',$this.val());}}
if($.inArray($this.prop('tagName').toLowerCase(),settings.tagList)!==-1&&$this.text()!==''){$this.autoNumeric('set',$this.text());}}
settings.runOnce=true;if($this.is('input[type=text], input[type=hidden], input[type=tel], input:not([type])')){$this.on('keydown.autoNumeric',function(e){holder=getHolder($this);if(holder.settings.aDec===holder.settings.aSep){$.error("autoNumeric will not function properly when the decimal character aDec: '"+holder.settings.aDec+"' and thousand separator aSep: '"+holder.settings.aSep+"' are the same character");}
if(holder.that.readOnly){holder.processed=true;return true;}
holder.init(e);if(holder.skipAllways(e)){holder.processed=true;return true;}
if(holder.processAllways()){holder.processed=true;holder.formatQuick();e.preventDefault();return false;}
holder.formatted=false;return true;});$this.on('keypress.autoNumeric',function(e){holder=getHolder($this);var processed=holder.processed;holder.init(e);if(holder.skipAllways(e)){return true;}
if(processed){e.preventDefault();return false;}
if(holder.processAllways()||holder.processKeypress()){holder.formatQuick();e.preventDefault();return false;}
holder.formatted=false;});$this.on('keyup.autoNumeric',function(e){holder=getHolder($this);holder.init(e);var skip=holder.skipAllways(e);holder.kdCode=0;delete holder.valuePartsBeforePaste;if($this[0].value===holder.settings.aSign){if(holder.settings.pSign==='s'){setElementSelection(this,0,0);}else{setElementSelection(this,holder.settings.aSign.length,holder.settings.aSign.length);}}
if(skip){return true;}
if(this.value===''){return true;}
if(!holder.formatted){holder.formatQuick();}});$this.on('focusin.autoNumeric',function(){holder=getHolder($this);var $settings=holder.settingsClone;$settings.hasFocus=true;if($settings.nBracket!==null){var checkVal=$this.val();$this.val(negativeBracket(checkVal,$settings));}
holder.inVal=$this.val();var onEmpty=checkEmpty(holder.inVal,$settings,true);if(onEmpty!==null&&onEmpty!==''){$this.val(onEmpty);}});$this.on('focusout.autoNumeric',function(){holder=getHolder($this);var $settings=holder.settingsClone,value=$this.val(),origValue=value;$settings.hasFocus=false;var strip_zero='';if($settings.lZero==='allow'){$settings.allowLeading=false;strip_zero='leading';}
if(value!==''){value=autoStrip(value,$settings,strip_zero);if(checkEmpty(value,$settings)===null&&autoCheck(value,$settings,$this[0])){value=fixNumber(value,$settings.aDec,$settings.aNeg);value=autoRound(value,$settings);value=presentNumber(value,$settings.aDec,$settings.aNeg);}else{value='';}}
var groupedValue=checkEmpty(value,$settings,false);if(groupedValue===null){groupedValue=autoGroup(value,$settings);}
if(groupedValue!==holder.inVal||groupedValue!==origValue){$this.val(groupedValue);$this.change();delete holder.inVal;}});}});},destroy:function(){return $(this).each(function(){var $this=$(this);$this.removeData('autoNumeric');$this.off('autoNumeric');});},update:function(options){return $(this).each(function(){var $this=autoGet($(this)),settings=$this.data('autoNumeric');if(typeof settings!=='object'){$.error("You must initialize autoNumeric('init', {options}) prior to calling the 'update' method");}
var strip=$this.autoNumeric('get');settings=$.extend(settings,options);getHolder($this,settings,true);if(settings.aDec===settings.aSep){$.error("autoNumeric will not function properly when the decimal character aDec: '"+settings.aDec+"' and thousand separator aSep: '"+settings.aSep+"' are the same character");}
$this.data('autoNumeric',settings);if($this.val()!==''||$this.text()!==''){return $this.autoNumeric('set',strip);}
return;});},set:function(valueIn){if(valueIn===null||isNaN(valueIn)){return;}
return $(this).each(function(){var $this=autoGet($(this)),settings=$this.data('autoNumeric'),value=valueIn.toString(),testValue=valueIn.toString(),$input=$this.is('input[type=text], input[type=hidden], input[type=tel], input:not([type])');if(typeof settings!=='object'){$.error("You must initialize autoNumeric('init', {options}) prior to calling the 'set' method");}
if((testValue===$this.attr('value')||testValue===$this.text())&&settings.runOnce===false){value=value.replace(',','.');}
if(!$.isNumeric(+value)){$.error("The value ("+value+") being 'set' is not numeric and has caused a error to be thrown");}
value=checkValue(value,settings);settings.setEvent=true;value.toString();if(value!==''){value=autoRound(value,settings);}
value=presentNumber(value,settings.aDec,settings.aNeg);if(!autoCheck(value,settings)){value=autoRound('',settings);}
value=autoGroup(value,settings);if($input){return $this.val(value);}
if($.inArray($this.prop('tagName').toLowerCase(),settings.tagList)!==-1){return $this.text(value);}
return false;});},get:function(){var $this=autoGet($(this)),settings=$this.data('autoNumeric');if(typeof settings!=='object'){$.error("You must initialize autoNumeric('init', {options}) prior to calling the 'get' method");}
var getValue='';if($this.is('input[type=text], input[type=hidden], input[type=tel], input:not([type])')){getValue=$this.eq(0).val();}else if($.inArray($this.prop('tagName').toLowerCase(),settings.tagList)!==-1){getValue=$this.eq(0).text();}else{$.error("The <"+$this.prop('tagName').toLowerCase()+"> is not supported by autoNumeric()");}
if((getValue===''&&settings.wEmpty==='empty')||(getValue===settings.aSign&&(settings.wEmpty==='sign'||settings.wEmpty==='empty'))){return'';}
if(getValue!==''&&settings.nBracket!==null){settings.removeBrackets=true;getValue=negativeBracket(getValue,settings);settings.removeBrackets=false;}
if(settings.runOnce||settings.aForm===false){getValue=autoStrip(getValue,settings);}
getValue=fixNumber(getValue,settings.aDec,settings.aNeg);if(+getValue===0&&settings.lZero!=='keep'){getValue='0';}
if(settings.lZero==='keep'){return getValue;}
getValue=checkValue(getValue,settings);return getValue;},getString:function(){var isAutoNumeric=false,$this=autoGet($(this)),formFields=$this.serialize(),formParts=formFields.split('&'),formIndex=$('form').index($this),allFormElements=$('form:eq('+formIndex+')'),aiIndex=[],scIndex=[],rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i,rcheckableType=/^(?:checkbox|radio)$/i,rnonAutoNumericTypes=/^(?:button|checkbox|color|date|datetime|datetime-local|email|file|image|month|number|password|radio|range|reset|search|submit|time|url|week)/i,count=0;$.each(allFormElements[0],function(i,field){if(field.name!==''&&rsubmittable.test(field.localName)&&!rsubmitterTypes.test(field.type)&&!field.disabled&&(field.checked||!rcheckableType.test(field.type))){scIndex.push(count);count=count+1;}else{scIndex.push(-1);}});count=0;$.each(allFormElements[0],function(i,field){if(field.localName==='input'&&(field.type===''||field.type==='text'||field.type==='hidden'||field.type==='tel')){aiIndex.push(count);count=count+1;}else{aiIndex.push(-1);if(field.localName==='input'&&rnonAutoNumericTypes.test(field.type)){count=count+1;}}});$.each(formParts,function(i,miniParts){miniParts=formParts[i].split('=');var scElement=$.inArray(i,scIndex);if(scElement>-1&&aiIndex[scElement]>-1){var testInput=$('form:eq('+formIndex+') input:eq('+aiIndex[scElement]+')'),settings=testInput.data('autoNumeric');if(typeof settings==='object'){if(miniParts[1]!==null){miniParts[1]=$('form:eq('+formIndex+') input:eq('+aiIndex[scElement]+')').autoNumeric('get').toString();formParts[i]=miniParts.join('=');isAutoNumeric=true;}}}});if(!isAutoNumeric){$.error("You must initialize autoNumeric('init', {options}) prior to calling the 'getString' method");}
return formParts.join('&');},getArray:function(){var isAutoNumeric=false,$this=autoGet($(this)),formFields=$this.serializeArray(),formIndex=$('form').index($this),allFormElements=$('form:eq('+formIndex+')'),aiIndex=[],scIndex=[],rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i,rcheckableType=/^(?:checkbox|radio)$/i,rnonAutoNumericTypes=/^(?:button|checkbox|color|date|datetime|datetime-local|email|file|image|month|number|password|radio|range|reset|search|submit|time|url|week)/i,count=0;$.each(allFormElements[0],function(i,field){if(field.name!==''&&rsubmittable.test(field.localName)&&!rsubmitterTypes.test(field.type)&&!field.disabled&&(field.checked||!rcheckableType.test(field.type))){scIndex.push(count);count=count+1;}else{scIndex.push(-1);}});count=0;$.each(allFormElements[0],function(i,field){if(field.localName==='input'&&(field.type===''||field.type==='text'||field.type==='hidden'||field.type==='tel')){aiIndex.push(count);count=count+1;}else{aiIndex.push(-1);if(field.localName==='input'&&rnonAutoNumericTypes.test(field.type)){count=count+1;}}});$.each(formFields,function(i,field){var scElement=$.inArray(i,scIndex);if(scElement>-1&&aiIndex[scElement]>-1){var testInput=$('form:eq('+formIndex+') input:eq('+aiIndex[scElement]+')'),settings=testInput.data('autoNumeric');if(typeof settings==='object'){field.value=$('form:eq('+formIndex+') input:eq('+aiIndex[scElement]+')').autoNumeric('get').toString();isAutoNumeric=true;}}});if(!isAutoNumeric){$.error("None of the successful form inputs are initialized by autoNumeric.");}
return formFields;},getSettings:function(){var $this=autoGet($(this));return $this.eq(0).data('autoNumeric');}};$.fn.autoNumeric=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}
if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}
$.error('Method "'+method+'" is not supported by autoNumeric()');};$.fn.autoNumeric.defaults={aSep:',',dGroup:'3',aDec:'.',altDec:null,aSign:'',pSign:'p',vMax:'9999999999999.99',vMin:'-9999999999999.99',mDec:null,mRound:'S',aPad:true,nBracket:null,wEmpty:'empty',lZero:'allow',sNumber:true,aForm:true,anDefault:null};}));(function($){$.fn.appear=function(fn,options){var settings=$.extend({data:undefined,one:true},options);return this.each(function(){var t=$(this);t.appeared=false;if(!fn){t.trigger('appear',settings.data);return;}
var w=settings.container?$(settings.container):$(window);if(settings.container){w.data('customContainer',true);}
var check=function(){if(!t.is(':visible')){t.appeared=false;return;}
var a=w.scrollLeft();var b=w.scrollTop();var wh=w.height();var ww=w.width();var o=t.offset();if(w.data('customContainer')){var cOffset=w.offset();var x=o.left-cOffset.left+a;var y=o.top-cOffset.top+b;}else{var x=o.left;var y=o.top;}
if(y+t.height()>=b&&y<=b+wh&&x+t.width()>=a&&x<=a+ww){if(!t.appeared)t.trigger('appear',settings.data);}else{t.appeared=false;}};var modifiedFn=function(){t.appeared=true;if(settings.one){w.unbind('scroll',check);var i=$.inArray(check,$.fn.appear.checks);if(i>=0)$.fn.appear.checks.splice(i,1);}
fn.apply(this,arguments);};if(settings.one)t.one('appear',settings.data,modifiedFn);else t.bind('appear',settings.data,modifiedFn);w.scroll(check);$.fn.appear.checks.push(check);(check)();});};$.extend($.fn.appear,{checks:[],timeout:null,checkAll:function(){var length=$.fn.appear.checks.length;if(length>0)while(length--)($.fn.appear.checks[length])();},run:function(){if($.fn.appear.timeout)clearTimeout($.fn.appear.timeout);$.fn.appear.timeout=setTimeout($.fn.appear.checkAll,20);}});$.each(['append','prepend','after','before','attr','removeAttr','addClass','removeClass','toggleClass','remove','css','show','hide'],function(i,n){var old=$.fn[n];if(old){$.fn[n]=function(){var r=old.apply(this,arguments);$.fn.appear.run();return r;}}});})(jQuery);(function(a){a.tools=a.tools||{version:"v1.2.7"},a.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,fadeIE:!1,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(a,c,d){b[a]=[c,d]}};var b={toggle:[function(a){var b=this.getConf(),c=this.getTip(),d=b.opacity;d<1&&c.css({opacity:d}),c.show(),a.call()},function(a){this.getTip().hide(),a.call()}],fade:[function(b){var c=this.getConf();!a.browser.msie||c.fadeIE?this.getTip().fadeTo(c.fadeInSpeed,c.opacity,b):(this.getTip().show(),b())},function(b){var c=this.getConf();!a.browser.msie||c.fadeIE?this.getTip().fadeOut(c.fadeOutSpeed,b):(this.getTip().hide(),b())}]};function c(b,c,d){var e=d.relative?b.position().top:b.offset().top,f=d.relative?b.position().left:b.offset().left,g=d.position[0];e-=c.outerHeight()-d.offset[0],f+=b.outerWidth()+d.offset[1],/iPad/i.test(navigator.userAgent)&&(e-=a(window).scrollTop());var h=c.outerHeight()+b.outerHeight();g=="center"&&(e+=h/2),g=="bottom"&&(e+=h),g=d.position[1];var i=c.outerWidth()+b.outerWidth();g=="center"&&(f-=i/2),g=="left"&&(f-=i);return{top:e,left:f}}function d(d,e){var f=this,g=d.add(f),h,i=0,j=0,k=d.attr("title"),l=d.attr("data-tooltip"),m=b[e.effect],n,o=d.is(":input"),p=o&&d.is(":checkbox, :radio, select, :button, :submit"),q=d.attr("type"),r=e.events[q]||e.events[o?p?"widget":"input":"def"];if(!m)throw"Nonexistent effect \""+e.effect+"\"";r=r.split(/,\s*/);if(r.length!=2)throw"Tooltip: bad events configuration for "+q;d.on(r[0],function(a){clearTimeout(i),e.predelay?j=setTimeout(function(){f.show(a)},e.predelay):f.show(a)}).on(r[1],function(a){clearTimeout(j),e.delay?i=setTimeout(function(){f.hide(a)},e.delay):f.hide(a)}),k&&e.cancelDefault&&(d.removeAttr("title"),d.data("title",k)),a.extend(f,{show:function(b){if(!h){l?h=a(l):e.tip?h=a(e.tip).eq(0):k?h=a(e.layout).addClass(e.tipClass).appendTo(document.body).hide().append(k):(h=d.next(),h.length||(h=d.parent().next()));if(!h.length)throw"Cannot find tooltip for "+d}if(f.isShown())return f;h.stop(!0,!0);var o=c(d,h,e);e.tip&&h.html(d.data("title")),b=a.Event(),b.type="onBeforeShow",g.trigger(b,[o]);if(b.isDefaultPrevented())return f;o=c(d,h,e),h.css({position:"absolute",top:o.top,left:o.left}),n=!0,m[0].call(f,function(){b.type="onShow",n="full",g.trigger(b)});var p=e.events.tooltip.split(/,\s*/);h.data("__set")||(h.off(p[0]).on(p[0],function(){clearTimeout(i),clearTimeout(j)}),p[1]&&!d.is("input:not(:checkbox, :radio), textarea")&&h.off(p[1]).on(p[1],function(a){a.relatedTarget!=d[0]&&d.trigger(r[1].split(" ")[0])}),e.tip||h.data("__set",!0));return f},hide:function(c){if(!h||!f.isShown())return f;c=a.Event(),c.type="onBeforeHide",g.trigger(c);if(!c.isDefaultPrevented()){n=!1,b[e.effect][1].call(f,function(){c.type="onHide",g.trigger(c)});return f}},isShown:function(a){return a?n=="full":n},getConf:function(){return e},getTip:function(){return h},getTrigger:function(){return d}}),a.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(b,c){a.isFunction(e[c])&&a(f).on(c,e[c]),f[c]=function(b){b&&a(f).on(c,b);return f}})}a.fn.tooltip=function(b){var c=this.data("tooltip");if(c)return c;b=a.extend(!0,{},a.tools.tooltip.conf,b),typeof b.position=="string"&&(b.position=b.position.split(/,?\s/)),this.each(function(){c=new d(a(this),b),a(this).data("tooltip",c)});return b.api?c:this}})(jQuery);(function(a){var b=a.tools.tooltip;b.dynamic={conf:{classNames:"top right bottom left"}};function c(b){var c=a(window),d=c.width()+c.scrollLeft(),e=c.height()+c.scrollTop();return[b.offset().top<=c.scrollTop(),d<=b.offset().left+b.width(),e<=b.offset().top+b.height(),c.scrollLeft()>=b.offset().left]}function d(a){var b=a.length;while(b--)if(a[b])return!1;return!0}a.fn.dynamic=function(e){typeof e=="number"&&(e={speed:e}),e=a.extend({},b.dynamic.conf,e);var f=a.extend(!0,{},e),g=e.classNames.split(/\s/),h;this.each(function(){var b=a(this).tooltip().onBeforeShow(function(b,e){var i=this.getTip(),j=this.getConf();h||(h=[j.position[0],j.position[1],j.offset[0],j.offset[1],a.extend({},j)]),a.extend(j,h[4]),j.position=[h[0],h[1]],j.offset=[h[2],h[3]],i.css({visibility:"hidden",position:"absolute",top:e.top,left:e.left}).show();var k=a.extend(!0,{},f),l=c(i);if(!d(l)){l[2]&&(a.extend(j,k.top),j.position[0]="top",i.addClass(g[0])),l[3]&&(a.extend(j,k.right),j.position[1]="right",i.addClass(g[1])),l[0]&&(a.extend(j,k.bottom),j.position[0]="bottom",i.addClass(g[2])),l[1]&&(a.extend(j,k.left),j.position[1]="left",i.addClass(g[3]));if(l[0]||l[2])j.offset[0]*=-1;if(l[1]||l[3])j.offset[1]*=-1}i.css({visibility:"visible"}).hide()});b.onBeforeShow(function(){var a=this.getConf(),b=this.getTip();setTimeout(function(){a.position=[h[0],h[1]],a.offset=[h[2],h[3]]},0)}),b.onHide(function(){var a=this.getTip();a.removeClass(e.classNames)}),ret=b});return e.api?ret:this}})(jQuery);(function(a){var b=a.tools.tooltip;a.extend(b.conf,{direction:"up",bounce:!1,slideOffset:10,slideInSpeed:200,slideOutSpeed:200,slideFade:!a.browser.msie});var c={up:["-","top"],down:["+","top"],left:["-","left"],right:["+","left"]};b.addEffect("slide",function(a){var b=this.getConf(),d=this.getTip(),e=b.slideFade?{opacity:b.opacity}:{},f=c[b.direction]||c.up;e[f[1]]=f[0]+"="+b.slideOffset,b.slideFade&&d.css({opacity:0}),d.show().animate(e,b.slideInSpeed,a)},function(b){var d=this.getConf(),e=d.slideOffset,f=d.slideFade?{opacity:0}:{},g=c[d.direction]||c.up,h=""+g[0];d.bounce&&(h=h=="+"?"-":"+"),f[g[1]]=h+"="+e,this.getTip().animate(f,d.slideOutSpeed,function(){a(this).hide(),b.call()})})})(jQuery);(function(_,$){$.widget("ui.dialog",$.ui.dialog,{_allowInteraction:function(event){if(this._super(event)){return true;}
if(event.target.ownerDocument!=this.document[0]){return true;}
if($(event.target).closest(".ui-draggable").length){return true;}
if($(event.target).closest(".cke").length){return true;}},_moveToTop:function(event,silent){if(!event||!this.options.modal){this._super(event,silent);}}});var methods={_getEditor:function(elm){var obj=$('#'+elm.prop('id'));if(obj.data('redactor')){return obj;}
return false;}};$.ceEditor('handlers',{editorName:'redactor',params:null,elms:[],run:function(elm,params){var support_langs=['ar','az','ba','bg','by','ca','cs','da','de','el','en','eo','es','fa','fi','fr','he','hr','hu','id','it','ja','ko','lt','lv','mk','nl','no','pl','pt','ro','ru','sk','sl','sq','sr','sv','th','tr','ua','vi','zh'];var lang_map={'no':'no_NB','pt':'pt_pt','sr':'sr-cir','zh':'zh_tw'};var lang_code=fn_get_listed_lang(support_langs);if(lang_code in lang_map){lang_code=lang_map[lang_code];}
if(typeof($.fn.redactor)=='undefined'){$.ceEditor('state','loading');$.loadCss(['js/lib/redactor/redactor.css']);$.loadCss(['js/lib/elfinder/css/elfinder.min.css']);$.loadCss(['js/lib/elfinder/css/theme.css']);$.getScript('js/lib/elfinder/js/elfinder.min.js');$.getScript('js/lib/redactor/plugins/fontcolor/fontcolor.js');$.getScript('js/lib/redactor/plugins/table/table.js');$.getScript('js/lib/redactor/plugins/video/video.js');$.getScript('js/lib/redactor/plugins/imageupload/imageupload.js');$.getScript('js/lib/redactor/redactor.min.js',function(){if(lang_code!='en'){$.getScript('js/lib/redactor/lang/'+lang_code+'.js',function(){callback();});}else{callback();}});var callback=function(){$.ceEditor('state','loaded');elm.ceEditor('run',params);};return true;}
if(!this.params){this.params={lang:lang_code};}
if(typeof params!=='undefined'&&params[this.editorName]){$.extend(this.params,params[this.editorName]);}
this.params.initCallback=function(){$('.redactor-toolbar-tooltip').each(function(){$(this).css('z-index',50001);});}
this.params.blurCallback=function(){if(elm.hasClass('redactor-focus')){elm.redactor('selection.restore');elm.redactor('selection.save');elm.removeClass('redactor-focus');}}
this.params.focusCallback=function(){elm.addClass('redactor-focus');}
this.params.modalOpenedCallback=function(){$('#redactor-modal-overlay, #redactor-modal-box, #redactor-modal, .redactor-dropdown').each(function(){$(this).css('z-index',50001,'important');});};this.params.dropdownShowCallback=function(){$('#redactor-modal-overlay, #redactor-modal-box, #redactor-modal, .redactor-dropdown').each(function(){$(this).css('z-index',50001,'important');});};this.params.buttonSource=true;this.params.plugins=['fontcolor','table'];if(_.area=='A'||_.live_editor_mode==true){this.params.plugins.push('imageupload','video');}
this.params.buttons=['html','formatting','bold','italic','deleted','unorderedlist','orderedlist','outdent','indent','image','video','table','link','alignment','horizontalrule'];this.params.replaceDivs=false;this.params.changeCallback=function(html){elm.ceEditor('changed',html);};elm.redactor(this.params);if(elm.prop('disabled')){elm.ceEditor('disable',true);}
this.elms.push(elm.get(0));return true;},destroy:function(elm){var ed=methods._getEditor(elm);if(ed){ed.redactor('core.destroy');}},recover:function(elm){if($.inArray(elm.get(0),this.elms)!==-1){$.ceEditor('run',elm);}},val:function(elm,value){var ed=methods._getEditor(elm);if(!ed){return false;}
if(typeof(value)=='undefined'){return ed.redactor('code.get');}else{ed.redactor('code.set',value);}
return true;},updateTextFields:function(elm){return true;},insert:function(elm,text){var ed=methods._getEditor(elm);if(ed){ed.redactor('selection.restore');ed.redactor('insert.text',text);}},disable:function(elm,value){var ed=methods._getEditor(elm);if(ed){var obj=ed.redactor('core.getBox');if(value==true){if(!$(obj).parent().hasClass('disable-overlay-wrap')){$(obj).wrap("<div class='disable-overlay-wrap wysiwyg-overlay'></div>");$(obj).before("<div id='"+elm.prop('id')+"_overlay' class='disable-overlay'></div>");elm.prop('disabled',true);}}else{$(obj).unwrap();$('#'+elm.prop('id')+'_overlay').remove();elm.prop('disabled',false);}}}});}(Tygh,Tygh.$));(function(_,$){'use strict';var ui=(function(){return{winWidth:function(){return $(window).width();},responsiveScroll:function(){$.ceEvent('on','ce.needScroll',function(opt){opt.need_scroll=false;setTimeout(function(){$.scrollToElm(opt.jelm.data('caScroll'));},310);});},responsiveTabs:function(){if(this.winWidth()<=480){$('.cm-j-tabs:not(.cm-j-tabs-disable-convertation)').each(function(index){var accordion=$('<div class="ty-accordion cm-accordion" id="accordion_id_'+index+'">');var tabsContent=$('.cm-tabs-content:not(.cm-j-content-disable-convertation)');var self=this;$(this).hide();tabsContent.hide();if(!$('#accordion_id_'+index).length){$(this).find('>ul>li').each(function(){var id=$(this).attr('id');var content=$('.cm-tabs-content > #content_'+id).show();$(this).attr('id','hidden_tab_'+id);accordion.append('<h3 id="'+id+'">'+$(this).text()+'</h3>');$(content).appendTo(accordion);});$(self).before(accordion);}});$('.cm-accordion').ceAccordion('reinit',{animate:300,heightStyle:"content",activate:function(event,ui){var accordionTop=$(this).scrollTop(),headerOffset=$(ui.newHeader);if(headerOffset.length>0){if("-ms-user-select"in document.documentElement.style&&navigator.userAgent.match(/IEMobile\/10\.0/)){setTimeout(function(){$('html, body').scrollTop(accordionTop+headerOffset.offset().top-10);},300);}else{$('html, body').animate({scrollTop:accordionTop+headerOffset.offset().top-10},300);}}}});var active=_.anchor;if(typeof active!=='undefined'&&$(active).length>0){$(active).click();}}else{$('.cm-accordion').accordion('destroy');$('.cm-accordion > div').each(function(index){$(this).hide();$(this).appendTo($('.cm-tabs-content'));});$('.cm-accordion').remove();$('.cm-j-tabs>ul>li').each(function(){var id=$(this).attr('id').replace('hidden_tab_','');$(this).attr('id',id);$('#content_'+$(this).attr('id')).css('display','');});$('.cm-j-tabs, .cm-tabs-content').show();}},responsiveMenu:function(){var whichEvent=('ontouch'in document.documentElement?"touch":"click");if(_.isTouch&&window.navigator.msPointerEnabled){whichEvent='click';}
if($('.ty-menu__menu-btn').data('ca-responsive-menu')!==true){$('.ty-menu__menu-btn').on(whichEvent,function(e){var menu_elm=$('.cm-responsive-menu');$(this).parent(menu_elm).find('.ty-menu__item').toggle();});$('.cm-responsive-menu-toggle').on(whichEvent,function(e){$(this).toggleClass('ty-menu__item-toggle-active');$('.icon-down-open',this).toggleClass('icon-up-open');$(this).parent().find('.cm-responsive-menu-submenu').first().toggleClass('ty-menu__items-show');});$('.ty-menu__menu-btn').data('ca-responsive-menu',true);}
if(_.isTouch==false&&ui.winWidth()>=767){$('.cm-responsive-menu').on('mouseover mouseout',function(e){ui.detectMenuWidth(e);});}},responsiveMenuLargeTouch:function(e){var elm=$(e.target);var menuWidth=$('.cm-responsive-menu').width();if(ui.winWidth()>=767&&e.type=='touchstart'){var menuItem=elm.hasClass('cm-menu-item-responsive')?elm:elm.closest('.cm-menu-item-responsive');if(!menuItem.hasClass('is-hover-menu')&&menuItem.find('.ty-menu__submenu-items').length>0){e.preventDefault();menuItem.siblings('.cm-menu-item-responsive').removeClass('is-hover-menu');menuItem.addClass('is-hover-menu');}
var subMenu=$('.ty-menu__submenu-items');if(subMenu.is(':visible')&&!elm.closest('.cm-menu-item-responsive').length){$('.cm-menu-item-responsive').removeClass('is-hover-menu');}}else{$('.cm-menu-item-responsive').removeClass('is-hover-menu');}
ui.detectMenuWidth(e);},detectMenuWidth:function(e){var elm=$(e.target);var menuElm=elm.parents(".cm-responsive-menu");var isHorisontalMenu=menuElm.parent().hasClass("ty-menu-vertical")?false:true;if(isHorisontalMenu){var menuWidth=menuElm.outerWidth();var menuOffset=menuElm.offset();var menuItemElm=elm.closest('.cm-menu-item-responsive');$('.ty-menu__submenu-to-right').removeClass('ty-menu__submenu-to-right');var submenu,position;if(menuItemElm){if(typeof menuItemElm.offset()!=="undefined"){menuWidth=menuWidth-(menuItemElm.offset().left-menuOffset.left)}
submenu=$('.cm-responsive-menu-submenu',menuItemElm).first();if(submenu.length){submenu.css({visibility:"hidden",left:0});position=submenu.outerWidth();if(position>menuWidth){submenu.parent().addClass('ty-menu__submenu-to-right');}
submenu.css({visibility:"",left:"auto"});}}}},responsiveTables:function(e){var tables=$('.ty-table');if(this.winWidth()<=767){tables.each(function(){var thTexts=[];var subTable=$(this).find('.ty-table');if(subTable.length){var subTableStack=[];subTable.each(function(index){$(this).parent().attr('data-ca-has-sub-table_'+index,'true');subTableStack.push($(this).detach());});}
$(this).find('th:not(.ty-table-disable-convertation)').each(function(){thTexts.push($(this).text());});$(this).find('tr:not(.ty-table__no-items)').each(function(){$(this).find('td:not(.ty-table-disable-convertation)').each(function(index){var $elm=$(this);if($elm.find('.ty-table__responsive-content').length==0){$elm.wrapInner('<div class="ty-table__responsive-content"></div>');$elm.prepend('<div class="ty-table__responsive-header">'+thTexts[index]+'</div>');}});});if(subTable.length){subTable.each(function(index){var subTableElm=$('[data-ca-has-sub-table_'+index+']');subTableElm.prepend(subTableStack[index]);subTableElm.removeAttr('data-ca-has-sub-table_'+index);});}});}},resizeDialog:function(){var self=this;var dlg=$('.ui-dialog');$('.ui-widget-overlay').css({'min-height':$(window).height()});$(dlg).css({'position':'absolute','width':$(window).width()-20,'left':'10px','top':'10px','max-height':'none','height':'auto','margin-bottom':'10px'});$(dlg).find('.ui-dialog-title').css({'width':$(window).width()-80});$(dlg).find('.ui-dialog-content').css({'height':'auto','max-height':'none'});$(dlg).find('.object-container').css({'height':'auto'});$(dlg).find('.buttons-container').css({'position':'relative','top':'auto','left':'0px','right':'0px','bottom':'0px','width':'auto'});var w=$.getWindowSizes();$('.cm-notification-content.notification-content-extended').each(function(id,elm){var notification=$(elm),notificationMaxHeight=w.view_height-300;notification.find('.cm-notification-max-height').css({'max-height':notificationMaxHeight});notification.css('top',w.view_height / 2-(notification.height()/ 2));});},responsiveDialog:function(){var self=this;$.ceEvent('on','ce.dialogshow',function(){if(self.winWidth()<=767){self.resizeDialog();$('body,html').scrollTop(0);}});},responsiveFilters:function(e){var filtersContent=$('.cm-horizontal-filters-content');if(this.winWidth()<=767){filtersContent.removeClass('cm-popup-box');}else{filtersContent.addClass('cm-popup-box');}
if(this.winWidth()>767){$('.ty-horizontal-filters-content-to-right').removeClass('ty-horizontal-filters-content-to-right');$('.ty-horizontal-product-filters-dropdown').click(function(){var hrFiltersWidth=$(".cm-horizontal-filters").width();var hrFiltersContent=$('.cm-horizontal-filters-content',this);setTimeout(function(){var position=hrFiltersContent.offset().left+hrFiltersContent.width();if(position>hrFiltersWidth){hrFiltersContent.addClass("ty-horizontal-filters-content-to-right");}},1);});}},responsiveInlineTextLinksLargeTouch:function(e){var elm=$(e.target);if(ui.winWidth()>=767&&e.type=='touchstart'){var linksItem=elm.hasClass('ty-text-links__item')?elm:elm.closest('.ty-text-links__item');if(!linksItem.hasClass('is-hover-link')&&linksItem.hasClass('ty-text-links__subitems')){e.preventDefault();linksItem.siblings('.ty-text-links__item').removeClass('is-hover-link');linksItem.addClass('is-hover-link');}}else{$('.ty-text-links__item').removeClass('is-hover-link');}}};})();$(document).ready(function(){$(window).resize(function(e){ui.winWidth();ui.responsiveTables();ui.responsiveFilters();if(ui.winWidth()<=767){ui.resizeDialog();}});if(window.addEventListener){window.addEventListener('orientationchange',function(){if(ui.winWidth()<=767){ui.resizeDialog();}
$.ceDialog('get_last').ceDialog('reload');},false);}
ui.responsiveDialog();ui.responsiveTables();ui.responsiveFilters();$.ceEvent('on','ce.ajaxdone',function(){ui.responsiveTables();ui.responsiveMenu();ui.responsiveFilters();if(ui.winWidth()<=767){ui.resizeDialog();}});ui.responsiveMenu();$(document).on('touchstart',function(e){var elm=$(e.target);if(elm.hasClass('cm-menu-item-responsive')||elm.closest('.cm-menu-item-responsive').length){ui.responsiveMenuLargeTouch(e);}else{$('.is-hover-menu').removeClass('is-hover-menu');}
if(elm.hasClass('ty-text-links__subitems')||elm.closest('.ty-text-links__subitems').length){ui.responsiveInlineTextLinksLargeTouch(e);}else{$('.is-hover-link').removeClass('is-hover-link');}});});$.ceEvent('on','ce.tab.init',function(){$(window).resize(function(e){ui.responsiveTabs();});ui.responsiveTabs();ui.responsiveScroll();});}(Tygh,Tygh.$));(function(_,$){$(document).ready(function(){var ab_lc_time=300;$(document).on('click','.ab-lc-group .show-hidden-items-level-2',function(){var ul=$(this).parent().find('ul.hidden-items-level-2');if(ul.hasClass('opened')){ul.removeClass('opened').stop().slideUp(ab_lc_time);$(this).removeClass('opened');}else{ul.addClass('opened').slideDown(ab_lc_time);$(this).addClass('opened');}});$(document).on('click','.ab-lc-group li[subcategories="Y"] > a',function(){var ul=$(this).parent().find('ul.items-level-3');var li_of_a=$(this).parent();if(ul.hasClass('opened')){ul.removeClass('opened').stop().slideUp(ab_lc_time);li_of_a.removeClass('opened');}else{ul.addClass('opened').slideDown(ab_lc_time);li_of_a.addClass('opened');}
return false;});$(document).on('click','.ab-lc-landing .show-hidden-items-level-2',function(){var ul=$(this).parent().find('ul.hidden-items-level-2');if(ul.hasClass('opened')){ul.removeClass('opened').stop().slideUp(ab_lc_time);$(this).removeClass('opened');}else{ul.addClass('opened').slideDown(ab_lc_time);$(this).addClass('opened');}});});}(Tygh,Tygh.$));(function(_,$){$(document).on('click','.fullwidth-cat a',function(){var state='';if($(this).parent().hasClass('active')){$(this).parent().removeClass('active');var state='';}else{$(this).parent().addClass('active');var state='active';}
if(state=='active'){$(".categories_grid").addClass('full_width');}else{$(".categories_grid").removeClass('full_width');}
$.ceAjax('request',fn_url('categories.ab__ut_full_width'),{hidden:true,caching:false,force_exec:true,method:'post',data:{'full_width':state},});});$(document).on('click','.hiddenFilter a',function(){var state='';if($(this).parent().hasClass('active')){$(this).parent().removeClass('active');var state='';}else{$(this).parent().addClass('active');var state='active';}
if(state=='active'){$(".categories_grid").addClass('side_hidden');}else{$(".categories_grid").removeClass('side_hidden');}
$.ceAjax('request',fn_url('categories.ab__ut_hidden_filter'),{hidden:true,caching:false,force_exec:true,method:'post',data:{'side_hidden':state},});});if($('.subcategories').length<1){$(".categories_grid .cat-menu-vertical").addClass("hidden");}
$(window).resize(function(e){var width=$(window).width();if(width<=768){$('.abt__ut__flying_block:not(.abt__ut__moved)').each(function(){$(this).addClass('abt__ut__moved');var $placeholder=$("<div></div>").uniqueId();var $elem=$(this).replaceWith($placeholder);var target=$('#pagination_contents').parent();$elem.data('caID',$placeholder.attr('id'));$elem.insertBefore(target);});}else{$('.abt__ut__flying_block.abt__ut__moved').each(function(){elem=$(this);var target=elem.data('caID');if(target!==undefined){elem.removeClass('abt__ut__moved');$('#'+target).replaceWith(elem);}});}});$(window).trigger('resize');}(Tygh,Tygh.$));(function(_,$){$(document).ready(function(){function ab__gt_cloneTools(tab_id,prev_id){if(!tab_id||!prev_id){return;}
var _prev_tools=ab__gt_getTabTools(prev_id);_prev_tools.each(function(){var self=$(this);var _new_id=self.prop('id').replace(prev_id,tab_id);if(!$('#'+_new_id).length){var _new_tool=self.clone();_new_tool.children().remove();_new_tool.prop('id',_new_id).hide().appendTo(self.parent());}});}
function ab__gt_getTabTools(id){return $('.cm-tab-tools[id^="tools_'+id+'"]');}
function ab__gt_getTabIds(id){var result_ids=['content_'+id];var additional_ids=$('#content_'+id).data('caTabTargetId');if(additional_ids){result_ids.push(additional_ids);}
ab__gt_getTabTools(id).each(function(){result_ids.push($(this).prop('id'));});return result_ids.join(',');}
var active_id=$('li.ab__grid_tabs.cm-ajax.cm-js:first').prop('id');$('li.ab__grid_tabs.cm-ajax.cm-js').each(function(){var self=$(this);var tab_id=self.prop('id');if(self.hasClass('active')){var block=$('#content_'+tab_id);if(block.length){content=block.html().replace(/<!--.*?-->/,'').replace(/(^\s+|\s+$)/,'');if(content.length){return true;}}}
if(!self.data('passed')&&self.attr('data-url')){self.data('passed',true);var id='content_'+tab_id;var block=$('#'+id);if(!block.length){self.parents('.cm-j-tabs').eq(0).next().prepend('<div id="'+id+'"></div>');block=$('#'+id);}
if(!self.hasClass('active')){block.addClass('hidden');}
ab__gt_cloneTools(tab_id,active_id);$.ceAjax('request',self.attr('data-url'),{result_ids:ab__gt_getTabIds(tab_id),hidden:true,repeat_on_error:true});}});});}(Tygh,Tygh.$));(function(_,$){$.ceEvent('on','ce.commoninit',function(context){var $elems=$('.cm-gdpr-tooltip',context);if($elems.length){$elems.each(function(){var target_elem_id=$(this).data('ceGdprTargetElem'),$target_elem=$('#'+target_elem_id);if($target_elem.length){$(this).appendTo('body');$target_elem.data('ceTooltipPosition','center').data('ceTooltipClass','ty-gdpr-tooltip ty-gdpr-tooltip--light').ceTooltip({tip:'#gdpr_tooltip_'+target_elem_id,tipClass:'ty-gdpr-tooltip ty-gdpr-tooltip--light',use_dynamic_plugin:!Modernizr.touchevents,onShow:function(){var $tip=this.getTip();if($tip.position().left<0){$tip.css({left:'0px'});}
if(/iPad/i.test(navigator.userAgent)){$tip.css({top:$tip.position().top+$(window).scrollTop()});}}}).on('touchstart',function(){$(this).data('tooltip').show();});$('#gdpr_tooltip_'+target_elem_id).find('.cm-gdpr-tooltip--close').on('touchstart',function(){$target_elem.data('tooltip').hide();});}});}});}(Tygh,Tygh.$));(function(_,$){var is_paypal_script_loaded;var methods={set_submit_button_id:function(button_id){var button_id_new=button_id+'_'+Date.now();var button=$('#'+button_id);button.attr('id',button_id_new);return button_id_new;},get_token_request:function(payment_form){var form_data={in_context_order:1};var fields=payment_form.serializeArray();for(var i in fields){form_data[fields[i].name]=fields[i].value;}
form_data.result_ids=null;return form_data;},set_window_close_error_handler:function(){window.onerror=function(e){$.redirect(_.current_url);};},setup_payment_form:function(params){params=params||{};params.merchat_id=params.merchat_id||'';params.environment=params.environment||'sandbox';params.payment_form=params.payment_form||null;params.submit_button_id=params.submit_button_id||'';paypal.checkout.setup(params.merchat_id,{environment:params.environment,buttons:[{button:params.submit_button_id,condition:function(){return $.ceFormValidator('check',{form:params.payment_form});},click:function(e){e.preventDefault();var form_data=methods.get_token_request(params.payment_form);paypal.checkout.initXO();$.ceAjax('request',fn_url('checkout.place_order'),{method:'post',data:form_data,callback:function(response){try{var data=JSON.parse(response.text);if(data.token){var url=paypal.checkout.urlPrefix+data.token+'&useraction=commit';paypal.checkout.startFlow(url);}
if(data.error){paypal.checkout.closeFlow();}}catch(ex){paypal.checkout.initXO();}},hidden:true,cache:false});}}]});},init:function(jelm){var payment_form=jelm.closest('form');var submit_button_id=methods.set_submit_button_id(jelm.data('caPaypalButton'));methods.set_window_close_error_handler();var paypal_script_load_callback=function(){is_paypal_script_loaded=true;var paypal_presence_checker=setInterval(function(){if(typeof paypal!=='undefined'){clearInterval(paypal_presence_checker);methods.setup_payment_form({merchant_id:jelm.data('caPaypalMerchantId'),environment:jelm.data('caPaypalEnvironment'),payment_form:payment_form,submit_button_id:submit_button_id});}},300);};if(is_paypal_script_loaded){paypal_script_load_callback();}else{$.getScript('//www.paypalobjects.com/api/checkout.min.js',paypal_script_load_callback);}}};$.extend({cePaypalInContextCheckout:function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{$.error('ty.paypalInContextCheckout: method '+method+' does not exist');}}});$.ceEvent('on','ce.commoninit',function(){if(_.embedded){return;}
var jelm=$('[data-ca-paypal-in-context-checkout]');if(jelm.length){$.cePaypalInContextCheckout('init',jelm);}});})(Tygh,Tygh.$);function fn_buy_together_get_price_schema(chain_id)
{var $=Tygh.$;var result={};var prices={};var total_price=0;elms=$('div#content_tab_products_'+chain_id);$('.cm-chain-'+chain_id,elms).each(function(){var elm_id=$(this).val();if(elm_id!='{bt_id}'){prices[elm_id]={};prices[elm_id]['amount']=$('[name*=amount]',$(this).parent().parent()).val();if(!isNaN(parseInt(prices[elm_id]['amount']))){prices[elm_id]['amount']=parseInt(prices[elm_id]['amount']);}else{prices[elm_id]['amount']=0;}
prices[elm_id]['price']=parseFloat($('#item_price_bt_'+chain_id+'_'+elm_id,elms).val());prices[elm_id]['modifier']=parseFloat($('#item_modifier_bt_'+chain_id+'_'+elm_id,elms).val());if(isNaN(prices[elm_id]['modifier'])){prices[elm_id]['modifier']=0;}
prices[elm_id]['modifier_type']=$('#item_modifier_type_bt_'+chain_id+'_'+elm_id,elms).val();total_price+=prices[elm_id]['price']*prices[elm_id]['amount'];}});result['price_schema']=prices;result['total_price']=total_price;return result;}
function fn_buy_together_apply_discount(chain_id)
{var $=Tygh.$;var global_discount=0;elms=$('div#content_tab_products_'+chain_id);global_discount=parseFloat($('#elm_buy_together_global_discount_'+chain_id,elms).val());if(isNaN(global_discount)){return false;}
var prices={};var total_price=0;var discounted_price=0;price_schema=fn_buy_together_get_price_schema(chain_id);prices=price_schema['price_schema'];total_price=price_schema['total_price'];if(global_discount>total_price){global_discount=total_price;$('#elm_buy_together_global_discount_'+chain_id,elms).val(total_price);}
for(i in prices){discount=prices[i]['price']/ total_price*global_discount;discount=discount.toFixed(2);item_price=prices[i]['price']-discount;item_price=item_price.toFixed(2);$('#item_modifier_bt_'+chain_id+'_'+i,elms).val(discount);$('#item_modifier_type_bt_'+chain_id+'_'+i,elms).val('by_fixed');$('[id*=item_display_price_bt_'+chain_id+'_'+i+'_]',elms).text(prices[i]['price'].toFixed(2));$('[id*=item_discounted_price_bt_'+chain_id+'_'+i+'_]',elms).text(item_price);discounted_price+=item_price*prices[i]['amount'];}
$('[id*=total_price_'+chain_id+']',elms).text(total_price.toFixed(2));$('[id*=price_for_all_'+chain_id+']',elms).text(discounted_price.toFixed(2));}
function fn_buy_together_recalculate(chain_id)
{var $=Tygh.$;var prices={};var total_price=0;var discounted_price=0;elms=$('div#content_tab_products_'+chain_id);price_schema=fn_buy_together_get_price_schema(chain_id);prices=price_schema['price_schema'];total_price=price_schema['total_price'];for(i in prices){switch(prices[i]['modifier_type']){case'to_fixed':item_price=prices[i]['modifier'];break;case'by_fixed':item_price=prices[i]['price']-prices[i]['modifier'];break;case'to_percentage':item_price=(prices[i]['modifier']/ 100)*prices[i]['price'];break;case'by_percentage':item_price=prices[i]['price']-(prices[i]['modifier']/ 100)*prices[i]['price'];break;default:item_price=prices[i]['price'];}
if(item_price<0){item_price=0;}
item_price=item_price.toFixed(2);discounted_price+=item_price*prices[i]['amount'];$('[id*=item_display_price_bt_'+chain_id+'_'+i+'_]',elms).text(prices[i]['price'].toFixed(2));$('[id*=item_discounted_price_bt_'+chain_id+'_'+i+'_]',elms).text(item_price);}
$('[id*=price_for_all_'+chain_id+']',elms).text(discounted_price.toFixed(2));$('[id*=total_price_'+chain_id+']',elms).text(total_price.toFixed(2));$('#elm_buy_together_global_discount_'+chain_id,elms).val('');}
function fn_buy_together_share_discount(evt,chain_id)
{if(evt.keyCode){code=evt.keyCode;}else if(evt.which){code=evt.which;}
if(code==13){fn_buy_together_apply_discount(chain_id);}
return false;}
(function(_,$){$.ceEvent('on','ce.picker_add_js_item',function(data){if(data['var_prefix']=='p'){price=parseFloat(data.item_id.price);if(isNaN(price)){price=0;}
data['append_obj_content']=data['append_obj_content'].str_replace('{bt_id}',data['item_id']['product_id']).str_replace('{price}',price);var content=$('<tr>'+data['append_obj_content']+'</tr>');content.find('span[id*=\'price_bt\']').each(function(){$(this).text(price.toFixed(2));});data['append_obj_content']=content.html();}});$.ceEvent('on','ce.picker_transfer_js_items',function(data){for(var id in data){data[id].price=parseFloat($('#price_'+id).val());if(data[id].option&&data[id].option.path){for(var option_id in data[id].option.path){variant_id=data[id].option.path[option_id];modifier=parseFloat($('#bt_option_modifier_'+option_id+'_'+variant_id).val());if(!isNaN(modifier)){data[id].price+=modifier;}}}
data[id].test=true;}});$.ceEvent('on','ce.commoninit',function(context){var available_period_checkbox=context.find('.use_avail_period');if(available_period_checkbox.length!==0){available_period_checkbox.on('click',function(){var $=Tygh.$,elm_obj=$(this),checked=elm_obj.prop('checked'),chain_id=$.trim(elm_obj.data('id'));$('input#elm_buy_together_avail_from_'+chain_id+',input#elm_buy_together_avail_till_'+chain_id).prop('disabled',!checked);});available_period_checkbox.closest('form').on('reset',function(){var chain_id=$.trim(available_period_checkbox.data('id')),checked=available_period_checkbox.attr('checked')?1:0;$('input#elm_buy_together_avail_from_'+chain_id+',input#elm_buy_together_avail_till_'+chain_id).prop('disabled',!checked);});}});$(document).ready(function(){$('.cm-buy-together-submit').closest('form').on('submit',function(){var container={};container=$('form',$(this).parents());fields=$('.cm-failed-field',container);if(fields.length>0){$.ceNotification('show',{type:'E',title:_.tr('error'),message:_.tr('buy_together_fill_the_mandatory_fields'),message_state:'I'});}});});}(Tygh,Tygh.$));(function(_,$){(function($){var maps=[];var saved_point=null;var map_params=[];var latitude=0;var longitude=0;var zoom=0;var latitude_name='';var longitude_name='';var map_container='';var start_init_pickupmaps=false;var finish_init_pickupmaps=false;var methods={init:function(options,callback){var group_key=options.group_key;if(!('pickupmaps'in window)){if(!start_init_pickupmaps){start_init_pickupmaps=true;$.getScript('//api-maps.yandex.ru/2.1/?ns=pickupmaps&lang='+options.language,function(){pickupmaps.ready(function(){finish_init_pickupmaps=true;$.cePickup('init',options,callback);});});}else{setTimeout(function(){$.cePickup('init',options,callback)},500);}
return false;}
if(!start_init_pickupmaps||(start_init_pickupmaps&&!finish_init_pickupmaps)){setTimeout(function(){$.cePickup('init',options,callback)},500);return false;}
latitude=options.latitude;longitude=options.longitude;map_container=options.map_container;zoom=options.zoom;map_params[group_key]={zoom:12,type:'yandex#map',center:[latitude,longitude],controls:['default']};if(_.area=='A'){$.extend(map_params[group_key],{draggableCursor:'crosshair',draggingCursor:'pointer'});}else{$.extend(map_params[group_key],{zoom:zoom});}
if(typeof(callback)=='function'){callback();}},destroyMaps:function(group_key)
{maps.forEach(function(element,index){maps[index].destroy();});},show:function(options)
{if(typeof options=="undefined"){return false;}
var group_key=options.group_key;if(!map_params[group_key]){return $.cePickup('init',options,function(){$.cePickup('show',options);});}
if(maps[group_key]){maps=[];$.cePickup('destroyMaps');}
if(!maps[group_key]||!maps[group_key].layers._map||!$('ymaps').length){maps[group_key]=new pickupmaps.Map(document.getElementById(options.map_container),map_params[group_key]);maps[group_key].controls.remove('searchControl');maps[group_key].behaviors.disable(['scrollZoom']);var marker;storeData=options.storeData;for(var keyvar=0;keyvar<storeData.length;keyvar++){var marker_html='<div style="padding-right: 10px"><strong>'+storeData[keyvar]['name'];marker_html+='</strong><p>';if(storeData[keyvar]['city']!=''){marker_html+=storeData[keyvar]['city']+', ';}
if(typeof(storeData[keyvar]['pickup_address'])!=='undefined'){marker_html+=storeData[keyvar]['pickup_address'];}
if(typeof(storeData[keyvar]['pickup_phone'])!=='undefined'){marker_html+='<br/>'+storeData[keyvar]['pickup_phone'];}
if(typeof(storeData[keyvar]['pickup_time'])!=='undefined'){marker_html+='<br/>'+storeData[keyvar]['pickup_time'];}
if(typeof(storeData[keyvar]['description'])!=='undefined'){marker_html+='<br/>'+storeData[keyvar]['description'];}
if(options['selectStore']===true){marker_html+='<p><a data-ca-shipping-id="'+storeData[keyvar]['shipping_id']+'" data-ca-group-key="'+storeData[keyvar]['group_key']+'" data-ca-location-id="'+storeData[keyvar]['store_location_id']+'" class="cm-map-select-location ty-btn ty-btn__tertiary text-button"></a></p>';}
marker_html+='</p></div>';marker=new pickupmaps.Placemark([storeData[keyvar]['latitude'],storeData[keyvar]['longitude']],{balloonContentBody:marker_html});maps[group_key].geoObjects.add(marker);}
if(storeData.length==1){maps[group_key].setCenter(marker.geometry.getCoordinates());maps[group_key].setZoom(zoom);}else{pickupmaps.geoQuery(maps[group_key].geoObjects).applyBoundsToMap(maps[group_key]);var select=$('.ty-one-store__radio-'+group_key+':checked').attr('value');if(!select){var select=$('.one-store__radio:checked').attr('value');}
if(select){$.each(storeData,function(key,value){if(value['store_location_id']==select){maps[group_key].setCenter([value['latitude'],value['longitude']]);maps[group_key].setZoom(zoom);return false;}});}}}},saveLocation:function()
{if(saved_point){$('#'+latitude_name).val(saved_point[0]);$('#'+latitude_name+'_hidden').val(saved_point[0]);$('#'+longitude_name).val(saved_point[1]);$('#'+longitude_name+'_hidden').val(saved_point[1]);}
saved_point=null;},selectLocation:function(location,group_key,shipping_id)
{if(maps[group_key]){maps[group_key].destroy();}
$('#store_'+group_key+'_'+shipping_id+'_'+location).prop("checked",true);fn_calculate_total_shipping_cost();},viewLocation:function(latitude,longitude,group_key)
{maps[group_key].setCenter([latitude,longitude]);maps[group_key].setZoom(zoom);},viewLocations:function(group_key)
{pickupmaps.geoQuery(maps[group_key].geoObjects).applyBoundsToMap(maps[group_key]);}};$.extend({cePickup:function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{$.error('ty.map: method '+method+' does not exist');}}});})($);$(document).ready(function(){$(document).on('click','.cm-map-select-store',function(e){$.cePickup('destroyMaps');fn_calculate_total_shipping_cost();});$(document).on('click','.cm-map-save-location',function(){$.cePickup('saveLocation');});$(document).on('click','.cm-map-select-location',function(){var jelm=$(this);var location=jelm.data('ca-location-id');var group_key=jelm.data('ca-group-key');var shipping_id=jelm.data('ca-shipping-id');$.cePickup('selectLocation',location,group_key,shipping_id);});$(document).on('click','.cm-map-view-location',function(){var jelm=$(this);var latitude=jelm.data('ca-latitude');var longitude=jelm.data('ca-longitude');var group_key=jelm.data('ca-group-key');$.cePickup('viewLocation',latitude,longitude,group_key);if($(this).data('ca-scroll')){var id=$(this).data('ca-scroll');$.scrollToElm(id);}});$(document).on('click','.cm-map-view-locations',function(){var jelm=$(this);var group_key=jelm.parent().data('ca-group-key');$.cePickup('viewLocations',group_key);if($(this).data('ca-scroll')){var id=$(this).data('ca-scroll');$.scrollToElm(id);}});});}(Tygh,Tygh.$));(function(_,$){var base_url;var ajax_ids;function setHandler(){$(_.doc).on('click','.ab__dotd_promotions-filter_item',function(){var self=$(this);var category_id=self.data('caCategoryId');var url;if(category_id!==undefined){url=$.attachToUrl(base_url,'category_id='+category_id)}else{url=base_url;}
return getProducts(url,self);});}
function setCallback(){$.ceEvent('on','ce.commoninit',function(context){context.find('.ab__dotd_promotions-filter').each(function(){var self=$(this);if(self.data('caBaseUrl')){base_url=self.data('caBaseUrl');ajax_ids=self.data('caTargetId');}});});}
function getProducts(url,obj){if(ajax_ids){$.ceAjax('request',url,{result_ids:ajax_ids,full_render:true,save_history:true,caching:false,scroll:'.ty-mainbox-title',obj:obj,callback:function(response){if(response.no_products){obj.removeClass('active');}}});}else{$.redirect(url);}
return false;}
setCallback();setHandler();$.ceEvent('on','ce.commoninit',function(context){if(_.ab__dotd!==undefined){if(_.ab__dotd.chains_page===undefined){_.ab__dotd.chains_page=1;}
var desc=$('div.ab__dotd_promotion-description',context);if(_.ab__dotd.current_dispatch=='promotions.view'&&desc.length&&!desc.hasClass('ab__dotd_description')){_.ab__dotd.full_height_description=desc.outerHeight();if(parseInt(_.ab__dotd.full_height_description)>parseInt(_.ab__dotd.max_height)){desc.addClass('ab__dotd_description').css({maxHeight:parseInt(_.ab__dotd.max_height)+"px",overflow:"hidden"});desc.after("<div class='ab__dotd_more'>"+_.ab__dotd.more+"</div>");}}
var container=$('div.ab__dotd_chains_content'),button=$('.ab__dotd_chains-show_more',container);if(_.ab__dotd.current_dispatch=='promotions.list'&&container.length&&button.length){$(_.doc).off('click','.ab__dotd_chains-show_more');$(_.doc).on('click','.ab__dotd_chains-show_more',function(){button.addClass('loading');$.ceAjax('request',fn_url('ab__dotd.get_chains'),{hidden:true,caching:false,force_exec:true,save_history:true,method:'post',data:{'page':++_.ab__dotd.chains_page},callback:function(data){if(data.html!==undefined){button.before(data.html);if(data.search!==undefined){if(data.search.page<data.search.total_pages){$('.ab__dotd-text_get_more').text(data.search.text_get_more);$('.ab__dotd-text_showed').text(data.search.text_showed);}else{button.remove();}}
$.commonInit(container);}}});button.removeClass('loading');});}}});$(document).on('click','div.ab__dotd_more:not(.inverse)',function(){var button=$(this);$('div.ab__dotd_promotion-description').animate({maxHeight:_.ab__dotd.full_height_description},800,function(){$('.ab__dotd_description').addClass('inverse');button.addClass('inverse').html(_.ab__dotd.less);});});$(document).on('click','div.ab__dotd_more.inverse',function(){var button=$(this);$('div.ab__dotd_promotion-description').animate({maxHeight:parseInt(_.ab__dotd.max_height)+"px"},800,function(){$('.ab__dotd_description').removeClass('inverse');button.removeClass('inverse').html(_.ab__dotd.more);});});}(Tygh,Tygh.$));(function(w,d){var qwerty={q:[0,0],w:[0,1],e:[0,2],r:[0,3],t:[0,4],y:[0,5],u:[0,6],i:[0,7],o:[0,8],p:[0,9],a:[1,0],s:[1,1],d:[1,2],f:[1,3],g:[1,4],h:[1,5],j:[1,6],k:[1,7],l:[1,8],z:[2,0],x:[2,1],c:[2,2],v:[2,3],b:[2,4],n:[2,5],m:[2,6]};var azerty={a:[0,0],z:[0,1],e:[0,2],r:[0,3],t:[0,4],y:[0,5],u:[0,6],i:[0,7],o:[0,8],p:[0,9],q:[1,0],s:[1,1],d:[1,2],f:[1,3],g:[1,4],h:[1,5],j:[1,6],k:[1,7],l:[1,8],m:[1,9],w:[2,0],x:[2,1],c:[2,2],v:[2,3],b:[2,4],n:[2,5]};var lang=(window.navigator.languages||window.navigator.language||window.navigator.userLanguage)[0],keyboard=((typeof lang!='undefined')&&(typeof lang.indexOf=='function')&&lang.indexOf("fr")>-1)?azerty:qwerty;function TheaterJS(options){var self=this,defaults={autoplay:true,erase:true};self.events={};self.scene=-1;self.scenario=[];self.options=self.utils.merge(defaults,options||{});self.casting={};self.current={};self.state="ready";self.lineVisible=false;}
TheaterJS.prototype={constructor:TheaterJS,set:function(value,args){var self=this;self.current.model=value;var setDataPlaceholder=false;switch(self.current.type){case"function":self.current.voice.apply(self,args);break;default:if(self.lineVisible!=true&&value!=args[3]){value+='|';self.lineVisible=true;setDataPlaceholder=true;}else{self.lineVisible=false;}
if(self.current.voice.tagName=='INPUT'){if(setDataPlaceholder){self.current.voice.setAttribute('data-cur-placeholder-string',args[3]);}
self.current.voice.placeholder=value;}else{self.current.voice.innerHTML=value;}
break;}
return self;},getSayingSpeed:function(filter,constant){if(typeof filter!=="number"){constant=filter;filter=0;}
var self=this,experience=self.current.experience+filter,skill=constant?experience:self.utils.randomFloat(experience,1);return self.utils.getPercentageBetween(1000,50,skill);},getInvincibility:function(){var self=this;return self.current.experience*10;},isMistaking:function(){var self=this;return self.current.experience<self.utils.randomFloat(0,1.4);},utils:{merge:function(dest,origin){for(var key in origin)if(origin.hasOwnProperty(key))dest[key]=origin[key];return dest;},getPercentageBetween:function(min,max,perc){return(min-(min*perc))+(max*perc);},randomCharNear:function(ch){var utils=this,threshold=1,nearbyChars=[],uppercase=!!ch.match(/[A-Z]/);ch=ch.toLowerCase();var charPosition=keyboard[ch]||[],c,p;for(c in keyboard){if(!keyboard.hasOwnProperty(c)||c===ch)continue;p=keyboard[c];if(Math.abs(charPosition[0]-p[0])<=threshold&&Math.abs(charPosition[1]-p[1])<=threshold){nearbyChars.push(c);}}
var randomChar=nearbyChars.length>0?nearbyChars[utils.randomNumber(0,nearbyChars.length-1)]:utils.randomChar();return uppercase?randomChar.toUpperCase():randomChar;},randomChar:function(){var utils=this,chars='abcdefghijklmnopqrstuvwxyz';return chars.charAt(utils.randomNumber(0,chars.length-1));},randomNumber:function(min,max){return Math.floor(Math.random()*(max-min+1))+min;},randomFloat:function(min,max){return Math.round((Math.random()*(max-min)+min)*10)/ 10;},hasClass:function(el,className){if(el.classList)return el.classList.contains(className);else return new RegExp('(^| )'+className+'( |$)','gi').test(el.className);},addClass:function(el,className){if(el.classList)el.classList.add(className);else el.className+=' '+className;},removeClass:function(el,className){if(el.classList)el.classList.remove(className);else el.className=el.className.replace(new RegExp('(^|\\b)'+className.split(' ').join('|')+'(\\b|$)','gi'),' ');}},train:function(actor){var self=this,defaults={experience:.6,voice:function(newValue,newChar,prevChar,str){console.log(newValue);},type:"function",model:""};return self.utils.merge(defaults,actor);},describe:function(name,experience,voice){if(typeof name!=="string")throw("actor's name has wrong type: "+typeof name);var self=this,actor={name:name};if(experience!==void 0)actor.experience=experience;if(voice!==void 0){actor.type=typeof voice==="function"?"function":"DOM";if(actor.type==="DOM")actor.voice=typeof voice==="string"?d.querySelector(voice):voice;else actor.voice=voice;}
self.casting[name]=self.train(actor);return self;},write:function(){var self=this,scenes=Array.prototype.splice.apply(arguments,[0]),scene;for(var i=0,l=scenes.length;i<l;i++){scene=scenes[i];if(typeof scene==="string"){var params=scene.split(":"),hasActor=params.length>1,actor=hasActor?params[0].trim():null,speech=hasActor?params[1]:params[0];if(hasActor)self.write({name:"actor",args:[actor]});if(self.options.erase&&hasActor)self.write({name:"erase"});self.write({name:"say",args:[speech,!hasActor]});}else if(typeof scene==="number"){if(scene<0)self.write({name:"erase",args:[scene]});else self.write({name:"wait",args:[scene]});}else if(typeof scene==="function"){self.write({name:"call",args:[scene]});}else if(scene instanceof Object){self.scenario.push(scene);}}
if(self.options.autoplay)self.play();return self;},play:function(restart){var self=this;if(restart===true)self.scene=-1;if(self.state==="ready")self.next();return self;},on:function(events,fn){var self=this;events=events.split(",");for(var i=0,l=events.length,event;i<l;i++){event=events[i]=events[i].trim();(self.events[event]||(self.events[event]=[])).push(fn);}
return self;},emit:function(scope,event,args){if(typeof scope!=="string")throw("emit: scope missing");if(typeof event!=="string")event=void 0;else if(event!==void 0&&args===void 0)args=event;var self=this,eventName=scope+(event?":"+event:"");self.trigger(eventName,args).trigger("*",[eventName].concat(args));return self;},trigger:function(eventName,args){var self=this,events=self.events[eventName]||[];(args instanceof Array||(args=[args]));for(var i=0,l=events.length;i<l;i++)events[i].apply(self,[eventName].concat(args));return self;},call:function(fn,async){var self=this;fn.apply(self);return!async?self.next():self;},next:function(){var self=this,prevScene=self.scenario[self.scene];if(prevScene)self.emit(prevScene.name,"end",[prevScene.name].concat(prevScene.args));if(self.scene+1>=self.scenario.length){self.state="ready";}else{self.state="playing";var nextScene=self.scenario[++self.scene];self.emit(nextScene.name,"start",[nextScene.name].concat(nextScene.args));self[nextScene.name].apply(self,nextScene.args);}
return self;},actor:function(actor){var self=this;self.current=self.casting[actor];return self.next();},say:function(speech,append){var self=this,mistaken=false,invincible=self.getInvincibility(),cursor,model;if(append){model=self.current.model;cursor=self.current.model.length-1;speech=model+speech;}else{model=self.current.model="";cursor=-1;}
var timeout=setTimeout(function nextChar(){var prevChar=model.charAt(cursor),newChar,newValue;if(mistaken){invincible=self.getInvincibility();mistaken=false;newChar=null;newValue=model=model.substr(0,cursor);cursor--;}else{cursor++;newChar=speech.charAt(cursor);if(--invincible<0&&(prevChar!==newChar||self.current.experience<=.3)&&self.isMistaking()){newChar=self.utils.randomCharNear(newChar);}
if(newChar!==speech.charAt(cursor))mistaken=true;newValue=model+=newChar;}
self.set(newValue,[newValue,newChar,prevChar,speech]);if(mistaken||cursor<speech.length)timeout=setTimeout(nextChar,self.getSayingSpeed());else self.next();},self.getSayingSpeed());return self;},erase:function(n){var self=this,cursor=typeof self.current.model==="string"?self.current.model.length:-1,min=typeof n==="number"&&n<0?cursor+1+n:0;if(cursor<0)return self.next();var timeout=setTimeout(function eraseChar(){var prevChar=self.current.model.charAt(cursor),newValue=self.current.model.substr(0,--cursor);self.set(newValue,[newValue,null,prevChar,newValue]);if(cursor>=min)setTimeout(eraseChar,self.getSayingSpeed(.2,true));else self.next();},self.getSayingSpeed(.2,true));return self;},wait:function(delay){var self=this;setTimeout(function(){self.next();},delay);return self;}};w.TheaterJS=TheaterJS;})(window,document);(function(_,$){function ab__toogle_video(iframe){iframe.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}','*');}
$.ceEvent('on','ce.dialogshow',function(d){if(/ab__vg_video_/.test(d.attr('id'))){$('.ab__vg_loading',$(d)).trigger('click');}
$(d).one('dialogclose',function(event){var iframe=$('iframe',$(this));if(iframe.length){iframe.each(function(i,v){ab__toogle_video(v);});}});});$(_.doc).on('click','.cm-thumbnails-mini',function(){var iframes=$('iframe.ab__vg-image_gallery_video.hidden');iframes.each(function(){ab__toogle_video($(this).get(0));});});$(_.doc).on('click','.ab__vg_loading',function(){var elem=$(this),iframe=$('<iframe></iframe>');iframe.addClass(elem.attr('class'));iframe.attr('id',elem.attr('id'));$.each(elem.data(),function(i,val){iframe.attr(i,val);});elem.replaceWith(iframe);iframe.removeClass('ab__vg_loading');});$(_.doc).on('click','.ab__vg-image_gallery_video.cm-dialog-opener',function(){var id=$(this).data('caTargetId');if(id!==undefined){$('#'+id+' .ab__vg_loading').trigger('click');}});})(Tygh,Tygh.$);(function(e){function t(){var e=document.createElement("input"),t="onpaste";return e.setAttribute(t,""),"function"==typeof e[t]?"paste":"input"}var n,a=t()+".mask",r=navigator.userAgent,i=/iphone/i.test(r),o=/android/i.test(r);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&(n=this.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,r){var c,l,s,u,f,h;return!t&&this.length>0?(c=e(this[0]),c.data(e.mask.dataName)()):(r=e.extend({placeholder:e.mask.placeholder,completed:null},r),l=e.mask.definitions,s=[],u=h=t.length,f=null,e.each(t.split(""),function(e,t){"?"==t?(h--,u=e):l[t]?(s.push(RegExp(l[t])),null===f&&(f=s.length-1)):s.push(null)}),this.trigger("unmask").each(function(){function c(e){for(;h>++e&&!s[e];);return e}function d(e){for(;--e>=0&&!s[e];);return e}function m(e,t){var n,a;if(!(0>e)){for(n=e,a=c(t);h>n;n++)if(s[n]){if(!(h>a&&s[n].test(R[a])))break;R[n]=R[a],R[a]=r.placeholder,a=c(a)}b(),x.caret(Math.max(f,e))}}function p(e){var t,n,a,i;for(t=e,n=r.placeholder;h>t;t++)if(s[t]){if(a=c(t),i=R[t],R[t]=n,!(h>a&&s[a].test(i)))break;n=i}}function g(e){var t,n,a,r=e.which;8===r||46===r||i&&127===r?(t=x.caret(),n=t.begin,a=t.end,0===a-n&&(n=46!==r?d(n):a=c(n-1),a=46===r?c(a):a),k(n,a),m(n,a-1),e.preventDefault()):27==r&&(x.val(S),x.caret(0,y()),e.preventDefault())}function v(t){var n,a,i,l=t.which,u=x.caret();t.ctrlKey||t.altKey||t.metaKey||32>l||l&&(0!==u.end-u.begin&&(k(u.begin,u.end),m(u.begin,u.end-1)),n=c(u.begin-1),h>n&&(a=String.fromCharCode(l),s[n].test(a)&&(p(n),R[n]=a,b(),i=c(n),o?setTimeout(e.proxy(e.fn.caret,x,i),0):x.caret(i),r.completed&&i>=h&&r.completed.call(x))),t.preventDefault())}function k(e,t){var n;for(n=e;t>n&&h>n;n++)s[n]&&(R[n]=r.placeholder)}function b(){x.val(R.join(""))}function y(e){var t,n,a=x.val(),i=-1;for(t=0,pos=0;h>t;t++)if(s[t]){for(R[t]=r.placeholder;pos++<a.length;)if(n=a.charAt(pos-1),s[t].test(n)){R[t]=n,i=t;break}if(pos>a.length)break}else R[t]===a.charAt(pos)&&t!==u&&(pos++,i=t);return e?b():u>i+1?(x.val(""),k(0,h)):(b(),x.val(x.val().substring(0,i+1))),u?t:f}var x=e(this),R=e.map(t.split(""),function(e){return"?"!=e?l[e]?r.placeholder:e:void 0}),S=x.val();x.data(e.mask.dataName,function(){return e.map(R,function(e,t){return s[t]&&e!=r.placeholder?e:null}).join("")}),x.attr("readonly")||x.one("unmask",function(){x.unbind(".mask").removeData(e.mask.dataName)}).bind("focus.mask",function(){clearTimeout(n);var e;S=x.val(),e=y(),n=setTimeout(function(){b(),e==t.length?x.caret(0,e):x.caret(e)},10)}).bind("blur.mask",function(){y(),x.val()!=S&&x.change()}).bind("keydown.mask",g).bind("keypress.mask",v).bind(a,function(){setTimeout(function(){var e=y(!0);x.caret(e),r.completed&&e==x.val().length&&r.completed.call(x)},0)}),y()}))}})})(jQuery);!function(a){function b(a){var b=document.createElement("input"),c="on"+a,d=c in b;return d||(b.setAttribute(c,"return;"),d="function"==typeof b[c]),b=null,d}function c(a){var b="text"==a||"tel"==a;if(!b){var c=document.createElement("input");c.setAttribute("type",a),b="text"===c.type,c=null}return b}function d(b,c,e){var f=e.aliases[b];return f?(f.alias&&d(f.alias,void 0,e),a.extend(!0,e,f),a.extend(!0,e,c),!0):!1}function e(b){function c(c){function d(a,b,c,d){this.matches=[],this.isGroup=a||!1,this.isOptional=b||!1,this.isQuantifier=c||!1,this.isAlternator=d||!1,this.quantifier={min:1,max:1}}function e(c,d,e){var f=b.definitions[d],g=0==c.matches.length;if(e=void 0!=e?e:c.matches.length,f&&!m){f.placeholder=a.isFunction(f.placeholder)?f.placeholder.call(this,b):f.placeholder;for(var h=f.prevalidator,i=h?h.length:0,j=1;j<f.cardinality;j++){var k=i>=j?h[j-1]:[],l=k.validator,n=k.cardinality;c.matches.splice(e++,0,{fn:l?"string"==typeof l?new RegExp(l):new function(){this.test=l}:new RegExp("."),cardinality:n?n:1,optionality:c.isOptional,newBlockMarker:g,casing:f.casing,def:f.definitionSymbol||d,placeholder:f.placeholder,mask:d})}c.matches.splice(e++,0,{fn:f.validator?"string"==typeof f.validator?new RegExp(f.validator):new function(){this.test=f.validator}:new RegExp("."),cardinality:f.cardinality,optionality:c.isOptional,newBlockMarker:g,casing:f.casing,def:f.definitionSymbol||d,placeholder:f.placeholder,mask:d})}else c.matches.splice(e++,0,{fn:null,cardinality:0,optionality:c.isOptional,newBlockMarker:g,casing:null,def:d,placeholder:void 0,mask:d}),m=!1}for(var f,g,h,i,j,k,l=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})\??|[^.?*+^${[]()|\\]+|./g,m=!1,n=new d,o=[],p=[];f=l.exec(c);)switch(g=f[0],g.charAt(0)){case b.optionalmarker.end:case b.groupmarker.end:if(h=o.pop(),o.length>0){if(i=o[o.length-1],i.matches.push(h),i.isAlternator){j=o.pop();for(var q=0;q<j.matches.length;q++)j.matches[q].isGroup=!1;o.length>0?(i=o[o.length-1],i.matches.push(j)):n.matches.push(j)}}else n.matches.push(h);break;case b.optionalmarker.start:o.push(new d(!1,!0));break;case b.groupmarker.start:o.push(new d(!0));break;case b.quantifiermarker.start:var r=new d(!1,!1,!0);g=g.replace(/[{}]/g,"");var s=g.split(","),t=isNaN(s[0])?s[0]:parseInt(s[0]),u=1==s.length?t:isNaN(s[1])?s[1]:parseInt(s[1]);if(("*"==u||"+"==u)&&(t="*"==u?0:1),r.quantifier={min:t,max:u},o.length>0){var v=o[o.length-1].matches;if(f=v.pop(),!f.isGroup){var w=new d(!0);w.matches.push(f),f=w}v.push(f),v.push(r)}else{if(f=n.matches.pop(),!f.isGroup){var w=new d(!0);w.matches.push(f),f=w}n.matches.push(f),n.matches.push(r)}break;case b.escapeChar:m=!0;break;case b.alternatormarker:o.length>0?(i=o[o.length-1],k=i.matches.pop()):k=n.matches.pop(),k.isAlternator?o.push(k):(j=new d(!1,!1,!1,!0),j.matches.push(k),o.push(j));break;default:if(o.length>0){if(i=o[o.length-1],i.matches.length>0&&(k=i.matches[i.matches.length-1],k.isGroup&&(k.isGroup=!1,e(k,b.groupmarker.start,0),e(k,b.groupmarker.end))),e(i,g),i.isAlternator){j=o.pop();for(var q=0;q<j.matches.length;q++)j.matches[q].isGroup=!1;o.length>0?(i=o[o.length-1],i.matches.push(j)):n.matches.push(j)}}else n.matches.length>0&&(k=n.matches[n.matches.length-1],k.isGroup&&(k.isGroup=!1,e(k,b.groupmarker.start,0),e(k,b.groupmarker.end))),e(n,g)}return n.matches.length>0&&(k=n.matches[n.matches.length-1],k.isGroup&&(k.isGroup=!1,e(k,b.groupmarker.start,0),e(k,b.groupmarker.end)),p.push(n)),p}function d(d,e){if(void 0==d||""==d)return void 0;if(1==d.length&&0==b.greedy&&0!=b.repeat&&(b.placeholder=""),b.repeat>0||"*"==b.repeat||"+"==b.repeat){var f="*"==b.repeat?0:"+"==b.repeat?1:b.repeat;d=b.groupmarker.start+d+b.groupmarker.end+b.quantifiermarker.start+f+","+b.repeat+b.quantifiermarker.end}return void 0==a.inputmask.masksCache[d]&&(a.inputmask.masksCache[d]={mask:d,maskToken:c(d),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:e}),a.extend(!0,{},a.inputmask.masksCache[d])}function e(a){if(a=a.toString(),b.numericInput){a=a.split("").reverse();for(var c=0;c<a.length;c++)a[c]==b.optionalmarker.start?a[c]=b.optionalmarker.end:a[c]==b.optionalmarker.end?a[c]=b.optionalmarker.start:a[c]==b.groupmarker.start?a[c]=b.groupmarker.end:a[c]==b.groupmarker.end&&(a[c]=b.groupmarker.start);a=a.join("")}return a}var f=void 0;if(a.isFunction(b.mask)&&(b.mask=b.mask.call(this,b)),a.isArray(b.mask)){if(b.mask.length>1){b.keepStatic=void 0==b.keepStatic?!0:b.keepStatic;var g="(";return a.each(b.mask,function(b,c){g.length>1&&(g+=")|("),g+=e(void 0==c.mask||a.isFunction(c.mask)?c:c.mask)}),g+=")",d(g,b.mask)}b.mask=b.mask.pop()}return b.mask&&(f=void 0==b.mask.mask||a.isFunction(b.mask.mask)?d(e(b.mask),b.mask):d(e(b.mask.mask),b.mask)),f}function f(d,e,f){function g(a,b,c){b=b||0;var d,e,f,g=[],h=0;do{if(a===!0&&k().validPositions[h]){var i=k().validPositions[h];e=i.match,d=i.locator.slice(),g.push(c===!0?i.input:F(h,e))}else f=p(h,d,h-1),e=f.match,d=f.locator.slice(),g.push(F(h,e));h++}while((void 0==cb||cb>h-1)&&null!=e.fn||null==e.fn&&""!=e.def||b>=h);return g.pop(),g}function k(){return e}function l(a){var b=k();b.buffer=void 0,b.tests={},a!==!0&&(b._buffer=void 0,b.validPositions={},b.p=0)}function m(a){var b=k(),c=-1,d=b.validPositions;void 0==a&&(a=-1);var e=c,f=c;for(var g in d){var h=parseInt(g);(-1==a||null!=d[h].match.fn)&&(a>=h&&(e=h),h>=a&&(f=h))}return c=-1!=e&&a-e>1||a>f?e:f}function n(b,c,d){if(f.insertMode&&void 0!=k().validPositions[b]&&void 0==d){var e,g=a.extend(!0,{},k().validPositions),h=m();for(e=b;h>=e;e++)delete k().validPositions[e];k().validPositions[b]=c;var i,j=!0;for(e=b;h>=e;e++){var l=g[e];if(void 0!=l){var n=k().validPositions;i=!f.keepStatic&&n[e]&&(void 0!=n[e+1]&&s(e+1,n[e].locator.slice(),e).length>1||void 0!=n[e].alternation)?e+1:B(e),j=r(i,l.match.def)?j&&y(i,l.input,!0,!0)!==!1:null==l.match.fn}if(!j)break}if(!j)return k().validPositions=a.extend(!0,{},g),!1}else k().validPositions[b]=c;return!0}function o(a,b,c,d){var e,g=a;k().p=a,void 0!=k().validPositions[a]&&k().validPositions[a].input==f.radixPoint&&(b++,g++);for(e=g;b>e;e++)void 0!=k().validPositions[e]&&(c===!0||0!=f.canClearPosition(k(),e,m(),d,f))&&delete k().validPositions[e];for(l(!0),e=g+1;e<=m();){for(;void 0!=k().validPositions[g];)g++;var h=k().validPositions[g];g>e&&(e=g+1);var i=k().validPositions[e];void 0!=i&&void 0==h?(r(g,i.match.def)&&y(g,i.input,!0)!==!1&&(delete k().validPositions[e],e++),g++):e++}var j=m();j>=a&&void 0!=k().validPositions[j]&&k().validPositions[j].input==f.radixPoint&&delete k().validPositions[j],l(!0)}function p(a,b,c){for(var d,e=s(a,b,c),g=m(),h=k().validPositions[g]||s(0)[0],i=void 0!=h.alternation?h.locator[h.alternation].split(","):[],j=0;j<e.length&&(d=e[j],!(d.match&&(f.greedy&&d.match.optionalQuantifier!==!0||(d.match.optionality===!1||d.match.newBlockMarker===!1)&&d.match.optionalQuantifier!==!0)&&(void 0==h.alternation||void 0!=d.locator[h.alternation]&&x(d.locator[h.alternation].toString().split(","),i))));j++);return d}function q(a){return k().validPositions[a]?k().validPositions[a].match:s(a)[0].match}function r(a,b){for(var c=!1,d=s(a),e=0;e<d.length;e++)if(d[e].match&&d[e].match.def==b){c=!0;break}return c}function s(b,c,d){function e(c,d,f,h){function l(f,h,n){if(g>1e4)return alert("jquery.inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+k().mask),!0;if(g==b&&void 0==f.matches)return i.push({match:f,locator:h.reverse()}),!0;if(void 0!=f.matches){if(f.isGroup&&n!==!0){if(f=l(c.matches[m+1],h))return!0}else if(f.isOptional){var o=f;if(f=e(f,d,h,n)){var p=i[i.length-1].match,q=0==a.inArray(p,o.matches);q&&(j=!0),g=b}}else if(f.isAlternator){var r,s=f,t=[],u=i.slice(),v=h.length,w=d.length>0?d.shift():-1;if(-1==w||"string"==typeof w){var x,y=g,z=d.slice();"string"==typeof w&&(x=w.split(","));for(var A=0;A<s.matches.length;A++){i=[],f=l(s.matches[A],[A].concat(h),n)||f,r=i.slice(),g=y,i=[];for(var B=0;B<z.length;B++)d[B]=z[B];for(var C=0;C<r.length;C++)for(var D=r[C],E=0;E<t.length;E++){var F=t[E];if(D.match.mask==F.match.mask&&("string"!=typeof w||-1!=a.inArray(D.locator[v].toString(),x))){r.splice(C,1),F.locator[v]=F.locator[v]+","+D.locator[v],F.alternation=v;break}}t=t.concat(r)}"string"==typeof w&&(t=a.map(t,function(b,c){if(isFinite(c)){var d,e=b.locator[v].toString().split(",");b.locator[v]=void 0,b.alternation=void 0;for(var f=0;f<e.length;f++)d=-1!=a.inArray(e[f],x),d&&(void 0!=b.locator[v]?(b.locator[v]+=",",b.alternation=v,b.locator[v]+=e[f]):b.locator[v]=parseInt(e[f]));if(void 0!=b.locator[v])return b}})),i=u.concat(t),j=!0}else f=l(s.matches[w],[w].concat(h),n);if(f)return!0}else if(f.isQuantifier&&n!==!0)for(var G=f,H=d.length>0&&n!==!0?d.shift():0;H<(isNaN(G.quantifier.max)?H+1:G.quantifier.max)&&b>=g;H++){var I=c.matches[a.inArray(G,c.matches)-1];if(f=l(I,[H].concat(h),!0)){var p=i[i.length-1].match;p.optionalQuantifier=H>G.quantifier.min-1;var q=0==a.inArray(p,I.matches);if(q){if(H>G.quantifier.min-1){j=!0,g=b;break}return!0}return!0}}else if(f=e(f,d,h,n))return!0}else g++}for(var m=d.length>0?d.shift():0;m<c.matches.length;m++)if(c.matches[m].isQuantifier!==!0){var n=l(c.matches[m],[m].concat(f),h);if(n&&g==b)return n;if(g>b)break}}var f=k().maskToken,g=c?d:0,h=c||[0],i=[],j=!1;if(void 0==c){for(var l,m=b-1;void 0==(l=k().validPositions[m])&&m>-1;)m--;if(void 0!=l&&m>-1)g=m,h=l.locator.slice();else{for(m=b-1;void 0==(l=k().tests[m])&&m>-1;)m--;void 0!=l&&m>-1&&(g=m,h=l[0].locator.slice())}}for(var n=h.shift();n<f.length;n++){var o=e(f[n],h,[n]);if(o&&g==b||g>b)break}return(0==i.length||j)&&i.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]}),k().tests[b]=a.extend(!0,[],i),k().tests[b]}function t(){return void 0==k()._buffer&&(k()._buffer=g(!1,1)),k()._buffer}function u(){return void 0==k().buffer&&(k().buffer=g(!0,m(),!0)),k().buffer}function v(a,b,c){if(c=c||u().slice(),a===!0)l(),a=0,b=c.length;else for(var d=a;b>d;d++)delete k().validPositions[d],delete k().tests[d];for(var d=a;b>d;d++)c[d]!=f.skipOptionalPartCharacter&&y(d,c[d],!0,!0)}function w(a,b){switch(b.casing){case"upper":a=a.toUpperCase();break;case"lower":a=a.toLowerCase()}return a}function x(b,c){for(var d=f.greedy?c:c.slice(0,1),e=!1,g=0;g<b.length;g++)if(-1!=a.inArray(b[g],d)){e=!0;break}return e}function y(b,c,d,e){function g(b,c,d,e){var g=!1;return a.each(s(b),function(h,i){for(var j=i.match,p=c?1:0,q="",r=(u(),j.cardinality);r>p;r--)q+=D(b-(r-1));if(c&&(q+=c),g=null!=j.fn?j.fn.test(q,k(),b,d,f):c!=j.def&&c!=f.skipOptionalPartCharacter||""==j.def?!1:{c:j.def,pos:b},g!==!1){var s=void 0!=g.c?g.c:c;s=s==f.skipOptionalPartCharacter&&null===j.fn?j.def:s;var t=b;if(void 0!=g.remove&&o(g.remove,g.remove+1,!0),g.refreshFromBuffer){var x=g.refreshFromBuffer;if(d=!0,v(x===!0?x:x.start,x.end),void 0==g.pos&&void 0==g.c)return g.pos=m(),!1;if(t=void 0!=g.pos?g.pos:b,t!=b)return g=a.extend(g,y(t,s,!0)),!1}else if(g!==!0&&void 0!=g.pos&&g.pos!=b&&(t=g.pos,v(b,t),t!=b))return g=a.extend(g,y(t,s,!0)),!1;return 1!=g&&void 0==g.pos&&void 0==g.c?!1:(h>0&&l(!0),n(t,a.extend({},i,{input:w(s,j)}),e)||(g=!1),!1)}}),g}function h(b,c,d,e){var g,h,i=a.extend(!0,{},k().validPositions);for(g=m();g>=0;g--)if(k().validPositions[g]&&void 0!=k().validPositions[g].alternation){h=k().validPositions[g].alternation;break}if(void 0!=h)for(var j in k().validPositions)if(parseInt(j)>parseInt(g)&&void 0===k().validPositions[j].alternation){for(var n=k().validPositions[j],o=n.locator[h],p=k().validPositions[g].locator[h].split(","),q=0;q<p.length;q++)if(o<p[q]){for(var r,s,t=j-1;t>=0;t--)if(r=k().validPositions[t],void 0!=r){s=r.locator[h],r.locator[h]=p[q];break}if(o!=r.locator[h]){for(var v=u().slice(),w=j;w<m()+1;w++)delete k().validPositions[w],delete k().tests[w];l(!0),f.keepStatic=!f.keepStatic;for(var w=j;w<v.length;w++)v[w]!=f.skipOptionalPartCharacter&&y(m()+1,v[w],!1,!0);r.locator[h]=s;var x=y(b,c,d,e);if(f.keepStatic=!f.keepStatic,x)return x;l(),k().validPositions=a.extend(!0,{},i)}}break}return!1}function i(b,c){for(var d=k().validPositions[c],e=d.locator,f=e.length,g=b;c>g;g++)if(!z(g)){var h=s(g),i=h[0],j=-1;a.each(h,function(a,b){for(var c=0;f>c;c++)b.locator[c]&&x(b.locator[c].toString().split(","),e[c].toString().split(","))&&c>j&&(j=c,i=b)}),n(g,a.extend({},i,{input:i.match.def}),!0)}}d=d===!0;for(var j=u(),p=b-1;p>-1&&!k().validPositions[p];p--);for(p++;b>p;p++)void 0==k().validPositions[p]&&((!z(p)||j[p]!=F(p))&&s(p).length>1||j[p]==f.radixPoint||"0"==j[p]&&a.inArray(f.radixPoint,j)<p)&&g(p,j[p],!0);var q=b,r=!1,t=a.extend(!0,{},k().validPositions);if(q<A()&&(r=g(q,c,d,e),!d&&r===!1)){var C=k().validPositions[q];if(!C||null!=C.match.fn||C.match.def!=c&&c!=f.skipOptionalPartCharacter){if((f.insertMode||void 0==k().validPositions[B(q)])&&!z(q))for(var E=q+1,G=B(q);G>=E;E++)if(r=g(E,c,d,e),r!==!1){i(q,E),q=E;break}}else r={caret:B(q)}}if(r===!1&&f.keepStatic&&N(j)&&(r=h(b,c,d,e)),r===!0&&(r={pos:q}),a.isFunction(f.postValidation)&&0!=r&&!d){l(!0);var H=f.postValidation(u(),f);if(!H)return l(!0),k().validPositions=a.extend(!0,{},t),!1}return r}function z(a){var b=q(a);return null!=b.fn?b.fn:!1}function A(){var a;cb=bb.prop("maxLength"),-1==cb&&(cb=void 0);var b,c=m(),d=k().validPositions[c],e=void 0!=d?d.locator.slice():void 0;for(b=c+1;void 0==d||null!=d.match.fn||null==d.match.fn&&""!=d.match.def;b++)d=p(b,e,b-1),e=d.locator.slice();return a=b,void 0==cb||cb>a?a:cb}function B(a){var b=A();if(a>=b)return b;for(var c=a;++c<b&&!z(c)&&(f.nojumps!==!0||f.nojumpsThreshold>c););return c}function C(a){var b=a;if(0>=b)return 0;for(;--b>0&&!z(b););return b}function D(a){return void 0==k().validPositions[a]?F(a):k().validPositions[a].input}function E(b,c,d,e,g){if(e&&a.isFunction(f.onBeforeWrite)){var h=f.onBeforeWrite.call(b,e,c,d,f);if(h){if(h.refreshFromBuffer){var i=h.refreshFromBuffer;v(i===!0?i:i.start,i.end,h.buffer),l(!0),c=u()}d=h.caret||d}}b._valueSet(c.join("")),void 0!=d&&K(b,d),g===!0&&(fb=!0,a(b).trigger("input"))}function F(a,b){return b=b||q(a),void 0!=b.placeholder?b.placeholder:null==b.fn?b.def:f.placeholder.charAt(a%f.placeholder.length)}function G(b,c,d,e){function f(){var a=!1,b=t().slice(i,B(i)).join("").indexOf(h);if(-1!=b&&!z(i)){a=!0;for(var c=t().slice(i,i+b),d=0;d<c.length;d++)if(" "!=c[d]){a=!1;break}}return a}var g=void 0!=e?e.slice():b._valueGet().split(""),h="",i=0;l(),k().p=B(-1),c&&b._valueSet("");var j=t().slice(0,B(-1)).join(""),n=g.join("").match(new RegExp(H(j),"g"));n&&n.length>0&&(g.splice(0,n.length*j.length),i=B(i)),a.each(g,function(c,e){var g=a.Event("keypress");g.which=e.charCodeAt(0),h+=e;var j=m(),l=k().validPositions[j],n=p(j+1,l?l.locator.slice():void 0,j);if(!f()||d){var o=d?c:null==n.match.fn&&n.match.optionality&&j+1<k().p?j+1:k().p;T.call(b,g,!0,!1,d,o),i=o+1,h=""}else T.call(b,g,!0,!1,!0,j+1)}),c&&E(b,u(),a(b).is(":focus")?B(m(0)):void 0,a.Event("checkval"))}function H(b){return a.inputmask.escapeRegex.call(this,b)}function I(b){if(b.data("_inputmask")&&!b.hasClass("hasDatepicker")){var c=[],d=k().validPositions;for(var e in d)d[e].match&&null!=d[e].match.fn&&c.push(d[e].input);var g=(db?c.reverse():c).join(""),h=(db?u().slice().reverse():u()).join("");return a.isFunction(f.onUnMask)&&(g=f.onUnMask.call(b,h,g,f)||g),g}return b[0]._valueGet()}function J(a){if(db&&"number"==typeof a&&(!f.greedy||""!=f.placeholder)){var b=u().length;a=b-a}return a}function K(b,c,d){var e,g=b.jquery&&b.length>0?b[0]:b;if("number"!=typeof c)return g.setSelectionRange?(c=g.selectionStart,d=g.selectionEnd):document.selection&&document.selection.createRange&&(e=document.selection.createRange(),c=0-e.duplicate().moveStart("character",-1e5),d=c+e.text.length),{begin:J(c),end:J(d)};if(c=J(c),d=J(d),d="number"==typeof d?d:c,a(g).is(":visible")){var h=a(g).css("font-size").replace("px","")*d;g.scrollLeft=h>g.scrollWidth?h:0,0==f.insertMode&&c==d&&d++,g.setSelectionRange?(g.selectionStart=c,g.selectionEnd=d):g.createTextRange&&(e=g.createTextRange(),e.collapse(!0),e.moveEnd("character",d),e.moveStart("character",c),e.select())}}function L(b){var c,d,e=u(),f=e.length,g=m(),h={},i=k().validPositions[g],j=void 0!=i?i.locator.slice():void 0;for(c=g+1;c<e.length;c++)d=p(c,j,c-1),j=d.locator.slice(),h[c]=a.extend(!0,{},d);var l=i&&void 0!=i.alternation?i.locator[i.alternation].split(","):[];for(c=f-1;c>g&&(d=h[c].match,(d.optionality||d.optionalQuantifier||i&&void 0!=i.alternation&&void 0!=h[c].locator[i.alternation]&&-1!=a.inArray(h[c].locator[i.alternation].toString(),l))&&e[c]==F(c,d));c--)f--;return b?{l:f,def:h[f]?h[f].match:void 0}:f}function M(a){for(var b=L(),c=a.length-1;c>b&&!z(c);c--);a.splice(b,c+1-b)}function N(b){if(a.isFunction(f.isComplete))return f.isComplete.call(bb,b,f);if("*"==f.repeat)return void 0;{var c=!1,d=L(!0),e=C(d.l);m()}if(void 0==d.def||d.def.newBlockMarker||d.def.optionalQuantifier){c=!0;for(var g=0;e>=g;g++){var h=z(g),i=q(g);if(h&&void 0==k().validPositions[g]&&i.optionality!==!0&&i.optionalQuantifier!==!0||!h&&b[g]!=F(g)){c=!1;break}}}return c}function O(a,b){return db?a-b>1||a-b==1&&f.insertMode:b-a>1||b-a==1&&f.insertMode}function P(b){var c=a._data(b).events;a.each(c,function(b,c){a.each(c,function(a,b){if("inputmask"==b.namespace&&"setvalue"!=b.type){var c=b.handler;b.handler=function(a){if(!this.disabled&&(!this.readOnly||"keydown"==a.type&&a.ctrlKey&&67==a.keyCode)){switch(a.type){case"input":if(fb===!0)return fb=!1,a.preventDefault();break;case"keydown":eb=!1;break;case"keypress":if(eb===!0)return a.preventDefault();eb=!0;break;case"compositionstart":break;case"compositionupdate":fb=!0;break;case"compositionend":}return c.apply(this,arguments)}a.preventDefault()}}})})}function Q(b){function c(b){if(void 0==a.valHooks[b]||1!=a.valHooks[b].inputmaskpatch){var c=a.valHooks[b]&&a.valHooks[b].get?a.valHooks[b].get:function(a){return a.value},d=a.valHooks[b]&&a.valHooks[b].set?a.valHooks[b].set:function(a,b){return a.value=b,a};a.valHooks[b]={get:function(b){var d=a(b);if(d.data("_inputmask")){if(d.data("_inputmask").opts.autoUnmask)return d.inputmask("unmaskedvalue");var e=c(b),f=d.data("_inputmask"),g=f.maskset,h=g._buffer;return h=h?h.join(""):"",e!=h?e:""}return c(b)},set:function(b,c){var e,f=a(b),g=f.data("_inputmask");return g?(e=d(b,a.isFunction(g.opts.onBeforeMask)?g.opts.onBeforeMask.call(mb,c,g.opts)||c:c),f.triggerHandler("setvalue.inputmask")):e=d(b,c),e},inputmaskpatch:!0}}}function d(){var b=a(this),c=a(this).data("_inputmask");return c?c.opts.autoUnmask?b.inputmask("unmaskedvalue"):h.call(this)!=t().join("")?h.call(this):"":h.call(this)}function e(b){var c=a(this).data("_inputmask");c?(i.call(this,a.isFunction(c.opts.onBeforeMask)?c.opts.onBeforeMask.call(mb,b,c.opts)||b:b),a(this).triggerHandler("setvalue.inputmask")):i.call(this,b)}function g(b){a(b).bind("mouseenter.inputmask",function(){var b=a(this),c=this,d=c._valueGet();""!=d&&d!=u().join("")&&(this._valueSet(a.isFunction(f.onBeforeMask)?f.onBeforeMask.call(mb,d,f)||d:d),b.triggerHandler("setvalue.inputmask"))});var c=a._data(b).events,d=c.mouseover;if(d){for(var e=d[d.length-1],g=d.length-1;g>0;g--)d[g]=d[g-1];d[0]=e}}var h,i;if(!b._valueGet){if(Object.getOwnPropertyDescriptor){Object.getOwnPropertyDescriptor(b,"value")}document.__lookupGetter__&&b.__lookupGetter__("value")?(h=b.__lookupGetter__("value"),i=b.__lookupSetter__("value"),b.__defineGetter__("value",d),b.__defineSetter__("value",e)):(h=function(){return b.value},i=function(a){b.value=a},c(b.type),g(b)),b._valueGet=function(a){return db&&a!==!0?h.call(this).split("").reverse().join(""):h.call(this)},b._valueSet=function(a){i.call(this,db?a.split("").reverse().join(""):a)}}}function R(b,c,d,e){function g(){if(f.keepStatic){l(!0);var c,d=[];for(c=m();c>=0;c--)if(k().validPositions[c]){if(void 0!=k().validPositions[c].alternation)break;d.push(k().validPositions[c].input),delete k().validPositions[c]}if(c>0)for(;d.length>0;){k().p=B(m());var e=a.Event("keypress");e.which=d.pop().charCodeAt(0),T.call(b,e,!0,!1,!1,k().p)}}}if((f.numericInput||db)&&(c==a.inputmask.keyCode.BACKSPACE?c=a.inputmask.keyCode.DELETE:c==a.inputmask.keyCode.DELETE&&(c=a.inputmask.keyCode.BACKSPACE),db)){var h=d.end;d.end=d.begin,d.begin=h}if(c==a.inputmask.keyCode.BACKSPACE&&(d.end-d.begin<1||0==f.insertMode)?d.begin=C(d.begin):c==a.inputmask.keyCode.DELETE&&d.begin==d.end&&(d.end=z(d.end)?d.end+1:B(d.end)+1),o(d.begin,d.end,!1,e),e!==!0){g();var i=m(d.begin);i<d.begin?(-1==i&&l(),k().p=B(i)):k().p=d.begin}}function S(c){var d=this,e=a(d),g=c.keyCode,i=K(d);g==a.inputmask.keyCode.BACKSPACE||g==a.inputmask.keyCode.DELETE||h&&127==g||c.ctrlKey&&88==g&&!b("cut")?(c.preventDefault(),88==g&&($=u().join("")),R(d,g,i),E(d,u(),k().p,c,$!=u().join("")),d._valueGet()==t().join("")?e.trigger("cleared"):N(u())===!0&&e.trigger("complete"),f.showTooltip&&e.prop("title",k().mask)):g==a.inputmask.keyCode.END||g==a.inputmask.keyCode.PAGE_DOWN?setTimeout(function(){var a=B(m());f.insertMode||a!=A()||c.shiftKey||a--,K(d,c.shiftKey?i.begin:a,a)},0):g==a.inputmask.keyCode.HOME&&!c.shiftKey||g==a.inputmask.keyCode.PAGE_UP?K(d,0,c.shiftKey?i.begin:0):(f.undoOnEscape&&g==a.inputmask.keyCode.ESCAPE||90==g&&c.ctrlKey)&&c.altKey!==!0?(G(d,!0,!1,$.split("")),e.click()):g!=a.inputmask.keyCode.INSERT||c.shiftKey||c.ctrlKey?0!=f.insertMode||c.shiftKey||(g==a.inputmask.keyCode.RIGHT?setTimeout(function(){var a=K(d);K(d,a.begin)},0):g==a.inputmask.keyCode.LEFT&&setTimeout(function(){var a=K(d);K(d,db?a.begin+1:a.begin-1)},0)):(f.insertMode=!f.insertMode,K(d,f.insertMode||i.begin!=A()?i.begin:i.begin-1)),f.onKeyDown.call(this,c,u(),K(d).begin,f),gb=-1!=a.inArray(g,f.ignorables)}function T(b,c,d,e,g){var h=this,i=a(h),j=b.which||b.charCode||b.keyCode;if(!(c===!0||b.ctrlKey&&b.altKey)&&(b.ctrlKey||b.metaKey||gb))return!0;if(j){46==j&&0==b.shiftKey&&","==f.radixPoint&&(j=44);var m,o=c?{begin:g,end:g}:K(h),p=String.fromCharCode(j),q=O(o.begin,o.end);q&&(k().undoPositions=a.extend(!0,{},k().validPositions),R(h,a.inputmask.keyCode.DELETE,o,!0),o.begin=k().p,f.insertMode||(f.insertMode=!f.insertMode,n(o.begin,e),f.insertMode=!f.insertMode),q=!f.multi),k().writeOutBuffer=!0;var r=db&&!q?o.end:o.begin,t=y(r,p,e);if(t!==!1){if(t!==!0&&(r=void 0!=t.pos?t.pos:r,p=void 0!=t.c?t.c:p),l(!0),void 0!=t.caret)m=t.caret;else{var w=k().validPositions;m=!f.keepStatic&&(void 0!=w[r+1]&&s(r+1,w[r].locator.slice(),r).length>1||void 0!=w[r].alternation)?r+1:B(r)}k().p=m}if(d!==!1){var x=this;if(setTimeout(function(){f.onKeyValidation.call(x,t,f)},0),k().writeOutBuffer&&t!==!1){var z=u();E(h,z,c?void 0:f.numericInput?C(m):m,b,c!==!0),c!==!0&&setTimeout(function(){N(z)===!0&&i.trigger("complete")},0)}else q&&(k().buffer=void 0,k().validPositions=k().undoPositions)}else q&&(k().buffer=void 0,k().validPositions=k().undoPositions);if(f.showTooltip&&i.prop("title",k().mask),c&&a.isFunction(f.onBeforeWrite)){var A=f.onBeforeWrite.call(this,b,u(),m,f);if(A&&A.refreshFromBuffer){var D=A.refreshFromBuffer;v(D===!0?D:D.start,D.end,A.buffer),l(!0),A.caret&&(k().p=A.caret)}}b.preventDefault()}}function U(b){var c=this,d=a(c),e=c._valueGet(!0),g=K(c);if("propertychange"==b.type&&c._valueGet().length<=A())return!0;if("paste"==b.type){var h=e.substr(0,g.begin),i=e.substr(g.end,e.length);h==t().slice(0,g.begin).join("")&&(h=""),i==t().slice(g.end).join("")&&(i=""),window.clipboardData&&window.clipboardData.getData?e=h+window.clipboardData.getData("Text")+i:b.originalEvent&&b.originalEvent.clipboardData&&b.originalEvent.clipboardData.getData&&(e=h+b.originalEvent.clipboardData.getData("text/plain")+i)}var j=e;if(a.isFunction(f.onBeforePaste)){if(j=f.onBeforePaste.call(c,e,f),j===!1)return b.preventDefault(),!1;j||(j=e)}return G(c,!0,!1,db?j.split("").reverse():j.split("")),d.click(),N(u())===!0&&d.trigger("complete"),!1}function V(b){var c=this;G(c,!0,!1),N(u())===!0&&a(c).trigger("complete"),b.preventDefault()}function W(a){var b=this;$=u().join(""),(""==ab||0!=a.originalEvent.data.indexOf(ab))&&(_=K(b))}function X(b){var c=this,d=_||K(c);0==b.originalEvent.data.indexOf(ab)&&(l(),d={begin:0,end:0});var e=b.originalEvent.data;K(c,d.begin,d.end);for(var g=0;g<e.length;g++){var h=a.Event("keypress");h.which=e.charCodeAt(g),eb=!1,gb=!1,T.call(c,h)}setTimeout(function(){var a=k().p;E(c,u(),f.numericInput?C(a):a)},0),ab=b.originalEvent.data}function Y(){}function Z(b){if(bb=a(b),bb.is(":input")&&c(bb.attr("type"))){if(bb.data("_inputmask",{maskset:e,opts:f,isRTL:!1}),f.showTooltip&&bb.prop("title",k().mask),("rtl"==b.dir||f.rightAlign)&&bb.css("text-align","right"),"rtl"==b.dir||f.numericInput){b.dir="ltr",bb.removeAttr("dir");var d=bb.data("_inputmask");d.isRTL=!0,bb.data("_inputmask",d),db=!0}bb.unbind(".inputmask"),bb.closest("form").bind("submit",function(){$!=u().join("")&&bb.change(),bb[0]._valueGet&&bb[0]._valueGet()==t().join("")&&bb[0]._valueSet(""),f.removeMaskOnSubmit&&bb.inputmask("remove")}).bind("reset",function(){setTimeout(function(){bb.triggerHandler("setvalue.inputmask")},0)}),bb.bind("mouseenter.inputmask",function(){var b=a(this),c=this;!b.is(":focus")&&f.showMaskOnHover&&c._valueGet()!=u().join("")&&E(c,u())}).bind("blur.inputmask",function(b){var c=a(this),d=this;if(c.data("_inputmask")){var e=d._valueGet(),g=u().slice();hb=!0,$!=g.join("")&&setTimeout(function(){c.change(),$=g.join("")},0),""!=e&&(f.clearMaskOnLostFocus&&(e==t().join("")?g=[]:M(g)),N(g)===!1&&(c.trigger("incomplete"),f.clearIncomplete&&(l(),g=f.clearMaskOnLostFocus?[]:t().slice())),E(d,g,void 0,b))}}).bind("focus.inputmask",function(){var b=(a(this),this),c=b._valueGet();f.showMaskOnFocus&&(!f.showMaskOnHover||f.showMaskOnHover&&""==c)&&b._valueGet()!=u().join("")&&E(b,u(),B(m())),$=u().join("")}).bind("mouseleave.inputmask",function(){var b=a(this),c=this;if(f.clearMaskOnLostFocus){var d=u().slice(),e=c._valueGet();b.is(":focus")||e==b.attr("placeholder")||""==e||(e==t().join("")?d=[]:M(d),E(c,d))}}).bind("click.inputmask",function(){var b=a(this),c=this;if(b.is(":focus")){var d=K(c);if(d.begin==d.end)if(f.radixFocus&&""!=f.radixPoint&&-1!=a.inArray(f.radixPoint,u())&&(hb||u().join("")==t().join("")))K(c,a.inArray(f.radixPoint,u())),hb=!1;else{var e=db?J(d.begin):d.begin,g=B(m(e));g>e?K(c,z(e)?e:B(e)):K(c,g)}}}).bind("dblclick.inputmask",function(){var a=this;setTimeout(function(){K(a,0,B(m()))},0)}).bind(j+".inputmask dragdrop.inputmask drop.inputmask",U).bind("setvalue.inputmask",function(){var a=this;G(a,!0,!1),$=u().join(""),(f.clearMaskOnLostFocus||f.clearIncomplete)&&a._valueGet()==t().join("")&&a._valueSet("")}).bind("cut.inputmask",function(b){fb=!0;var c=this,d=a(c),e=K(c);R(c,a.inputmask.keyCode.DELETE,e),E(c,u(),k().p,b,$!=u().join("")),c._valueGet()==t().join("")&&d.trigger("cleared"),f.showTooltip&&d.prop("title",k().mask)}).bind("complete.inputmask",f.oncomplete).bind("incomplete.inputmask",f.onincomplete).bind("cleared.inputmask",f.oncleared),bb.bind("keydown.inputmask",S).bind("keypress.inputmask",T),i||bb.bind("compositionstart.inputmask",W).bind("compositionupdate.inputmask",X).bind("compositionend.inputmask",Y),"paste"===j&&bb.bind("input.inputmask",V),Q(b);var g=a.isFunction(f.onBeforeMask)?f.onBeforeMask.call(b,b._valueGet(),f)||b._valueGet():b._valueGet();G(b,!0,!1,g.split(""));var h=u().slice();$=h.join("");var n;try{n=document.activeElement}catch(o){}N(h)===!1&&f.clearIncomplete&&l(),f.clearMaskOnLostFocus&&(h.join("")==t().join("")?h=[]:M(h)),E(b,h),n===b&&K(b,B(m())),P(b)}}var $,_,ab,bb,cb,db=!1,eb=!1,fb=!1,gb=!1,hb=!0;if(void 0!=d)switch(d.action){case"isComplete":return bb=a(d.el),e=bb.data("_inputmask").maskset,f=bb.data("_inputmask").opts,N(d.buffer);case"unmaskedvalue":return bb=d.$input,e=bb.data("_inputmask").maskset,f=bb.data("_inputmask").opts,db=d.$input.data("_inputmask").isRTL,I(d.$input);case"mask":$=u().join(""),Z(d.el);break;case"format":bb=a({}),bb.data("_inputmask",{maskset:e,opts:f,isRTL:f.numericInput}),f.numericInput&&(db=!0);var ib=(a.isFunction(f.onBeforeMask)?f.onBeforeMask.call(bb,d.value,f)||d.value:d.value).split("");return G(bb,!1,!1,db?ib.reverse():ib),a.isFunction(f.onBeforeWrite)&&f.onBeforeWrite.call(this,void 0,u(),0,f),d.metadata?{value:db?u().slice().reverse().join(""):u().join(""),metadata:bb.inputmask("getmetadata")}:db?u().slice().reverse().join(""):u().join("");case"isValid":bb=a({}),bb.data("_inputmask",{maskset:e,opts:f,isRTL:f.numericInput}),f.numericInput&&(db=!0);var ib=d.value.split("");G(bb,!1,!0,db?ib.reverse():ib);for(var jb=u(),kb=L(),lb=jb.length-1;lb>kb&&!z(lb);lb--);return jb.splice(kb,lb+1-kb),N(jb)&&d.value==jb.join("");case"getemptymask":return bb=a(d.el),e=bb.data("_inputmask").maskset,f=bb.data("_inputmask").opts,t();case"remove":var mb=d.el;bb=a(mb),e=bb.data("_inputmask").maskset,f=bb.data("_inputmask").opts,mb._valueSet(I(bb)),bb.unbind(".inputmask"),bb.removeData("_inputmask");var nb;Object.getOwnPropertyDescriptor&&(nb=Object.getOwnPropertyDescriptor(mb,"value")),nb&&nb.get?mb._valueGet&&Object.defineProperty(mb,"value",{get:mb._valueGet,set:mb._valueSet}):document.__lookupGetter__&&mb.__lookupGetter__("value")&&mb._valueGet&&(mb.__defineGetter__("value",mb._valueGet),mb.__defineSetter__("value",mb._valueSet));try{delete mb._valueGet,delete mb._valueSet}catch(ob){mb._valueGet=void 0,mb._valueSet=void 0}break;case"getmetadata":if(bb=a(d.el),e=bb.data("_inputmask").maskset,f=bb.data("_inputmask").opts,a.isArray(e.metadata)){for(var pb,qb=m(),rb=qb;rb>=0;rb--)if(k().validPositions[rb]&&void 0!=k().validPositions[rb].alternation){pb=k().validPositions[rb].alternation;break}return void 0!=pb?e.metadata[k().validPositions[qb].locator[pb]]:e.metadata[0]}return e.metadata}}if(void 0===a.fn.inputmask){var g=navigator.userAgent,h=null!==g.match(new RegExp("iphone","i")),i=(null!==g.match(new RegExp("android.*safari.*","i")),null!==g.match(new RegExp("android.*chrome.*","i")),null!==g.match(new RegExp("android.*firefox.*","i"))),j=(/Kindle/i.test(g)||/Silk/i.test(g)||/KFTT/i.test(g)||/KFOT/i.test(g)||/KFJWA/i.test(g)||/KFJWI/i.test(g)||/KFSOWI/i.test(g)||/KFTHWA/i.test(g)||/KFTHWI/i.test(g)||/KFAPWA/i.test(g)||/KFAPWI/i.test(g),b("paste")?"paste":b("input")?"input":"propertychange");a.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:a.noop,onincomplete:a.noop,oncleared:a.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyDown:a.noop,onBeforeMask:void 0,onBeforePaste:void 0,onBeforeWrite:void 0,onUnMask:void 0,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:a.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",radixFocus:!1,nojumps:!1,nojumpsThreshold:0,keepStatic:void 0,definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1}},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:void 0,canClearPosition:a.noop,postValidation:void 0},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},masksCache:{},escapeRegex:function(a){var b=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"];return a.replace(new RegExp("(\\"+b.join("|\\")+")","gim"),"\\$1")},format:function(b,c,g){var h=a.extend(!0,{},a.inputmask.defaults,c);return d(h.alias,c,h),f({action:"format",value:b,metadata:g},e(h),h)},isValid:function(b,c){var g=a.extend(!0,{},a.inputmask.defaults,c);return d(g.alias,c,g),f({action:"isValid",value:b},e(g),g)}},a.fn.inputmask=function(b,c){function g(b,c,e){var f=a(b);f.data("inputmask-alias")&&d(f.data("inputmask-alias"),{},c);for(var g in c){var h=f.data("inputmask-"+g.toLowerCase());void 0!=h&&("mask"==g&&0==h.indexOf("[")?(c[g]=h.replace(/[\s[\]]/g,"").split("','"),c[g][0]=c[g][0].replace("'",""),c[g][c[g].length-1]=c[g][c[g].length-1].replace("'","")):c[g]="boolean"==typeof h?h:h.toString(),e&&(e[g]=c[g]))}return c}var h,i=a.extend(!0,{},a.inputmask.defaults,c);if("string"==typeof b)switch(b){case"mask":return d(i.alias,c,i),h=e(i),void 0==h?this:this.each(function(){f({action:"mask",el:this},a.extend(!0,{},h),g(this,i))});case"unmaskedvalue":var j=a(this);return j.data("_inputmask")?f({action:"unmaskedvalue",$input:j}):j.val();case"remove":return this.each(function(){var b=a(this);b.data("_inputmask")&&f({action:"remove",el:this})});case"getemptymask":return this.data("_inputmask")?f({action:"getemptymask",el:this}):"";case"hasMaskedValue":return this.data("_inputmask")?!this.data("_inputmask").opts.autoUnmask:!1;case"isComplete":return this.data("_inputmask")?f({action:"isComplete",buffer:this[0]._valueGet().split(""),el:this}):!0;case"getmetadata":return this.data("_inputmask")?f({action:"getmetadata",el:this}):void 0;default:return d(i.alias,c,i),d(b,c,i)||(i.mask=b),h=e(i),void 0==h?this:this.each(function(){f({action:"mask",el:this},a.extend(!0,{},h),g(this,i))})}else{if("object"==typeof b)return i=a.extend(!0,{},a.inputmask.defaults,b),d(i.alias,b,i),h=e(i),void 0==h?this:this.each(function(){f({action:"mask",el:this},a.extend(!0,{},h),g(this,i))});if(void 0==b)return this.each(function(){var b=a(this).attr("data-inputmask");if(b&&""!=b)try{b=b.replace(new RegExp("'","g"),'"');var e=a.parseJSON("{"+b+"}");a.extend(!0,e,c),i=a.extend(!0,{},a.inputmask.defaults,e),i=g(this,i),d(i.alias,e,i),i.alias=void 0,a(this).inputmask("mask",i)}catch(f){}if(a(this).attr("data-inputmask-mask")||a(this).attr("data-inputmask-alias")){i=a.extend(!0,{},a.inputmask.defaults,{});var h={};i=g(this,i,h),d(i.alias,h,i),i.alias=void 0,a(this).inputmask("mask",i)}})}}}return a.fn.inputmask}(jQuery),function(a){return a.extend(a.inputmask.defaults.definitions,{h:{validator:"[01][0-9]|2[0-3]",cardinality:2,prevalidator:[{validator:"[0-2]",cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:"[0-5]",cardinality:1}]},d:{validator:"0[1-9]|[12][0-9]|3[01]",cardinality:2,prevalidator:[{validator:"[0-3]",cardinality:1}]},m:{validator:"0[1-9]|1[012]",cardinality:2,prevalidator:[{validator:"[01]",cardinality:1}]},y:{validator:"(19|20)\\d{2}",cardinality:4,prevalidator:[{validator:"[12]",cardinality:1},{validator:"(19|20)",cardinality:2},{validator:"(19|20)\\d",cardinality:3}]}}),a.extend(a.inputmask.defaults.aliases,{"dd/mm/yyyy":{mask:"1/2/y",placeholder:"dd/mm/yyyy",regex:{val1pre:new RegExp("[0-3]"),val1:new RegExp("0[1-9]|[12][0-9]|3[01]"),val2pre:function(b){var c=a.inputmask.escapeRegex.call(this,b);return new RegExp("((0[1-9]|[12][0-9]|3[01])"+c+"[01])")},val2:function(b){var c=a.inputmask.escapeRegex.call(this,b);return new RegExp("((0[1-9]|[12][0-9])"+c+"(0[1-9]|1[012]))|(30"+c+"(0[13-9]|1[012]))|(31"+c+"(0[13578]|1[02]))")}},leapday:"29/02/",separator:"/",yearrange:{minyear:1900,maxyear:2099},isInYearRange:function(a,b,c){if(isNaN(a))return!1;var d=parseInt(a.concat(b.toString().slice(a.length))),e=parseInt(a.concat(c.toString().slice(a.length)));return(isNaN(d)?!1:d>=b&&c>=d)||(isNaN(e)?!1:e>=b&&c>=e)},determinebaseyear:function(a,b,c){var d=(new Date).getFullYear();if(a>d)return a;if(d>b){for(var e=b.toString().slice(0,2),f=b.toString().slice(2,4);e+c>b;)e--;var g=e+f;return a>g?a:g}return d},onKeyDown:function(b){var c=a(this);if(b.ctrlKey&&b.keyCode==a.inputmask.keyCode.RIGHT){var d=new Date;c.val(d.getDate().toString()+(d.getMonth()+1).toString()+d.getFullYear().toString()),c.triggerHandler("setvalue.inputmask")}},getFrontValue:function(a,b,c){for(var d=0,e=0,f=0;f<a.length&&"2"!=a.charAt(f);f++){var g=c.definitions[a.charAt(f)];g?(d+=e,e=g.cardinality):e++}return b.join("").substr(d,e)},definitions:{1:{validator:function(a,b,c,d,e){var f=e.regex.val1.test(a);return d||f||a.charAt(1)!=e.separator&&-1=="-./".indexOf(a.charAt(1))||!(f=e.regex.val1.test("0"+a.charAt(0)))?f:(b.buffer[c-1]="0",{refreshFromBuffer:{start:c-1,end:c},pos:c,c:a.charAt(0)})},cardinality:2,prevalidator:[{validator:function(a,b,c,d,e){var f=a;isNaN(b.buffer[c+1])||(f+=b.buffer[c+1]);var g=1==f.length?e.regex.val1pre.test(f):e.regex.val1.test(f);if(!d&&!g){if(g=e.regex.val1.test(a+"0"))return b.buffer[c]=a,b.buffer[++c]="0",{pos:c,c:"0"};if(g=e.regex.val1.test("0"+a))return b.buffer[c]="0",c++,{pos:c}}return g},cardinality:1}]},2:{validator:function(a,b,c,d,e){var f=e.getFrontValue(b.mask,b.buffer,e);-1!=f.indexOf(e.placeholder[0])&&(f="01"+e.separator);var g=e.regex.val2(e.separator).test(f+a);if(!d&&!g&&(a.charAt(1)==e.separator||-1!="-./".indexOf(a.charAt(1)))&&(g=e.regex.val2(e.separator).test(f+"0"+a.charAt(0))))return b.buffer[c-1]="0",{refreshFromBuffer:{start:c-1,end:c},pos:c,c:a.charAt(0)};if(e.mask.indexOf("2")==e.mask.length-1&&g){var h=b.buffer.join("").substr(4,4)+a;if(h!=e.leapday)return!0;var i=parseInt(b.buffer.join("").substr(0,4),10);return i%4===0?i%100===0?i%400===0?!0:!1:!0:!1}return g},cardinality:2,prevalidator:[{validator:function(a,b,c,d,e){isNaN(b.buffer[c+1])||(a+=b.buffer[c+1]);var f=e.getFrontValue(b.mask,b.buffer,e);-1!=f.indexOf(e.placeholder[0])&&(f="01"+e.separator);var g=1==a.length?e.regex.val2pre(e.separator).test(f+a):e.regex.val2(e.separator).test(f+a);return d||g||!(g=e.regex.val2(e.separator).test(f+"0"+a))?g:(b.buffer[c]="0",c++,{pos:c})},cardinality:1}]},y:{validator:function(a,b,c,d,e){if(e.isInYearRange(a,e.yearrange.minyear,e.yearrange.maxyear)){var f=b.buffer.join("").substr(0,6);if(f!=e.leapday)return!0;var g=parseInt(a,10);return g%4===0?g%100===0?g%400===0?!0:!1:!0:!1}return!1},cardinality:4,prevalidator:[{validator:function(a,b,c,d,e){var f=e.isInYearRange(a,e.yearrange.minyear,e.yearrange.maxyear);if(!d&&!f){var g=e.determinebaseyear(e.yearrange.minyear,e.yearrange.maxyear,a+"0").toString().slice(0,1);if(f=e.isInYearRange(g+a,e.yearrange.minyear,e.yearrange.maxyear))return b.buffer[c++]=g.charAt(0),{pos:c};if(g=e.determinebaseyear(e.yearrange.minyear,e.yearrange.maxyear,a+"0").toString().slice(0,2),f=e.isInYearRange(g+a,e.yearrange.minyear,e.yearrange.maxyear))return b.buffer[c++]=g.charAt(0),b.buffer[c++]=g.charAt(1),{pos:c}}return f},cardinality:1},{validator:function(a,b,c,d,e){var f=e.isInYearRange(a,e.yearrange.minyear,e.yearrange.maxyear);if(!d&&!f){var g=e.determinebaseyear(e.yearrange.minyear,e.yearrange.maxyear,a).toString().slice(0,2);if(f=e.isInYearRange(a[0]+g[1]+a[1],e.yearrange.minyear,e.yearrange.maxyear))return b.buffer[c++]=g.charAt(1),{pos:c};if(g=e.determinebaseyear(e.yearrange.minyear,e.yearrange.maxyear,a).toString().slice(0,2),e.isInYearRange(g+a,e.yearrange.minyear,e.yearrange.maxyear)){var h=b.buffer.join("").substr(0,6);if(h!=e.leapday)f=!0;else{var i=parseInt(a,10);f=i%4===0?i%100===0?i%400===0?!0:!1:!0:!1}}else f=!1;if(f)return b.buffer[c-1]=g.charAt(0),b.buffer[c++]=g.charAt(1),b.buffer[c++]=a.charAt(0),{refreshFromBuffer:{start:c-3,end:c},pos:c}}return f},cardinality:2},{validator:function(a,b,c,d,e){return e.isInYearRange(a,e.yearrange.minyear,e.yearrange.maxyear)},cardinality:3}]}},insertMode:!1,autoUnmask:!1},"mm/dd/yyyy":{placeholder:"mm/dd/yyyy",alias:"dd/mm/yyyy",regex:{val2pre:function(b){var c=a.inputmask.escapeRegex.call(this,b);return new RegExp("((0[13-9]|1[012])"+c+"[0-3])|(02"+c+"[0-2])")},val2:function(b){var c=a.inputmask.escapeRegex.call(this,b);return new RegExp("((0[1-9]|1[012])"+c+"(0[1-9]|[12][0-9]))|((0[13-9]|1[012])"+c+"30)|((0[13578]|1[02])"+c+"31)")},val1pre:new RegExp("[01]"),val1:new RegExp("0[1-9]|1[012]")},leapday:"02/29/",onKeyDown:function(b){var c=a(this);if(b.ctrlKey&&b.keyCode==a.inputmask.keyCode.RIGHT){var d=new Date;c.val((d.getMonth()+1).toString()+d.getDate().toString()+d.getFullYear().toString()),c.triggerHandler("setvalue.inputmask")}}},"yyyy/mm/dd":{mask:"y/1/2",placeholder:"yyyy/mm/dd",alias:"mm/dd/yyyy",leapday:"/02/29",onKeyDown:function(b){var c=a(this);if(b.ctrlKey&&b.keyCode==a.inputmask.keyCode.RIGHT){var d=new Date;c.val(d.getFullYear().toString()+(d.getMonth()+1).toString()+d.getDate().toString()),c.triggerHandler("setvalue.inputmask")}}},"dd.mm.yyyy":{mask:"1.2.y",placeholder:"dd.mm.yyyy",leapday:"29.02.",separator:".",alias:"dd/mm/yyyy"},"dd-mm-yyyy":{mask:"1-2-y",placeholder:"dd-mm-yyyy",leapday:"29-02-",separator:"-",alias:"dd/mm/yyyy"},"mm.dd.yyyy":{mask:"1.2.y",placeholder:"mm.dd.yyyy",leapday:"02.29.",separator:".",alias:"mm/dd/yyyy"},"mm-dd-yyyy":{mask:"1-2-y",placeholder:"mm-dd-yyyy",leapday:"02-29-",separator:"-",alias:"mm/dd/yyyy"},"yyyy.mm.dd":{mask:"y.1.2",placeholder:"yyyy.mm.dd",leapday:".02.29",separator:".",alias:"yyyy/mm/dd"},"yyyy-mm-dd":{mask:"y-1-2",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},datetime:{mask:"1/2/y h:s",placeholder:"dd/mm/yyyy hh:mm",alias:"dd/mm/yyyy",regex:{hrspre:new RegExp("[012]"),hrs24:new RegExp("2[0-4]|1[3-9]"),hrs:new RegExp("[01][0-9]|2[0-4]"),ampm:new RegExp("^[a|p|A|P][m|M]"),mspre:new RegExp("[0-5]"),ms:new RegExp("[0-5][0-9]")},timeseparator:":",hourFormat:"24",definitions:{h:{validator:function(a,b,c,d,e){if("24"==e.hourFormat&&24==parseInt(a,10))return b.buffer[c-1]="0",b.buffer[c]="0",{refreshFromBuffer:{start:c-1,end:c},c:"0"};var f=e.regex.hrs.test(a);if(!d&&!f&&(a.charAt(1)==e.timeseparator||-1!="-.:".indexOf(a.charAt(1)))&&(f=e.regex.hrs.test("0"+a.charAt(0))))return b.buffer[c-1]="0",b.buffer[c]=a.charAt(0),c++,{refreshFromBuffer:{start:c-2,end:c},pos:c,c:e.timeseparator};if(f&&"24"!==e.hourFormat&&e.regex.hrs24.test(a)){var g=parseInt(a,10);return 24==g?(b.buffer[c+5]="a",b.buffer[c+6]="m"):(b.buffer[c+5]="p",b.buffer[c+6]="m"),g-=12,10>g?(b.buffer[c]=g.toString(),b.buffer[c-1]="0"):(b.buffer[c]=g.toString().charAt(1),b.buffer[c-1]=g.toString().charAt(0)),{refreshFromBuffer:{start:c-1,end:c+6},c:b.buffer[c]}}return f},cardinality:2,prevalidator:[{validator:function(a,b,c,d,e){var f=e.regex.hrspre.test(a);return d||f||!(f=e.regex.hrs.test("0"+a))?f:(b.buffer[c]="0",c++,{pos:c})},cardinality:1}]},s:{validator:"[0-5][0-9]",cardinality:2,prevalidator:[{validator:function(a,b,c,d,e){var f=e.regex.mspre.test(a);return d||f||!(f=e.regex.ms.test("0"+a))?f:(b.buffer[c]="0",c++,{pos:c})},cardinality:1}]},t:{validator:function(a,b,c,d,e){return e.regex.ampm.test(a+"m")},casing:"lower",cardinality:1}},insertMode:!1,autoUnmask:!1},datetime12:{mask:"1/2/y h:s t\\m",placeholder:"dd/mm/yyyy hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"h:s t":{mask:"h:s t\\m",placeholder:"hh:mm xm",alias:"datetime",hourFormat:"12"},"hh:mm:ss":{mask:"h:s:s",placeholder:"hh:mm:ss",alias:"datetime",autoUnmask:!1},"hh:mm":{mask:"h:s",placeholder:"hh:mm",alias:"datetime",autoUnmask:!1},date:{alias:"dd/mm/yyyy"},"mm/yyyy":{mask:"1/y",placeholder:"mm/yyyy",leapday:"donotuse",separator:"/",alias:"mm/dd/yyyy"}}),a.fn.inputmask}(jQuery),function(a){return a.extend(a.inputmask.defaults.definitions,{A:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1,casing:"upper"},"#":{validator:"[0-9A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",cardinality:1,casing:"upper"}}),a.extend(a.inputmask.defaults.aliases,{url:{mask:"ir",placeholder:"",separator:"",defaultPrefix:"http://",regex:{urlpre1:new RegExp("[fh]"),urlpre2:new RegExp("(ft|ht)"),urlpre3:new RegExp("(ftp|htt)"),urlpre4:new RegExp("(ftp:|http|ftps)"),urlpre5:new RegExp("(ftp:/|ftps:|http:|https)"),urlpre6:new RegExp("(ftp://|ftps:/|http:/|https:)"),urlpre7:new RegExp("(ftp://|ftps://|http://|https:/)"),urlpre8:new RegExp("(ftp://|ftps://|http://|https://)")},definitions:{i:{validator:function(){return!0},cardinality:8,prevalidator:function(){for(var a=[],b=8,c=0;b>c;c++)a[c]=function(){var a=c;return{validator:function(b,c,d,e,f){if(f.regex["urlpre"+(a+1)]){var g,h=b;a+1-b.length>0&&(h=c.buffer.join("").substring(0,a+1-b.length)+""+h);var i=f.regex["urlpre"+(a+1)].test(h);if(!e&&!i){for(d-=a,g=0;g<f.defaultPrefix.length;g++)c.buffer[d]=f.defaultPrefix[g],d++;for(g=0;g<h.length-1;g++)c.buffer[d]=h[g],d++;return{pos:d}}return i}return!1},cardinality:a}}();return a}()},r:{validator:".",cardinality:50}},insertMode:!1,autoUnmask:!1},ip:{mask:"i[i[i]].i[i[i]].i[i[i]].i[i[i]]",definitions:{i:{validator:function(a,b,c){return c-1>-1&&"."!=b.buffer[c-1]?(a=b.buffer[c-1]+a,a=c-2>-1&&"."!=b.buffer[c-2]?b.buffer[c-2]+a:"0"+a):a="00"+a,new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]").test(a)},cardinality:1}}},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,64}]@*{1,64}[.*{2,64}][.*{2,6}][.*{1,2}]",greedy:!1,onBeforePaste:function(a){return a=a.toLowerCase(),a.replace("mailto:","")},definitions:{"*":{validator:"[0-9A-Za-z!#$%&'*+/=?^_`{|}~-]",cardinality:1,casing:"lower"}}}}),a.fn.inputmask}(jQuery),function(a){return a.extend(a.inputmask.defaults.aliases,{numeric:{mask:function(a){function b(b){for(var c="",d=0;d<b.length;d++)c+=a.definitions[b[d]]?"\\"+b[d]:b[d];return c}if(0!==a.repeat&&isNaN(a.integerDigits)&&(a.integerDigits=a.repeat),a.repeat=0,a.groupSeparator==a.radixPoint&&(a.groupSeparator="."==a.radixPoint?",":","==a.radixPoint?".":"")," "===a.groupSeparator&&(a.skipOptionalPartCharacter=void 0),a.autoGroup=a.autoGroup&&""!=a.groupSeparator,a.autoGroup&&("string"==typeof a.groupSize&&isFinite(a.groupSize)&&(a.groupSize=parseInt(a.groupSize)),isFinite(a.integerDigits))){var c=Math.floor(a.integerDigits/a.groupSize),d=a.integerDigits%a.groupSize;a.integerDigits=parseInt(a.integerDigits)+(0==d?c-1:c)}a.radixFocus=a.radixFocus&&"0"==a.placeholder,a.definitions[";"]=a.definitions["~"];var e=b(a.prefix);return e+="[+]",e+="~{1,"+a.integerDigits+"}",void 0!=a.digits&&(isNaN(a.digits)||parseInt(a.digits)>0)&&(e+=a.digitsOptional?"["+(a.decimalProtect?":":a.radixPoint)+";{"+a.digits+"}]":(a.decimalProtect?":":a.radixPoint)+";{"+a.digits+"}"),e+=b(a.suffix),e+="[-]",a.greedy=!1,e},placeholder:"",greedy:!1,digits:"*",digitsOptional:!0,groupSeparator:"",radixPoint:".",radixFocus:!0,groupSize:3,autoGroup:!1,allowPlus:!0,allowMinus:!0,negationSymbol:{front:"-",back:""},integerDigits:"+",prefix:"",suffix:"",rightAlign:!0,decimalProtect:!0,min:void 0,max:void 0,postFormat:function(b,c,d,e){var f=!1;b.length>=e.suffix.length&&b.join("").indexOf(e.suffix)==b.length-e.suffix.length&&(b.length=b.length-e.suffix.length,f=!0),c=c>=b.length?b.length-1:c<e.prefix.length?e.prefix.length:c;var g=!1,h=b[c];if(""==e.groupSeparator||-1!=a.inArray(e.radixPoint,b)&&c>=a.inArray(e.radixPoint,b)||new RegExp("[-+]").test(h)){if(f)for(var i=0,j=e.suffix.length;j>i;i++)b.push(e.suffix.charAt(i));return{pos:c}}var k=b.slice();h==e.groupSeparator&&(k.splice(c--,1),h=k[c]),d?k[c]="?":k.splice(c,0,"?");var l=k.join(""),m=l;if(l.length>0&&e.autoGroup||d&&-1!=l.indexOf(e.groupSeparator)){var n=a.inputmask.escapeRegex.call(this,e.groupSeparator);g=0==l.indexOf(e.groupSeparator),l=l.replace(new RegExp(n,"g"),"");var o=l.split(e.radixPoint);if(l=""==e.radixPoint?l:o[0],l!=e.prefix+"?0"&&l.length>=e.groupSize+e.prefix.length)for(var p=new RegExp("([-+]?[\\d?]+)([\\d?]{"+e.groupSize+"})");p.test(l);)l=l.replace(p,"$1"+e.groupSeparator+"$2"),l=l.replace(e.groupSeparator+e.groupSeparator,e.groupSeparator);""!=e.radixPoint&&o.length>1&&(l+=e.radixPoint+o[1])}g=m!=l,b.length=l.length;for(var i=0,j=l.length;j>i;i++)b[i]=l.charAt(i);var q=a.inArray("?",b);if(d?b[q]=h:b.splice(q,1),!g&&f)for(var i=0,j=e.suffix.length;j>i;i++)b.push(e.suffix.charAt(i));return{pos:q,refreshFromBuffer:g,buffer:b}},onBeforeWrite:function(b,c,d,e){if(b&&"blur"==b.type){var f=c.join(""),g=f.replace(e.prefix,"");if(g=g.replace(e.suffix,""),g=g.replace(new RegExp(a.inputmask.escapeRegex.call(this,e.groupSeparator),"g"),""),g=g.replace(a.inputmask.escapeRegex.call(this,e.radixPoint),"."),isFinite(g)&&isFinite(e.min)&&parseFloat(g)<parseFloat(e.min))return e.postFormat((e.prefix+e.min).split(""),0,!0,e);var h=""!=e.radixPoint?c.join("").split(e.radixPoint):[c.join("")],i=h[0].match(e.regex.integerPart(e)),j=2==h.length?h[1].match(e.regex.integerNPart(e)):void 0;!i||i[0]!=e.negationSymbol.front+"0"&&i[0]!=e.negationSymbol.front&&"+"!=i[0]||void 0!=j&&!j[0].match(/^0+$/)||c.splice(i.index,1);var k=a.inArray(e.radixPoint,c);if(-1!=k&&isFinite(e.digits)&&!e.digitsOptional){for(var l=1;l<=e.digits;l++)(void 0==c[k+l]||c[k+l]==e.placeholder.charAt(0))&&(c[k+l]="0");return{refreshFromBuffer:!0,buffer:c}}}if(e.autoGroup){var m=e.postFormat(c,d-1,!0,e);return m.caret=d<=e.prefix.length?m.pos:m.pos+1,m}},regex:{integerPart:function(b){return new RegExp("["+a.inputmask.escapeRegex.call(this,b.negationSymbol.front)+"+]?\\d*")},integerNPart:function(b){return new RegExp("[\\d"+a.inputmask.escapeRegex.call(this,b.groupSeparator)+"]+")}},signHandler:function(a,b,c,d,e){if(!d&&e.allowMinus&&"-"===a||e.allowPlus&&"+"===a){var f=b.buffer.join("").match(e.regex.integerPart(e));if(f&&f[0].length>0)return b.buffer[f.index]==("-"===a?"+":e.negationSymbol.front)?{pos:f.index,c:"-"===a?e.negationSymbol.front:"+",remove:f.index,caret:c}:b.buffer[f.index]==("-"===a?e.negationSymbol.front:"+")?{remove:f.index,caret:c-1}:{pos:f.index,c:"-"===a?e.negationSymbol.front:"+",caret:c+1}}return!1},radixHandler:function(b,c,d,e,f){if(!e&&b===f.radixPoint&&f.digits>0){var g=a.inArray(f.radixPoint,c.buffer),h=c.buffer.join("").match(f.regex.integerPart(f));if(-1!=g&&c.validPositions[g])return c.validPositions[g-1]?{caret:g+1}:{pos:h.index,c:h[0],caret:g+1};if(!h||"0"==h[0]&&h.index+1!=d)return c.buffer[h?h.index:d]="0",{pos:(h?h.index:d)+1}}return!1},leadingZeroHandler:function(b,c,d,e,f){var g=c.buffer.join("").match(f.regex.integerNPart(f)),h=a.inArray(f.radixPoint,c.buffer);if(g&&!e&&(-1==h||h>=d))if(0==g[0].indexOf("0")){d<f.prefix.length&&(d=g.index);var i=a.inArray(f.radixPoint,c._buffer),j=c._buffer&&c.buffer.slice(h).join("")==c._buffer.slice(i).join("")||0==parseInt(c.buffer.slice(h+1).join("")),k=c._buffer&&c.buffer.slice(g.index,h).join("")==c._buffer.slice(f.prefix.length,i).join("")||"0"==c.buffer.slice(g.index,h).join("");if(-1==h||j&&k)return c.buffer.splice(g.index,1),d=d>g.index?d-1:g.index,{pos:d,remove:g.index};if(g.index+1==d||"0"==b)return c.buffer.splice(g.index,1),d=g.index,{pos:d,remove:g.index}}else if("0"===b&&d<=g.index&&g[0]!=f.groupSeparator)return!1;return!0},postValidation:function(b,c){var d=!0,e=b.join(""),f=e.replace(c.prefix,"");return f=f.replace(c.suffix,""),f=f.replace(new RegExp(a.inputmask.escapeRegex.call(this,c.groupSeparator),"g"),""),f=f.replace(a.inputmask.escapeRegex.call(this,c.radixPoint),"."),isFinite(f)&&isFinite(c.max)&&(d=parseFloat(f)<=parseFloat(c.max)),d},definitions:{"~":{validator:function(b,c,d,e,f){var g=f.signHandler(b,c,d,e,f);if(!g&&(g=f.radixHandler(b,c,d,e,f),!g&&(g=e?new RegExp("[0-9"+a.inputmask.escapeRegex.call(this,f.groupSeparator)+"]").test(b):new RegExp("[0-9]").test(b),g===!0&&(g=f.leadingZeroHandler(b,c,d,e,f),g===!0)))){var h=a.inArray(f.radixPoint,c.buffer);g=f.digitsOptional===!1&&d>h&&!e?{pos:d,remove:d}:{pos:d}}return g},cardinality:1,prevalidator:null},"+":{validator:function(a,b,c,d,e){var f=e.signHandler(a,b,c,d,e);return!f&&(d&&e.allowMinus&&a===e.negationSymbol.front||e.allowMinus&&"-"==a||e.allowPlus&&"+"==a)&&(f=!0),f},cardinality:1,prevalidator:null,placeholder:""},"-":{validator:function(a,b,c,d,e){var f=e.signHandler(a,b,c,d,e);return!f&&d&&e.allowMinus&&a===e.negationSymbol.back&&(f=!0),f},cardinality:1,prevalidator:null,placeholder:""},":":{validator:function(b,c,d,e,f){var g=f.signHandler(b,c,d,e,f);if(!g){var h="["+a.inputmask.escapeRegex.call(this,f.radixPoint)+"]";g=new RegExp(h).test(b),g&&c.validPositions[d]&&c.validPositions[d].match.placeholder==f.radixPoint&&(g={caret:d+1})}return g},cardinality:1,prevalidator:null,placeholder:function(a){return a.radixPoint}}},insertMode:!0,autoUnmask:!1,onUnMask:function(b,c,d){var e=b.replace(d.prefix,"");return e=e.replace(d.suffix,""),e=e.replace(new RegExp(a.inputmask.escapeRegex.call(this,d.groupSeparator),"g"),"")},isComplete:function(b,c){var d=b.join(""),e=b.slice();if(c.postFormat(e,0,!0,c),e.join("")!=d)return!1;var f=d.replace(c.prefix,"");return f=f.replace(c.suffix,""),f=f.replace(new RegExp(a.inputmask.escapeRegex.call(this,c.groupSeparator),"g"),""),","===c.radixPoint&&(f=f.replace(a.inputmask.escapeRegex.call(this,c.radixPoint),".")),isFinite(f)},onBeforeMask:function(b,c){if(""!=c.radixPoint&&isFinite(b))b=b.toString().replace(".",c.radixPoint);else{var d=b.match(/,/g),e=b.match(/\./g);e&&d?e.length>d.length?(b=b.replace(/\./g,""),b=b.replace(",",c.radixPoint)):d.length>e.length?(b=b.replace(/,/g,""),b=b.replace(".",c.radixPoint)):b=b.indexOf(".")<b.indexOf(",")?b.replace(/\./g,""):b=b.replace(/,/g,""):b=b.replace(new RegExp(a.inputmask.escapeRegex.call(this,c.groupSeparator),"g"),"")}return 0==c.digits&&(-1!=b.indexOf(".")?b=b.substring(0,b.indexOf(".")):-1!=b.indexOf(",")&&(b=b.substring(0,b.indexOf(",")))),b},canClearPosition:function(b,c,d,e,f){var g=b.validPositions[c].input,h=g!=f.radixPoint&&isFinite(g)||c==d||g==f.groupSeparator||g==f.negationSymbol.front||g==f.negationSymbol.back;if(h&&isFinite(g)){var i=b.buffer.join("").substr(0,c).match(f.regex.integerNPart(f));if(!e){var j=c+1,k=null==i||0==parseInt(i[0].replace(new RegExp(a.inputmask.escapeRegex.call(this,f.groupSeparator),"g"),""));if(k)for(;b.validPositions[j]&&(b.validPositions[j].input==f.groupSeparator||"0"==b.validPositions[j].input);)delete b.validPositions[j],j++}var l=[];for(var m in b.validPositions)l.push(b.validPositions[m].input);i=l.join("").match(f.regex.integerNPart(f));var n=a.inArray(f.radixPoint,b.buffer);if(i&&(-1==n||n>=c))if(0==i[0].indexOf("0"))h=i.index!=c||-1==n;else{var o=parseInt(i[0].replace(new RegExp(a.inputmask.escapeRegex.call(this,f.groupSeparator),"g"),""));-1!=n&&10>o&&"0"==f.placeholder.charAt(0)&&(b.validPositions[c].input="0",b.p=f.prefix.length+1,h=!1)}}return h}},currency:{prefix:"$ ",groupSeparator:",",alias:"numeric",placeholder:"0",autoGroup:!0,digits:2,digitsOptional:!1,clearMaskOnLostFocus:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:"0",radixPoint:""}}),a.fn.inputmask}(jQuery),function(a){return a.extend(a.inputmask.defaults.aliases,{phone:{url:"phone-codes/phone-codes.js",maskInit:"+pp(pp)pppppppp",countrycode:"",mask:function(b){b.definitions={p:{validator:function(){return!1},cardinality:1},"#":{validator:"[0-9]",cardinality:1}};var c=[];return a.ajax({url:b.url,async:!1,dataType:"json",success:function(a){c=a},error:function(a,c,d){alert(d+" - "+b.url)}}),c=c.sort(function(a,b){return(a.mask||a)<(b.mask||b)?-1:1}),""!=b.countrycode&&(b.maskInit="+"+b.countrycode+b.maskInit.substring(3)),c.splice(0,0,b.maskInit),c},nojumps:!0,nojumpsThreshold:1,onBeforeMask:function(a,b){var c=a.replace(/^0/g,"");return(c.indexOf(b.countrycode)>1||-1==c.indexOf(b.countrycode))&&(c="+"+b.countrycode+c),c}},phonebe:{alias:"phone",url:"phone-codes/phone-be.js",countrycode:"32",nojumpsThreshold:4}}),a.fn.inputmask}(jQuery),function(a){return a.extend(a.inputmask.defaults.aliases,{Regex:{mask:"r",greedy:!1,repeat:"*",regex:null,regexTokens:null,tokenizer:/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,quantifierFilter:/[0-9]+[^,]/,isComplete:function(a,b){return new RegExp(b.regex).test(a.join(""))},definitions:{r:{validator:function(b,c,d,e,f){function g(a,b){this.matches=[],this.isGroup=a||!1,this.isQuantifier=b||!1,this.quantifier={min:1,max:1},this.repeaterPart=void 0}function h(){var a,b,c=new g,d=[];for(f.regexTokens=[];a=f.tokenizer.exec(f.regex);)switch(b=a[0],b.charAt(0)){case"(":d.push(new g(!0));break;case")":var e=d.pop();d.length>0?d[d.length-1].matches.push(e):c.matches.push(e);break;case"{":case"+":case"*":var h=new g(!1,!0);b=b.replace(/[{}]/g,"");var i=b.split(","),j=isNaN(i[0])?i[0]:parseInt(i[0]),k=1==i.length?j:isNaN(i[1])?i[1]:parseInt(i[1]);if(h.quantifier={min:j,max:k},d.length>0){var l=d[d.length-1].matches;if(a=l.pop(),!a.isGroup){var e=new g(!0);e.matches.push(a),a=e}l.push(a),l.push(h)}else{if(a=c.matches.pop(),!a.isGroup){var e=new g(!0);e.matches.push(a),a=e}c.matches.push(a),c.matches.push(h)}break;default:d.length>0?d[d.length-1].matches.push(b):c.matches.push(b)}c.matches.length>0&&f.regexTokens.push(c)}function i(b,c){var d=!1;c&&(k+="(",m++);for(var e=0;e<b.matches.length;e++){var f=b.matches[e];if(1==f.isGroup)d=i(f,!0);else if(1==f.isQuantifier){var g=a.inArray(f,b.matches),h=b.matches[g-1],j=k;if(isNaN(f.quantifier.max)){for(;f.repeaterPart&&f.repeaterPart!=k&&f.repeaterPart.length>k.length&&!(d=i(h,!0)););d=d||i(h,!0),d&&(f.repeaterPart=k),k=j+f.quantifier.max}else{for(var l=0,o=f.quantifier.max-1;o>l&&!(d=i(h,!0));l++);k=j+"{"+f.quantifier.min+","+f.quantifier.max+"}"}}else if(void 0!=f.matches)for(var p=0;p<f.length&&!(d=i(f[p],c));p++);else{var q;if("["==f.charAt(0)){q=k,q+=f;for(var r=0;m>r;r++)q+=")";var s=new RegExp("^("+q+")$");d=s.test(n)}else for(var t=0,u=f.length;u>t;t++)if("\\"!=f.charAt(t)){q=k,q+=f.substr(0,t+1),q=q.replace(/\|$/,"");for(var r=0;m>r;r++)q+=")";var s=new RegExp("^("+q+")$");if(d=s.test(n))break}k+=f}if(d)break}return c&&(k+=")",m--),d}null==f.regexTokens&&h();var j=c.buffer.slice(),k="",l=!1,m=0;j.splice(d,0,b);for(var n=j.join(""),o=0;o<f.regexTokens.length;o++){var g=f.regexTokens[o];if(l=i(g,g.isGroup))break}return l},cardinality:1}}}}),a.fn.inputmask}(jQuery);(function($){var splitVersion=$.fn.jquery.split(".");var major=parseInt(splitVersion[0]);var minor=parseInt(splitVersion[1]);var JQ_LT_17=(major<1)||(major==1&&minor<7);function eventsData($el){return JQ_LT_17?$el.data('events'):$._data($el[0]).events;}
function moveHandlerToTop($el,eventName,isDelegated){var data=eventsData($el);var events=data[eventName];if(!JQ_LT_17){var handler=isDelegated?events.splice(events.delegateCount-1,1)[0]:events.pop();events.splice(isDelegated?0:(events.delegateCount||0),0,handler);return;}
if(isDelegated){data.live.unshift(data.live.pop());}else{events.unshift(events.pop());}}
function moveEventHandlers($elems,eventsString,isDelegate){var events=eventsString.split(/\s+/);$elems.each(function(){for(var i=0;i<events.length;++i){var pureEventName=$.trim(events[i]).match(/[^\.]+/i)[0];moveHandlerToTop($(this),pureEventName,isDelegate);}});}
function makeMethod(methodName){$.fn[methodName+'First']=function(){var args=$.makeArray(arguments);var eventsString=args.shift();if(eventsString){$.fn[methodName].apply(this,arguments);moveEventHandlers(this,eventsString);}
return this;}}
makeMethod('bind');makeMethod('one');$.fn.delegateFirst=function(){var args=$.makeArray(arguments);var eventsString=args[1];if(eventsString){args.splice(0,2);$.fn.delegate.apply(this,arguments);moveEventHandlers(this,eventsString,true);}
return this;};$.fn.liveFirst=function(){var args=$.makeArray(arguments);args.unshift(this.selector);$.fn.delegateFirst.apply($(document),args);return this;};if(!JQ_LT_17){$.fn.onFirst=function(types,selector){var $el=$(this);var isDelegated=typeof selector==='string';$.fn.on.apply($el,arguments);if(typeof types==='object'){for(type in types)
if(types.hasOwnProperty(type)){moveEventHandlers($el,type,isDelegated);}}else if(typeof types==='string'){moveEventHandlers($el,types,isDelegated);}
return $el;};}})(jQuery);(function($){$.masksLoad=function(url){var maskList;$.ajax({url:url,async:false,dataType:'json',success:function(response){maskList=response;}});return maskList;}
$.masksSort=function(maskList,defs,match,key){maskList.sort(function(a,b){var ia=0,ib=0;for(;(ia<a[key].length&&ib<b[key].length);){var cha=a[key].charAt(ia);var chb=b[key].charAt(ib);if(!match.test(cha)){ia++;continue;}
if(!match.test(chb)){ib++;continue;}
if($.inArray(cha,defs)!=-1&&$.inArray(chb,defs)==-1){return 1;}
if($.inArray(cha,defs)==-1&&$.inArray(chb,defs)!=-1){return-1;}
if($.inArray(cha,defs)==-1&&$.inArray(chb,defs)==-1){if(cha!=chb){return cha<chb?-1:1;}}
ia++;ib++;}
for(;(ia<a[key].length||ib<b[key].length);){if(ia<a[key].length&&!match.test(a[key].charAt(ia))){ia++;continue;}
if(ib<b[key].length&&!match.test(b[key].charAt(ib))){ib++;continue;}
if(ia<a[key].length){return 1;}
if(ib<b[key].length){return-1;}}
return 0;});return maskList;}
$.fn.inputmasks=function(maskOpts,mode){var caret=function(begin,end){if(typeof begin=='number'){end=(typeof end=='number')?end:begin;if(this.setSelectionRange){this.setSelectionRange(begin,end);}else if(this.createTextRange){var range=this.createTextRange();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',begin);range.select();}}else{if(this.setSelectionRange){begin=this.selectionStart;end=this.selectionEnd;}else if(document.selection&&document.selection.createRange){var range=document.selection.createRange();begin=0-range.duplicate().moveStart('character',-100000);end=begin+range.text.length;}
return{begin:begin,end:end};}};var keys=Object.keys||function(obj){if(obj!==Object(obj)){throw new TypeError('Invalid object');}
var keys=[];for(var key in obj){keys[keys.length]=key;}
return keys;};maskOpts=$.extend(true,{onMaskChange:$.noop},maskOpts);var defs={};for(var def in maskOpts.inputmask.definitions){var validator=maskOpts.inputmask.definitions[def].validator;switch(typeof validator){case"string":defs[def]=new RegExp(validator);break;case"object":if("test"in maskOpts.definitions[def].validator){defs[def]=validator;}
break;case"function":defs[def]={test:validator};break;}}
maskOpts.inputmask.definitions[maskOpts.replace]={validator:maskOpts.match.source,cardinality:1};var iphone=navigator.userAgent.match(/iphone/i)!=null;var oldmatch=false;var placeholder=$.extend(true,{},$.inputmask.defaults,maskOpts.inputmask).placeholder;var insertMode=$.extend(true,{},$.inputmask.defaults,maskOpts.inputmask).insertMode;var maskMatch=function(text){var mtxt="";for(var i=0;i<text.length;i++){var ch=text.charAt(i);if(ch==placeholder){break;}
if(maskOpts.match.test(ch)){mtxt+=ch;}}
for(var mid in maskOpts.list){var mask=maskOpts.list[mid][maskOpts.listKey];var pass=true;for(var it=0,im=0;(it<mtxt.length&&im<mask.length);){var chm=mask.charAt(im);var cht=mtxt.charAt(it);if(!maskOpts.match.test(chm)&&!(chm in defs)){im++;continue;}
if(((chm in defs)&&defs[chm].test(cht))||(cht==chm)){it++;im++;}else{pass=false;break;}}
if(pass&&it==mtxt.length){var determined=mask.substr(im).search(maskOpts.match)==-1;mask=mask.replace(new RegExp([maskOpts.match.source].concat(keys(defs)).join('|'),'g'),maskOpts.replace);var completed=mask.substr(im).search(maskOpts.replace)==-1;return{mask:mask,obj:maskOpts.list[mid],determined:determined,completed:completed};}}
return false;}
var caretApply=function(oldMask,newMask,oldPos){if(!oldMask){return 0;}
var pos=0,startPos=0;for(;pos<oldPos.begin;pos++){if(oldMask.charAt(pos)==maskOpts.replace){startPos++;}}
var endPos=0;for(;pos<oldPos.end;pos++){if(oldMask.charAt(pos)==maskOpts.replace){endPos++;}}
for(pos=0;(pos<newMask.length&&(startPos>0||newMask.charAt(pos)!=maskOpts.replace));pos++){if(newMask.charAt(pos)==maskOpts.replace){startPos--;}}
startPos=pos;for(;(pos<newMask.length&&endPos>0);pos++){if(newMask.charAt(pos)==maskOpts.replace){endPos--;}}
endPos=pos;return{begin:startPos,end:endPos};}
var maskUnbind=function(){$(this).unbind("keypress.inputmask",masksKeyPress).unbind("input.inputmask",masksPaste).unbind("paste.inputmask",masksPaste).unbind("dragdrop.inputmask",masksPaste).unbind("drop.inputmask",masksPaste).unbind("keydown.inputmask",masksKeyDown).unbind("setvalue.inputmask",masksSetValue).unbind("blur.inputmask",masksChange);}
var maskRebind=function(){maskUnbind.call(this);$(this).bindFirst("keypress.inputmask",masksKeyPress).bindFirst("input.inputmask",masksPaste).bindFirst("paste.inputmask",masksPaste).bindFirst("dragdrop.inputmask",masksPaste).bindFirst("drop.inputmask",masksPaste).bindFirst("keydown.inputmask",masksKeyDown).bindFirst("setvalue.inputmask",masksSetValue).bind("blur.inputmask",masksChange);}
var maskApply=function(match,newtext){if(match&&(newtext||match.mask!=oldmatch.mask)){var caretPos;if(!newtext){caretPos=caretApply(oldmatch.mask,match.mask,caret.call(this));}
if(newtext){if(this._valueSet){this._valueSet(newtext);}else{this.value=newtext;}}
$(this).inputmask(match.mask,$.extend(true,maskOpts.inputmask,{insertMode:insertMode}));if(!newtext){caret.call(this,caretPos.begin,caretPos.end);}}
oldmatch=match;maskOpts.onMaskChange.call(this,match.obj,match.determined);return true;}
var keyboardApply=function(e,text,insert){var match=maskMatch(text);if(!match||match.obj!=oldmatch.obj||match.determined!=oldmatch.determined){if(match){maskUnbind.call(this);if(insert){maskApply.call(this,match);$(this).trigger(e);}else{$(this).trigger(e);maskApply.call(this,match);}
maskRebind.call(this);}
e.stopImmediatePropagation();return false;}
return true;}
var masksKeyDown=function(e){e=e||window.event;var k=e.which||e.charCode||e.keyCode;if(k==8||k==46||(iphone&&k==127)){var text=this._valueGet();var caretPos=caret.call(this);if(caretPos.begin==caretPos.end||(!insertMode&&caretPos.begin==caretPos.end-1)){var pos=caretPos.begin;do{if(k!=46){pos--;}
var chr=text.charAt(pos);text=text.substring(0,pos)+text.substring(pos+1);}while(pos>0&&pos<text.length&&chr!=placeholder&&!maskOpts.match.test(chr));}else{var test=text.substring(0,caretPos.begin)+text.substring(caretPos.end);if(test.search(maskOpts.match)==-1){text=test;}}
return keyboardApply.call(this,e,text,false);}
if(k==45){insertMode=!insertMode;}
return true;}
var masksKeyPress=function(e){var text=this._valueGet();e=e||window.event;var k=e.which||e.charCode||e.keyCode,c=String.fromCharCode(k);caretPos=caret.call(this);text=text.substring(0,caretPos.begin)+c+text.substring(caretPos.end);return keyboardApply.call(this,e,text,true);}
var masksChange=function(e){var match=maskMatch(this._valueGet());maskApply.call(this,match);maskRebind.call(this);return true;}
var masksSetValue=function(e){maskInit.call(this);e.stopImmediatePropagation();return true;}
var maskInit=function(){var text;if(this._valueGet){text=this._valueGet();}else{text=this.value;}
var match=maskMatch(text);while(!match&&text.length>0){text=text.substr(0,text.length-1);match=maskMatch(text);}
maskApply.call(this,match,text);maskRebind.call(this);}
var masksPaste=function(e){var input=this;setTimeout(function(){maskInit.call(input);},0);e.stopImmediatePropagation();return true;}
switch(mode){case"isCompleted":var res=maskMatch((this[0]._valueGet&&this[0]._valueGet())||this[0].value);return(res&&res.completed);default:this.each(function(){maskInit.call(this);});return this;}}})(jQuery);(function(_,$){$.ceEvent('on','ce.commoninit',function(context){var time_elements=context.find('.cm-cr-mask-time'),phone_elements=context.find('.cm-cr-mask-phone');if(time_elements.length===0&&phone_elements.length===0){return true;}
time_elements.mask('99:99');var isAndroid=/(android)/i.test(navigator.userAgent);if(!isAndroid){if(phone_elements.length&&_.call_requests_phone_masks_list){var maskList=$.masksSort(_.call_requests_phone_masks_list,['#'],/[0-9]|#/,"mask");var maskOpts={inputmask:{definitions:{'#':{validator:"[0-9]",cardinality:1}},showMaskOnHover:false,autoUnmask:false},match:/[0-9]/,replace:'#',list:maskList,listKey:"mask"};phone_elements.each(function(){if(_.call_phone_mask){$(this).inputmask({mask:_.call_phone_mask,showMaskOnHover:false,autoUnmask:false});}else{$(this).inputmasks(maskOpts);}});}}
if(_.call_phone_mask){$.ceFormValidator('registerValidator',{class_name:'cm-cr-mask-phone-lbl',message:_.tr('call_requests.error_validator_phone'),func:function(id){var input=$('#'+id);if(!$.is.blank(input.val())){return input.inputmask("isComplete");}else{return true;}}});}});$.ceEvent('on','ce.formpre_call_requests_form',function(form,elm){var val_email=form.find('[name="call_data[email]"]').val(),val_phone=form.find('[name="call_data[phone]"]').val(),allow=!!(val_email||val_phone),error_box=form.find('.cm-cr-error-box'),dlg=$.ceDialog('get_last');error_box.toggle(!allow);dlg.ceDialog('reload');if(allow){var product_data=$('[name="'+form.data('caProductForm')+'"]').serializeObject();$.each(product_data,function(key,value){if(key.match(/product_data/)){form.append('<input type="hidden" name="'+key+'" value="'+value+'" />');}});}
return allow;});})(Tygh,Tygh.$);(function(_,$){(function($){var handlers={};var is_ready=false;var pool=[];var methods={showObjects:function(request,limit){handlers.showObjects.apply(this,arguments);},};var static_methods={init:function(settings){var settings=settings||{};handlers.init.call(this,settings,function(){is_ready=true;$.each(pool,function(i,cb){cb();});pool=[];});},getUserLocation:function(callback){handlers.getUserLocation.call(this,function(loc){if(loc){callback({country:loc.country,country_code:loc.country_code,state:loc.state,state_code:loc.state_code,city:loc.city,address:loc.address,});}});}};$.fn.ceMap=function(method){if(methods[method]){var self=this,args=Array.prototype.slice.call(arguments,1);var callback=function(){methods[method].apply(self,args);}
if(is_ready){return callback();}else{pool.push(callback);}}else{$.error('ce.map: method '+method+' does not exist');}};$.ceMap=function(action){if(action=='handlers'){handlers=arguments[1];}else if(static_methods[action]){var args=Array.prototype.slice.call(arguments,1),self=this;var callback=function(){static_methods[action].apply(self,args);};if(is_ready||action=='init'){return callback();}else{pool.push(callback);}}else{$.error('ce.map: method '+method+' does not exist');}}})($);}(Tygh,jQuery));(function(_,$){$.ceMap('handlers',{showObjects:function(request,limit){var $self=this;csymaps.geocode(request,{results:limit||10}).then(function(res){var coords=res.geoObjects.get(0).geometry.getCoordinates();map=new csymaps.Map($self.get(0),{center:coords,zoom:13,});map.behaviors.disable(['scrollZoom']);map.geoObjects.add(res.geoObjects);});},init:function(settings,callback){var default_settings={key:_.maps_provider.yandex_key,lang:_.cart_language,};settings=$.extend(default_settings,settings);var url='//api-maps.yandex.ru/2.1/?ns=csymaps&lang='+settings.lang;if(settings.key){url+='&key='+settings.key;}
$.getScript(url,function(){csymaps.ready(function(){callback();});});},getUserLocation:function(callback){csymaps.geolocation.get({provider:'yandex'}).then(function(res){var geocoder_meta_data=res.geoObjects.get(0).properties.get('metaDataProperty.GeocoderMetaData'),kind=geocoder_meta_data.kind,prop,nested=false;var location={counry:'',country_code:'',state:'',state_code:'',city:'',address:'',};do{geocoder_meta_data=nested||geocoder_meta_data;nested=false;for(prop in geocoder_meta_data){if(geocoder_meta_data.hasOwnProperty(prop)){if(typeof(geocoder_meta_data[prop])==='object'){nested=geocoder_meta_data[prop];}else if(prop=='CountryName'){location.country=geocoder_meta_data[prop];}else if(prop=='CountryNameCode'){location.country_code=geocoder_meta_data[prop];}else if(prop=='AdministrativeAreaName'){location.state=geocoder_meta_data[prop];}else if(prop=='AdministrativeAreaNameCode'){location.state_code=geocoder_meta_data[prop];}else if(prop=='LocalityName'){location.city=geocoder_meta_data[prop];}else if(prop=='DependentLocalityName'||prop=='ThoroughfareName'||prop=='PremiseNumber'){location.address+=geocoder_meta_data[prop]+' ';}}}}while(nested);callback(location);},function(){console.log('error');});},});}(Tygh,Tygh.$));(function(_,$){$.ceEvent('on','ce.commoninit',function(context){var maps=context.find('.cm-map');var geolocations=$('.cm-geolocation-address',context).add('.cm-geolocation-city',context).add('.cm-geolocation-state',context).add('.cm-geolocation-country',context);if(maps.length||geolocations.length){$.ceMap('init');if(maps.length){maps.each(function(){$(this).ceMap('showObjects',$(this).data('caGeocode'),1);});}
if(geolocations.length){$.ceMap('getUserLocation',function(loc){$.each(geolocations,function(i,elm){var $elm=$(elm);if($elm.hasClass('cm-geolocation-address')){$elm.val(loc.address);}else if($elm.hasClass('cm-geolocation-city')){$elm.val(loc.city);}else if($elm.hasClass('cm-geolocation-state')){setTimeout(function(){if(loc.state_code){$elm.val(loc.state_code);}else{var el=$('option',$elm).filter(':contains('+loc.state+')').eq(0);;if(el.length){$elm.val(el.val());}}
$elm.trigger('change');});}else if($elm.hasClass('cm-geolocation-country')){$elm.val(loc.country_code);$elm.trigger('change');}});});}}});}(Tygh,jQuery));(function(_,$){$(document).on('click','.cm-login-provider,.cm-link-provider',function(e){var jelm=$(e.target);var login_provider=false;var link_provider=false;var url="";var is_facebook_embedded_browser=/fbav/gi.test(window.navigator.userAgent);if(jelm.hasClass('cm-login-provider')||jelm.parents('.cm-login-provider').length>0){login_provider=true;}
if(jelm.hasClass('cm-link-provider')||jelm.parents('.cm-link-provider').length>0){link_provider=true;}
if(login_provider&&!jelm.hasClass('cm-login-provider')){jelm=jelm.closest('.cm-login-provider');}else if(link_provider&&!jelm.hasClass('cm-link-provider')){jelm=jelm.closest('.cm-link-provider');}
var idp=jelm.data('idp');var open_id=false;switch(idp){case"wordpress":case"blogger":case"flickr":case"livejournal":var open_id=true;if(idp=="blogger"){var un=prompt("Please enter your blog name");}else{var un=prompt("Please enter your username");}
break;case"openid":var open_id=true;var un=prompt("Please enter your OpenID URL");}
if(!open_id){if(login_provider){url='auth.login_provider?provider='+idp+'&redirect_url='+encodeURIComponent($('input[name=redirect_url]').val())+'&_ts='+(new Date()).getTime();}else{url='profiles.link_provider?provider='+idp+'&_ts='+(new Date()).getTime();}}else{var oi=un;if(!un){return false;}
switch(idp){case"wordpress":oi="http://"+un+".wordpress.com";break;case"livejournal":oi="http://"+un+".livejournal.com";break;case"blogger":oi="http://"+un+".blogspot.com";break;case"flickr":oi="http://www.flickr.com/photos/"+un+"/";break;}
if(login_provider){url='auth.login_provider?provider=OpenID&_ts='+(new Date()).getTime()+'&openid_identifier='+escape(oi);}else{url='profiles.link_provider?provider=OpenID&_ts='+(new Date()).getTime()+'&openid_identifier='+escape(oi);}}
if(_.embedded){url+='&embedded=true';}
if(is_facebook_embedded_browser){window.location.href=fn_url(url);}else{window.open(fn_url(url),"hybridauth_social_sing_on","location=0,status=0,scrollbars=0,width=800,height=500");}});$(document).on('click','.cm-unlink-provider',function(e){var jelm=$(e.target);if(!jelm.hasClass('cm-unlink-provider')){jelm=jelm.closest('.cm-unlink-provider');}
if(confirm(_.tr('text_are_you_sure_to_proceed'))){var idp=jelm.data('idp');$.ceAjax('request',fn_url('profiles.unlink_provider?provider='+idp),{method:'post',result_ids:'hybrid_providers'});}});$(document).on('change','.cm-select-provider',function(e){var jelm=$(e.target),option=$('option:selected',jelm),provider=option.data('provider'),id=option.data('id');$.ceAjax('request',fn_url('hybrid_auth.select_provider?provider='+provider+'&id='+id),{method:'get',result_ids:'content_keys_'+id+',content_params_'+id});});})(Tygh,Tygh.$);(function(_,$){$.ceEvent('on','ce.update_object_status_callback',function(){var order_id=$('#order_id').val();$.ceAjax('request',fn_url('pochta.search_tracking&order_id='+order_id),{result_ids:'content_pochta_information'});});}(Tygh,Tygh.$));(function(_,$){$.ceEvent('on','ce.commoninit',function(context){context.find('.cm-processing-personal-data').each(function(index,target){var $elm=$(target);if($elm.prop('personal_data_processing')==undefined){if($elm.data('caProcessingPersonalDataWithoutClick')){var showMsg=true;pdpProcessingHandler(null,true,$elm);}else{$elm.on('click',pdpProcessingHandler);}}
$elm.prop('personal_data_processing',true);});function pdpProcessingHandler(event,isHideLoader,elm){var $elm=elm||$(this);var $placeholder=$elm.find('.cm-block-add-subscribe');var $subscribePolicyBlock=$elm.find('.cm-subscribe-policy');var $subscribePersonalDataBlock=$elm.find('.cm-subscribe-personal-data');var autoclicked=isHideLoader||false;var autoclickedClassName='ty-footer-form-block-policy__input--autoclicked';var allowRequest=(!$subscribePolicyBlock.length)&&($subscribePersonalDataBlock.length<1);if(allowRequest){$.ceAjax('request',fn_url('personal_data.subscribe_policy'),{method:'get',callback:pdpSuccessHandler,hidden:autoclicked,data:{autoclicked:autoclicked}});}
function pdpSuccessHandler(data,params,text){var response=$(text);if(event===null){response.addClass(autoclickedClassName);}
var processingWhenAutoclicked=response.data('caProcessingPersonalDataAllowAutoclick')&&autoclicked;if(processingWhenAutoclicked||!autoclicked){response.insertBefore($placeholder);}
setTimeout(function(){$.ceDialog('get_last').ceDialog('resize');},100);}}});}(Tygh,Tygh.$));